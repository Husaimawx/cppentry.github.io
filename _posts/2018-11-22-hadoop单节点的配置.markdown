---
layout:     post
title:      hadoop单节点的配置
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：					https://blog.csdn.net/ah_quwei/article/details/79405076				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <h1>一、 <strong>hadoop的配置</strong></h1><p>离开安全模式</p><p> hadoop  dfsadmin  –safemode  leave</p><p><span style="font-family:'宋体';">修改</span>root<span style="font-family:'宋体';">用户密码</span></p><p>sudo passwd <span style="font-family:'宋体';">设置</span>root<span style="font-family:'宋体';">的密码</span></p><p>passwd <span style="font-family:'宋体';">设置自己的密码</span></p><p><span style="font-family:'宋体';">关闭</span>ubuntu<span style="font-family:'宋体';">的防火墙</span><span style="font-family:Calibri;">: </span>ufw disable</p><p>普通用户</p><p><span style="font-family:'宋体';">一、添加</span>hadoop<span style="font-family:'宋体';">用户组和</span><span style="font-family:Calibri;">hadoop</span><span style="font-family:'宋体';">用户</span></p><p><span style="font-family:'宋体';">创建</span>hadoop<span style="font-family:'宋体';">用户组：</span>sudo addgroup hadoop</p><p><span style="font-family:'宋体';">创建</span>hadoop<span style="font-family:'宋体';">用户：  </span>sudo adduser -ingroup hadoop hadoop</p><p><span style="font-family:'宋体';">二、安装</span>ssh</p><p><span style="font-family:'宋体';">安装命令：</span>sudo apt-get install openssh-server </p><p><span style="font-family:'宋体';">启动服务：</span>sudo /etc/init.d/ssh start</p><p><span style="font-family:'宋体';">查看服务是否启动：</span>ps -e | grep ssh</p><p><span style="font-family:'宋体';">修改配置文件，允许</span>root<span style="font-family:'宋体';">用户远程登陆：</span></p><p><span style="font-family:'宋体';">打开</span>"<span style="font-family:'宋体';">终端窗口</span><span style="font-family:Calibri;">"</span><span style="font-family:'宋体';">，输入</span><span style="font-family:Calibri;">"sudo gedit /etc/ssh/sshd_config"--&gt;</span><span style="font-family:'宋体';">回车</span><span style="font-family:Calibri;">--&gt;</span><span style="font-family:'宋体';">把配置文件中的</span><span style="font-family:Calibri;">"PermitRootLogin without-password"</span><span style="font-family:'宋体';">加一个</span><span style="font-family:Calibri;">"#"</span><span style="font-family:'宋体';">号</span><span style="font-family:Calibri;">,</span><span style="font-family:'宋体';">把它注释掉</span><span style="font-family:Calibri;">--&gt;</span><span style="font-family:'宋体';">再增加一句</span><span style="font-family:Calibri;">"PermitRootLogin yes"--&gt;</span><span style="font-family:'宋体';">保存，修改成功。</span></p><p> </p><p>1<span style="font-family:'宋体';">、免密码登录</span></p><p>生成密钥</p><p>root@hadoop01:~/Hadoop# ssh-keygen -t rsa -P ""</p><p>将公钥追加到authorized_keys</p><p>root@hadoop01:~/.ssh# cat  ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</p><p>root@hadoop01:~/.ssh# ls</p><p>authorized_keys  id_rsa  id_rsa.pub</p><p>2<span style="font-family:'宋体';">、配置</span><span style="font-family:Calibri;">hadoop</span><span style="font-family:'宋体';">环境变量</span></p><p>root@hadoop01:/usr/bin# vi  /etc/profile</p><p>export JAVA_HOME=/home/hadoop/setup/jdk1.8.0_131</p><p>export HADOOP_HOME=/home/hadoop/setup/hadoop-2.7.3</p><p>export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</p><p>oot@hadoop01:/usr/bin# source  /etc/ profile</p><p>查看环境：</p><p>root@hadoop01:/usr/bin# echo $PATH</p><p> </p><p>3<span style="font-family:'宋体';">、配置</span><span style="font-family:Calibri;">Hadoop</span><span style="font-family:'宋体';">伪分布式的步骤（要修改</span><span style="font-family:Calibri;">5</span><span style="font-family:'宋体';">个文件）</span></p><p><span style="font-family:'黑体';">（</span>1）、hadoop-env.sh</p><p> 25行 export JAVA_HOME=/root/app/jdk1.8.0_131</p><p> </p><p><span style="font-family:'黑体';">（</span>2）、core-site.xml</p><p>&lt;configuration&gt;</p><p>        &lt;property&gt;</p><p>		&lt;!-- <span style="font-family:'宋体';">指定</span><span style="font-family:Calibri;">HDFS</span><span style="font-family:'宋体';">老大（</span><span style="font-family:Calibri;">namenode</span><span style="font-family:'宋体';">）的通信地址 </span><span style="font-family:Calibri;">--&gt;</span></p><p>                &lt;name&gt;fs.defaultFS&lt;/name&gt;</p><p>                &lt;value&gt;hdfs://hadoop01:9000&lt;/value&gt;</p><p>        &lt;/property&gt;</p><p>        &lt;property&gt;</p><p>		&lt;!-- <span style="font-family:'宋体';">指定</span><span style="font-family:Calibri;">hadoop</span><span style="font-family:'宋体';">运行时产生文件的存储路径 </span><span style="font-family:Calibri;">--&gt;      </span></p><p>                &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</p><p>                &lt;value&gt;/Hadoop/setup/tmp&lt;/value&gt;</p><p>        &lt;/property&gt;</p><p>&lt;/configuration&gt;</p><p> </p><p> </p><p> </p><p><span style="font-family:'黑体';">（</span>3）、hdfs-site.xml</p><p>&lt;configuration&gt;</p><p>        &lt;property&gt;</p><p>		&lt;!-- <span style="font-family:'宋体';">设置</span><span style="font-family:Calibri;">hdfs</span><span style="font-family:'宋体';">副本数量 </span><span style="font-family:Calibri;">--&gt;</span></p><p>                &lt;name&gt;dfs.replication&lt;/name&gt;</p><p>                &lt;value&gt;1&lt;/value&gt;</p><p>        &lt;/property&gt;</p><p> </p><p> </p><p> </p><p>    	&lt;property&gt; </p><p>			&lt;!--<span style="font-family:'宋体';">用于确定将</span><span style="font-family:Calibri;">HDFS</span><span style="font-family:'宋体';">文件系统的元信息保存在什么目录下</span><span style="font-family:Calibri;">--&gt;</span></p><p>        	&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; </p><p>        	&lt;value&gt;file:/Hadoop/setup/dfs/name&lt;/value&gt; </p><p>   	&lt;/property&gt; </p><p>    	&lt;property&gt; </p><p>		&lt;!--<span style="font-family:'宋体';">用于确定将</span><span style="font-family:Calibri;">HDFS</span><span style="font-family:'宋体';">文件系统的数据保存在什么目录下</span><span style="font-family:Calibri;">--&gt;</span></p><p>       		&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; </p><p>        	&lt;value&gt;file:/Hadoop/setup/dfs/data&lt;/value&gt; </p><p>    	&lt;/property&gt;</p><p>&lt;/configuration&gt;</p><p> </p><p><span style="font-family:'黑体';">（</span>4）、maprea-site.xml</p><p>&lt;configuration&gt;</p><p>	&lt;!-- <span style="font-family:'宋体';">通知框架</span><span style="font-family:Calibri;">MR</span><span style="font-family:'宋体';">使用</span><span style="font-family:Calibri;">YARN --&gt;</span></p><p>        &lt;property&gt;</p><p>                &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</p><p>                &lt;value&gt;yarn&lt;/value&gt;</p><p>        &lt;/property&gt;</p><p>&lt;/configuration&gt;</p><p> </p><p><span style="font-family:'黑体';">（</span>5）、yarn-site.xml</p><p>&lt;configuration&gt;</p><p>&lt;!-- Site specific YARN configuration properties --&gt;</p><p>        &lt;property&gt;</p><p>		&lt;!-- NodeManager<span style="font-family:'宋体';">取数据的方式是</span><span style="font-family:Calibri;">mapreduce_shuffle --&gt;</span></p><p>                &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</p><p>                &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</p><p>        &lt;/property&gt;</p><p> </p><p> </p><p>        &lt;property&gt;</p><p>		&lt;!-- <span style="font-family:'宋体';">指定</span><span style="font-family:Calibri;">yarn</span><span style="font-family:'宋体';">的老大的地址（</span><span style="font-family:Calibri;">resourcemanager</span><span style="font-family:'宋体';">） </span><span style="font-family:Calibri;">--&gt;</span></p><p>                &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</p><p>                &lt;value&gt;hadoop01&lt;/value&gt;</p><p>        &lt;/property&gt;</p><p>&lt;/configuration&gt;</p><p> </p><p> </p><p>4<span style="font-family:'宋体';">、格式化</span><span style="font-family:Calibri;">hdfs</span></p><p>root@hadoop01:~/Hadoop/hadoop-2.7.3/etc/hadoop# hdfs namenode -format</p><p> </p><p>5<span style="font-family:'宋体';">、启动</span><span style="font-family:Calibri;">hadoop</span></p><p><span style="font-family:'宋体';">启动</span>namenode<span style="font-family:'宋体';">和</span><span style="font-family:Calibri;">datanode:</span>	start-dfs.sh </p><p><span style="font-family:'宋体';">启动</span>yarn<span style="font-family:'宋体';">：</span>start-yarn.sh</p><p><span style="font-family:'宋体';">启动全部</span>:<span style="font-family:'宋体';">：</span>start-all.sh</p><p><span style="color:rgb(0,0,0);background:rgb(255,255,255);">start-all.sh <span style="font-family:'宋体';">启动所有的</span><span style="font-family:Arial;">Hadoop</span><span style="font-family:'宋体';">守护进程。包括</span><span style="font-family:Arial;">NameNode</span><span style="font-family:'宋体';">、 </span><span style="font-family:Arial;">Secondary NameNode</span><span style="font-family:'宋体';">、</span><span style="font-family:Arial;">DataNode</span><span style="font-family:'宋体';">、</span><span style="font-family:Arial;">JobTracker</span><span style="font-family:'宋体';">、 </span><span style="font-family:Arial;">TaskTrack</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">stop-all.sh <span style="font-family:'宋体';">停止所有的</span><span style="font-family:Arial;">Hadoop</span><span style="font-family:'宋体';">守护进程。包括</span><span style="font-family:Arial;">NameNode</span><span style="font-family:'宋体';">、 </span><span style="font-family:Arial;">Secondary NameNode</span><span style="font-family:'宋体';">、</span><span style="font-family:Arial;">DataNode</span><span style="font-family:'宋体';">、</span><span style="font-family:Arial;">JobTracker</span><span style="font-family:'宋体';">、 </span><span style="font-family:Arial;">TaskTrack</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">start-dfs.sh <span style="font-family:'宋体';">启动</span><span style="font-family:Arial;">Hadoop HDFS</span><span style="font-family:'宋体';">守护进程</span><span style="font-family:Arial;">NameNode</span><span style="font-family:'宋体';">、</span><span style="font-family:Arial;">SecondaryNameNode</span><span style="font-family:'宋体';">和</span><span style="font-family:Arial;">DataNode</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">stop-dfs.sh <span style="font-family:'宋体';">停止</span><span style="font-family:Arial;">Hadoop HDFS</span><span style="font-family:'宋体';">守护进程</span><span style="font-family:Arial;">NameNode</span><span style="font-family:'宋体';">、</span><span style="font-family:Arial;">SecondaryNameNode</span><span style="font-family:'宋体';">和</span><span style="font-family:Arial;">DataNode</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh start namenode <span style="font-family:'宋体';">单独启动</span><span style="font-family:Arial;">NameNode</span><span style="font-family:'宋体';">守护进程</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh stop namenode <span style="font-family:'宋体';">单独停止</span><span style="font-family:Arial;">NameNode</span><span style="font-family:'宋体';">守护进程</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh start datanode <span style="font-family:'宋体';">单独启动</span><span style="font-family:Arial;">DataNode</span><span style="font-family:'宋体';">守护进程</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh stop datanode <span style="font-family:'宋体';">单独停止</span><span style="font-family:Arial;">DataNode</span><span style="font-family:'宋体';">守护进程</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh start secondarynamenode <span style="font-family:'宋体';">单独启动</span><span style="font-family:Arial;">SecondaryNameNode</span><span style="font-family:'宋体';">守护进程</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh stop secondarynamenode <span style="font-family:'宋体';">单独停止</span><span style="font-family:Arial;">SecondaryNameNode</span><span style="font-family:'宋体';">守护进程</span></span><span style="color:rgb(0,0,0);"><br></span><em><span style="color:rgb(0,0,0);background:rgb(255,255,255);">start-mapred.sh <span style="font-family:'宋体';">启动</span><span style="font-family:Arial;">Hadoop MapReduce</span><span style="font-family:'宋体';">守护进程</span><span style="font-family:Arial;">JobTracker</span><span style="font-family:'宋体';">和</span><span style="font-family:Arial;">TaskTracker</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">stop-mapred.sh <span style="font-family:'宋体';">停止</span><span style="font-family:Arial;">Hadoop MapReduce</span><span style="font-family:'宋体';">守护进程</span><span style="font-family:Arial;">JobTracker</span><span style="font-family:'宋体';">和</span><span style="font-family:Arial;">TaskTracker</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh start jobtracker <span style="font-family:'宋体';">单独启动</span><span style="font-family:Arial;">JobTracker</span><span style="font-family:'宋体';">守护进程</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh stop jobtracker <span style="font-family:'宋体';">单独停止</span><span style="font-family:Arial;">JobTracker</span><span style="font-family:'宋体';">守护进程</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh start tasktracker <span style="font-family:'宋体';">单独启动</span><span style="font-family:Arial;">TaskTracker</span><span style="font-family:'宋体';">守护进程</span></span><span style="color:rgb(0,0,0);"><br></span><span style="color:rgb(0,0,0);background:rgb(255,255,255);">hadoop-daemons.sh stop tasktracker <span style="font-family:'宋体';">单独启动</span><span style="font-family:Arial;">TaskTracker</span><span style="font-family:'宋体';">守护进程</span></span></em></p>            </div>
                </div>