---
layout:     post
title:      Hbase(1)基础篇
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<div style="line-height:1.75;font-size:14px;"><span style="font-size:26px;font-family:'KaiTi_GB2312', KaiTi, STKaiti;">Hbase（1）基础篇</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:26px;font-family:'KaiTi_GB2312', KaiTi, STKaiti;">博文定期更新，MR操作Hbase Hbase读写原理在Hbase(3)，10月11日发布</span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:26px;font-family:'KaiTi_GB2312', KaiTi, STKaiti;">Author：王智超</span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:26px;font-family:'KaiTi_GB2312', KaiTi, STKaiti;">1. hbase shell 进入Shell命令行</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:26px;font-family:'KaiTi_GB2312', KaiTi, STKaiti;">2.键入help并按Enter键显示HBase Shell的一些基本使用信息，以及几个示例命令。请注意，表名，行，列都必须用引号括起来。
</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:26px;font-family:'KaiTi_GB2312', KaiTi, STKaiti;">3.1</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>1.1. </strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>什么是</strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>hbase</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">1.HBASE</span><span style="font-family:SimSun, STSong;">是一个高可靠性、高性能、面向列、可伸缩的分布式存储系统，利用</span><span style="font-family:Calibri;">HBASE</span><span style="font-family:SimSun, STSong;">技术可在廉价</span><span style="font-family:Calibri;">PC
 Server</span><span style="font-family:SimSun, STSong;">上搭建起大规模结构化存储集群。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">解释：</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">高可靠：是因为分布式的环境下，我们可以依靠zookeeper进行主节点的主备切换</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">高性能：因为面向列，我们的表会被切分存储在不同的节点里面，所以可以多客户端并发</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">访问数据，也就是充分利用了操作系统的IO</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">面向列：传统的数据库是针对行查询，面向列的数据库主要针对列进行查询</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">可伸缩：服务器节点是可以动态增加和减少的</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">2.HBASE</span><span style="font-family:SimSun, STSong;">的目标是存储并处理大型的数据，更具体来说是仅需使用普通的硬件配置，就能够处理由成千上万的行和列所组成的大型数据</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">解释：传统数据库的操作的话，不是分布式的，也不是面向列的，一张表存储数据有限，数据量大的时候不适合数据的查找，还会面临分表等操作，而hbase对弈这个问题已经解决好了</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">3.HBASE</span><span style="font-family:SimSun, STSong;">是</span><span style="font-family:Calibri;">Google Bigtable</span><span style="font-family:SimSun, STSong;">的开源实现，但是也有很多不同之处。比如：</span><span style="font-family:Calibri;">Google
 Bigtable</span><span style="font-family:SimSun, STSong;">利用</span><span style="font-family:Calibri;">GFS</span><span style="font-family:SimSun, STSong;">作为其文件存储系统，</span><span style="font-family:Calibri;">HBASE</span><span style="font-family:SimSun, STSong;">利用</span><span style="font-family:Calibri;">Hadoop
 HDFS</span><span style="font-family:SimSun, STSong;">作为其文件存储系统；</span><span style="font-family:Calibri;">Google</span><span style="font-family:SimSun, STSong;">运行</span><span style="font-family:Calibri;">MAPREDUCE</span><span style="font-family:SimSun, STSong;">来处理</span><span style="font-family:Calibri;">Bigtable</span><span style="font-family:SimSun, STSong;">中的海量数据，</span><span style="font-family:Calibri;">HBASE</span><span style="font-family:SimSun, STSong;">同样利用</span><span style="font-family:Calibri;">Hadoop
 MapReduce</span><span style="font-family:SimSun, STSong;">来处理</span><span style="font-family:Calibri;">HBASE</span><span style="font-family:SimSun, STSong;">中的海量数据；</span><span style="font-family:Calibri;">Google Bigtable</span><span style="font-family:SimSun, STSong;">利用</span><span style="font-family:Calibri;">Chubby</span><span style="font-family:SimSun, STSong;">作为协同服务，</span><span style="font-family:Calibri;">HBASE</span><span style="font-family:SimSun, STSong;">利用</span><span style="font-family:Calibri;">Zookeeper</span><span style="font-family:SimSun, STSong;">作为对应。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">解释：hbase就是一个nosql的数据库，主要就是计算用，我们可以使用sparkSql和mapreduce进行数据的处理</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>1.2 </strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>与传统数据库的对比</strong></span></div>
<div style="line-height:1.75;font-size:14px;">1<span style="font-family:SimSun, STSong;">、传统数据库遇到的问题：</span></div>
<div style="line-height:1.75;font-size:14px;">1<span style="font-family:SimSun, STSong;">）数据量很大的时候无法存储</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">解释：数据库说白了是一个软件，提供数据存储查询等各种服务供客户端使用，传统的数据库一般都是单机的，单机就会面临单个节点的磁盘空间不够的问题，如果我们把传统的数据库想设计成分布式的那么传统的数据库没有给我们提供这个功能，就需要我们自己去写分布式服务协调的功能模块，很容易出错</span></div>
<div style="line-height:1.75;font-size:14px;">2<span style="font-family:SimSun, STSong;">）没有很好的备份机制</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">解释：没有数据备份，如果宕机的话，数据没有办法进行恢复了</span></div>
<div style="line-height:1.75;font-size:14px;">3<span style="font-family:SimSun, STSong;">）数据达到一定数量开始缓慢，很大的话基本无法支撑</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">解释：传统数据库对于一张表的行和列是有限制的</span></div>
<div style="line-height:1.75;font-size:14px;"> 2<span style="font-family:SimSun, STSong;">、</span>HBASE<span style="font-family:SimSun, STSong;">优势：</span></div>
<div style="line-height:1.75;font-size:14px;">1<span style="font-family:SimSun, STSong;">）线性扩展，随着数据量增多可以通过节点扩展进行支撑</span></div>
<div style="line-height:1.75;font-size:14px;">2<span style="font-family:SimSun, STSong;">）数据存储在</span>hdfs<span style="font-family:SimSun, STSong;">上，备份机制健全</span></div>
<div style="line-height:1.75;font-size:14px;">3<span style="font-family:SimSun, STSong;">）通过</span>zookeeper<span style="font-family:SimSun, STSong;">协调查找数据，访问速度块。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">解释：因为有跳表数据结构，详情请听下回分晓</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>1.3 hbase</strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>集群中的角色</strong></span></div>
<div style="line-height:1.75;font-size:14px;">1<span style="font-family:SimSun, STSong;">、一个或者多个主节点，</span>Hmaster</div>
<div style="line-height:1.75;font-size:14px;">2<span style="font-family:SimSun, STSong;">、多个从节点，</span>HregionServer</div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>2. habse</strong></span><span style="font-size:29px;font-family:SimSun, STSong;"><strong>安装</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>1.上传</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>2.解压</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>3.重命名</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>4.修改环境变量</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>5.修改配置文件</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>6.分发到其他节点</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>7.启动</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>8.测试</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>3. hbase</strong></span><span style="font-size:29px;font-family:SimSun, STSong;"><strong>数据模型</strong></span></div>
<div></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>时间戳版本是可以设置的，设置这个版本会在主节点进行文件合并的时候，数据保存几个版本取决于当初设置的版本数量</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>*****如何定位数据</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>四维空间：表名，行健，列族，列四维空间确定一条信息</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;"><strong>3.1 Row Key</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">与</span><span style="font-family:SimSun, STSong;">nosql</span><span style="font-family:SimSun, STSong;">数据库们一样</span><span style="font-family:Calibri;">,row
 key</span><span style="font-family:SimSun, STSong;">是用来检索记录的主键。访问</span><span style="font-family:Calibri;">HBASE table</span><span style="font-family:SimSun, STSong;">中的行，只有三种方式：</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">1.</span><span style="font-family:SimSun, STSong;">通过单个</span><span style="font-family:Calibri;">row key</span><span style="font-family:SimSun, STSong;">访问</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">2.</span><span style="font-family:SimSun, STSong;">通过</span><span style="font-family:Calibri;">row key</span><span style="font-family:SimSun, STSong;">的</span><span style="font-family:Calibri;">range</span><span style="font-family:SimSun, STSong;">（正则）</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">3.</span><span style="font-family:SimSun, STSong;">全表扫描</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Row key</span><span style="font-family:SimSun, STSong;">行键
</span><span style="font-family:Calibri;">(Row key)</span><span style="font-family:SimSun, STSong;">可以是任意字符串</span><span style="font-family:Calibri;">(</span><span style="font-family:SimSun, STSong;">最大长度 是
</span><span style="font-family:Calibri;">64KB</span><span style="font-family:SimSun, STSong;">，实际应用中长度一般为
</span><span style="font-family:Calibri;">10-100bytes)</span><span style="font-family:SimSun, STSong;">，在</span><span style="font-family:Calibri;">HBASE</span><span style="font-family:SimSun, STSong;">内部，</span><span style="font-family:Calibri;">row key</span><span style="font-family:SimSun, STSong;">保存为字节数组。存储时，数据按照</span><span style="font-family:Calibri;">Row
 key</span><span style="font-family:SimSun, STSong;">的字典序</span><span style="font-family:Calibri;">(byte order)</span><span style="font-family:SimSun, STSong;">排序存储。设计</span><span style="font-family:Calibri;">key</span><span style="font-family:SimSun, STSong;">时，要充分排序存储这个特性，将经常一起读取的行存储放到一起。</span><span style="font-family:Calibri;">(</span><span style="font-family:SimSun, STSong;">位置相关性</span><span style="font-family:Calibri;">)</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;"><strong>3.2 Columns Family</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">列簇</span><span style="font-family:SimSun, STSong;">
</span><span style="font-family:SimSun, STSong;">：</span><span style="font-family:SimSun, STSong;">HBASE</span><span style="font-family:SimSun, STSong;">表中的每个列，都归属于某个列族。列族是表的</span><span style="font-family:Calibri;">schema</span><span style="font-family:SimSun, STSong;">的一部
 分</span><span style="font-family:Calibri;">(</span><span style="font-family:SimSun, STSong;">而列不是</span><span style="font-family:Calibri;">)</span><span style="font-family:SimSun, STSong;">，必须在使用表之前定义。列名都以列族作为前缀。例如
</span><span style="font-family:Calibri;">courses:history</span><span style="font-family:SimSun, STSong;">，</span><span style="font-family:Calibri;">courses:math</span><span style="font-family:SimSun, STSong;">都属于</span><span style="font-family:Calibri;">courses
</span><span style="font-family:SimSun, STSong;">这个列族。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;"><strong>3.3 Cell</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">由</span><span style="font-family:SimSun, STSong;">{row key, columnFamily, version}
</span><span style="font-family:SimSun, STSong;">唯一确定的单元。</span><span style="font-family:Calibri;">cell</span><span style="font-family:SimSun, STSong;">中 的数据是没有类型的，全部是字节码形式存贮。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">关键字：无类型、字节码</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;"><strong>3.4 Time Stamp</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">HBASE
</span><span style="font-family:SimSun, STSong;">中通过</span><span style="font-family:Calibri;">rowkey</span><span style="font-family:SimSun, STSong;">和</span><span style="font-family:Calibri;">columns</span><span style="font-family:SimSun, STSong;">确定的为一个存贮单元称为</span><span style="font-family:Calibri;">cell</span><span style="font-family:SimSun, STSong;">。每个
</span><span style="font-family:Calibri;">cell</span><span style="font-family:SimSun, STSong;">都保存 着同一份数据的多个版本。版本通过时间戳来索引。时间戳的类型是
</span><span style="font-family:Calibri;">64</span><span style="font-family:SimSun, STSong;">位整型。时间戳可以由</span><span style="font-family:Calibri;">HBASE(</span><span style="font-family:SimSun, STSong;">在数据写入时自动
</span><span style="font-family:Calibri;">)</span><span style="font-family:SimSun, STSong;">赋值，此时时间戳是精确到毫秒 的当前系统时间。时间戳也可以由客户显式赋值。如果应用程序要避免数据版 本冲突，就必须自己生成具有唯一性的时间戳。每个
</span><span style="font-family:Calibri;">cell</span><span style="font-family:SimSun, STSong;">中，不同版本的数据按照时间倒序排序，即最新的数据排在最前面。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">为了避免数据存在过多版本造成的的管理</span><span style="font-family:SimSun, STSong;"> (</span><span style="font-family:SimSun, STSong;">包括存贮和索引</span><span style="font-family:Calibri;">)</span><span style="font-family:SimSun, STSong;">负担，</span><span style="font-family:Calibri;">HBASE</span><span style="font-family:SimSun, STSong;">提供
 了两种数据版本回收方式。一是保存数据的最后</span><span style="font-family:Calibri;">n</span><span style="font-family:SimSun, STSong;">个版本，二是保存最近一段 时间内的版本（比如最近七天）。用户可以针对每个列族进行设置。</span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>4. hbase</strong></span><span style="font-size:29px;font-family:SimSun, STSong;"><strong>命令</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>4.1 shell</strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>命令</strong></span></div>
<div style="overflow:auto;">
<table style="border-collapse:collapse;table-layout:fixed;width:0px;"><colgroup><col style="width:162px;"><col style="width:464px;"></colgroup><tbody><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;background-color:rgb(51,102,102);">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>名称</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;background-color:rgb(51,102,102);">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>命令表达式</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>创建表</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(255,0,0);background-color:transparent;"><strong>create
</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>'</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>表名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>',
 '</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>列族名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>1','</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>列族名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>2','</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>列族名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>N'</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>查看所有表</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>list</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>描述表</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>describe  </strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>‘表名’</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">判断表存在</span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">e</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">xists</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"> </span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;"> '</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">表名</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">'</span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">判断是否禁用启用表</span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">is_enabled '</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">表名</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">'</span></div>
<div class="table-cell-line"><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">is_disabled ‘</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">表名</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">’</span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>添加记录      </strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>put  </strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>‘表名’</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>,
</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>‘</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>rowKey</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>’</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>,
</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>‘列族
</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>:
</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>列‘  </strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>,  '</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>值</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>'</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>查看记录</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>rowkey</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>下的所有数据</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>get  '</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>表名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>'
 , 'rowKey'</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>查看表中的记录总数</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>count  '</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>表名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>'</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>获取某个列族</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(255,0,0);background-color:transparent;">get
</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">'</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">表名</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">','</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">rowkey</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">','</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">列族</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">'</span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>获取某个列族的某个列</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(255,0,0);background-color:transparent;">get
</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">'</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">表名</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">','</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">rowkey</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">','</span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;">列族：列</span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">’</span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>删除记录</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>delete  </strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>‘表名’
</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>,</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>‘行名’
</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>,
</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>‘列族：列</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>'</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>删除整行</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;"><strong>deleteall '</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>表名</strong></span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;"><strong>','</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>rowkey</strong></span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;"><strong>'</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>删除一张表</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>先要屏蔽该表，才能对该表进行删除</strong></span></div>
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>第一步
</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>disable
</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>‘表名’ ，第二步  </strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>drop '</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>表名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>'</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>清空表</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(255,0,0);background-color:transparent;"><strong>truncate
</strong></span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;"><strong>'</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>表名</strong></span><span style="font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;"><strong>'</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>查看所有记录</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(255,0,0);background-color:transparent;"><strong>scan
</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>"</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>表名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>"
  </strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>查看某个表某个列中所有数据</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(255,0,0);background-color:transparent;"><strong>scan
</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>"</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>表名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>"
 , {COLUMNS=&gt;'</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>列族名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>:</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>列名</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>'}</strong></span></div>
</td>
</tr><tr><td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>更新记录</strong></span></div>
</td>
<td style="font-size:14px;color:rgb(57,57,57);border:1px solid rgb(167,167,167);overflow:hidden;">
<div class="table-cell-line"><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>就是重写一遍，进行覆盖，</strong></span><span style="font-family:Calibri;color:rgb(0,0,0);background-color:transparent;"><strong>hbase</strong></span><span style="font-family:SimSun, STSong;color:rgb(0,0,0);background-color:transparent;"><strong>没有修改，都是追加</strong></span></div>
</td>
</tr></tbody></table></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>5. hbase</strong></span><span style="font-size:29px;font-family:SimSun, STSong;"><strong>依赖</strong></span><span style="font-size:29px;font-family:Calibri;"><strong>zookeeper</strong></span></div>
<div style="line-height:1.75;font-size:14px;">1、 <span style="font-family:SimSun, STSong;">保存</span><span style="font-family:SimSun, STSong;">Hmaster</span><span style="font-family:SimSun, STSong;">的地址和</span><span style="font-family:Calibri;">backup-master</span><span style="font-family:SimSun, STSong;">地址</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">hmaster</span><span style="font-family:SimSun, STSong;">：</span></div>
<div style="line-height:1.75;font-size:14px;">a) <span style="font-family:SimSun, STSong;">管理</span><span style="font-family:SimSun, STSong;">H</span>r<span style="font-family:SimSun, STSong;">egionServer</span></div>
<div style="line-height:1.75;font-size:14px;">b) <span style="font-family:SimSun, STSong;">做增删改查表的节点</span></div>
<div style="line-height:1.75;font-size:14px;">c) <span style="font-family:SimSun, STSong;">管理</span><span style="font-family:SimSun, STSong;">H</span>r<span style="font-family:SimSun, STSong;">egionServer</span><span style="font-family:SimSun, STSong;">中的表分配</span></div>
<div style="line-height:1.75;font-size:14px;">2、 <span style="font-family:SimSun, STSong;">保存表</span><span style="font-family:SimSun, STSong;">-ROOT-</span><span style="font-family:SimSun, STSong;">的地址</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">hbase</span><span style="font-family:SimSun, STSong;">默认的根表，检索表。</span></div>
<div style="line-height:1.75;font-size:14px;">3、 <span style="font-family:SimSun, STSong;">HRegionServer</span><span style="font-family:SimSun, STSong;">列表</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">表的增删改查数据。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">和</span><span style="font-family:SimSun, STSong;">hdfs</span><span style="font-family:SimSun, STSong;">交互，存取数据。</span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:29px;font-family:SimSun, STSong;"><strong>6. hbase</strong></span><span style="font-size:29px;font-family:SimSun, STSong;"><strong> javaAPI操作</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>hbase</strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>基本操作</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>表的创建删除初始化</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>记录的增删改查</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">static Configuration config = null;</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">private Connection connection = null;</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">private Table table = null;</span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">@Before</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">public void init() throws Exception {</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">config = HBaseConfiguration.create();// 配置</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">config.set("hbase.zookeeper.quorum", "192.168.11.5,192.168.11.6,192.168.11.7");// zookeeper地址</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">config.set("hbase.zookeeper.property.clientPort", "2181");// zookeeper端口</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">connection = ConnectionFactory.createConnection(config);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">table = connection.getTable(TableName.valueOf("mmd"));</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">}</span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">/**</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* 单条查询</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*
</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* @throws Exception</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*/</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">@Test</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">public void queryData() throws Exception {</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Get get = new Get(Bytes.toBytes("as7"));</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Result result = table.get(get);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">System.out.println</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">(Bytes.toString(result.getValue</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">(Bytes.toBytes("info1"),
</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Bytes.toBytes("username"))));</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">}</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">/**</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* 删除数据</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*
</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* @throws Exception</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*/</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">@Test</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">public void deleteDate() throws Exception {</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Delete delete = new Delete(Bytes.toBytes("as8"));</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">table.delete(delete);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">table.close();</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">}</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">/**</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* 修改数据</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*
</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* @throws Exception</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*/</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">@Test</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">public void uodateData() throws Exception {</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Put put = new Put(Bytes.toBytes("as9"));</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">put.add(Bytes.toBytes("info1"),</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Bytes.toBytes("username"),
</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Bytes.toBytes("lisi"));</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">table.put(put);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">table.close();</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">}</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">/**</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* 向hbase中增加数据</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*
</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* @throws Exception</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*/</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">@SuppressWarnings({ "deprecation", "resource" })</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">@Test</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">public void insertData() throws Exception {</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">//table.setAutoFlushTo(false);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">table.setWriteBufferSize(123456789);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">ArrayList&lt;Put&gt; arrayList = new ArrayList&lt;Put&gt;();
</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">for(int i = 0 ; i&lt;50 ;i++){</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Put put = new Put(Bytes.toBytes("as"+i));</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">put.add(Bytes.toBytes("info1"), Bytes.toBytes("username"), Bytes.toBytes("wangwu"+i));</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">put.add(Bytes.toBytes("info2"), Bytes.toBytes("password"), Bytes.toBytes(1234+i));</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">arrayList.add(put);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">}</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">//插入数据</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">table.put(arrayList);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">table.close();</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">}</span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">/**</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* 删除表的操作</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* @throws MasterNotRunningException</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* @throws ZooKeeperConnectionException</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* @throws IOException</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*/</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">@Test</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">public void deleteTable() throws MasterNotRunningException, ZooKeeperConnectionException, IOException{</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">HBaseAdmin admin = new HBaseAdmin(config);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">admin.disableTable("test3");</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">admin.deleteTable("test3");</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">admin.close();</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">}</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">/**</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* 创建一个表的操作</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*
</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">* @throws Exception</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">*/</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">@Test</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">public void createTable() throws Exception {</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">// 创建表管理类</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">HBaseAdmin admin = new HBaseAdmin(config); // hbase表管理</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">// 创建表描述类</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">TableName tableName = TableName.valueOf("test4"); // 表名称</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">HTableDescriptor desc = new HTableDescriptor(tableName);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">// 创建列族的描述类</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">HColumnDescriptor family = new HColumnDescriptor("info"); // 列族</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">// 将列族添加到表中</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">desc.addFamily(family);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">HColumnDescriptor family2 = new HColumnDescriptor("info2"); // 列族</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">// 将列族添加到表中</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">desc.addFamily(family2);</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">// 创建表</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">admin.createTable(desc); // 创建表</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">}</span></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>hbase</strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>过滤器</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>1.1.1. FilterList</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">FilterList
</span><span style="font-family:SimSun, STSong;">代表一个过滤器列表，可以添加多个过滤器进行查询，多个过滤器之间的关系有：</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">与关系（符合所有）：</span><span style="font-family:SimSun, STSong;">FilterList.Operator.MUST_PASS_ALL  </span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">或关系（符合任一）：</span><span style="font-family:SimSun, STSong;">FilterList.Operator.MUST_PASS_ONE</span></div>
<div style="line-height:1.75;font-size:14px;"> </div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">使用方法：</span></div>
<div style="line-height:1.75;font-size:14px;">FilterList filterList = new FilterList(FilterList.Operator.MUST_PASS_ONE);   </div>
<div style="line-height:1.75;font-size:14px;">Scan s1 = new Scan();  </div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"> </span>filterList.addFilter(new SingleColumnValueFilter(Bytes.toBytes(“f1”),  Bytes.toBytes(“c1”),  CompareOp.EQUAL,Bytes.toBytes(“v1”) )  );  </div>
<div style="line-height:1.75;font-size:14px;">filterList.addFilter(new SingleColumnValueFilter(Bytes.toBytes(“f1”),  Bytes.toBytes(“c2”),  CompareOp.EQUAL,Bytes.toBytes(“v2”) )  );  </div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"> // </span><span style="font-family:SimSun, STSong;">添加下面这一行后，则只返回指定的</span><span style="font-family:Calibri;">cell</span><span style="font-family:SimSun, STSong;">，同一行中的其他</span><span style="font-family:Calibri;">cell</span><span style="font-family:SimSun, STSong;">不返回</span><span style="font-family:Calibri;">  </span></div>
<div style="line-height:1.75;font-size:14px;"> s1.addColumn(Bytes.toBytes(“f1”), Bytes.toBytes(“c1”));  </div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"> s1.setFilter(filterList);  //</span><span style="font-family:SimSun, STSong;">设置</span><span style="font-family:Calibri;">filter</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;"> ResultScanner ResultScannerFilterList = table.getScanner(s1);  //</span><span style="font-family:SimSun, STSong;">返回结果列表</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>1.1.2. </strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>过滤器的种类</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">过滤器的种类：</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">列值过滤器</span><span style="font-family:SimSun, STSong;">—</span><span style="font-family:Calibri;">SingleColumnValueFilter</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">      </span><span style="font-family:SimSun, STSong;">过滤列植的相等、不等、范围等</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">列名前缀过滤器</span><span style="font-family:SimSun, STSong;">—ColumnPrefixFilter</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">      </span><span style="font-family:SimSun, STSong;">过滤指定前缀的列名</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">多个列名前缀过滤器</span><span style="font-family:SimSun, STSong;">—</span><span style="font-family:Calibri;">MultipleColumnPrefixFilter</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">       </span><span style="font-family:SimSun, STSong;">过滤多个指定前缀的列名</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">rowKey</span><span style="font-family:SimSun, STSong;">过滤器—</span><span style="font-family:Calibri;">RowFilter</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">      </span><span style="font-family:SimSun, STSong;">通过正则，过滤</span><span style="font-family:SimSun, STSong;">rowKey</span><span style="font-family:SimSun, STSong;">值。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>1.1.3. </strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>列值过滤器</strong></span><span style="font-size:21px;"><strong>—SingleColumnValueFilter</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">SingleColumnValueFilter
</span><span style="font-family:SimSun, STSong;">列值判断</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">相等</span><span style="font-family:SimSun, STSong;"> (CompareOp.EQUAL ),</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">不等</span><span style="font-family:SimSun, STSong;">(CompareOp.NOT_EQUAL),</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">范围</span><span style="font-family:SimSun, STSong;"> (e.g., CompareOp.GREATER)</span><span style="font-family:SimSun, STSong;">…………</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">下面示例检查列值和字符串</span><span style="font-family:SimSun, STSong;">'values'
</span><span style="font-family:SimSun, STSong;">相等</span><span style="font-family:Calibri;">...</span></div>
<div style="line-height:1.75;font-size:14px;">SingleColumnValueFilter f = new  SingleColumnValueFilter(</div>
<div style="line-height:1.75;font-size:14px;">Bytes.toBytes("cFamily")              Bytes.toBytes("column"), CompareFilter.CompareOp.EQUAL,</div>
<div style="line-height:1.75;font-size:14px;">        Bytes.toBytes("values"));</div>
<div style="line-height:1.75;font-size:14px;">s1.setFilter(f);</div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">注意：如果过滤器过滤的列在数据表中有的行中不存在，那么这个过滤器对此行无法过滤。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>1.1.4. </strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>列名前缀过滤器</strong></span><span style="font-size:21px;"><strong>—ColumnPrefixFilter</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">过滤器</span><span style="font-family:SimSun, STSong;">—</span><span style="font-family:Calibri;">ColumnPrefixFilter</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">ColumnPrefixFilter
</span><span style="font-family:SimSun, STSong;">用于指定列名前缀值相等</span></div>
<div style="line-height:1.75;font-size:14px;">ColumnPrefixFilter f = new ColumnPrefixFilter(Bytes.toBytes("values"));</div>
<div style="line-height:1.75;font-size:14px;">s1.setFilter(f);</div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;font-family:SimSun, STSong;"><strong>1.1.5. </strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>多个列值前缀过滤器</strong></span><span style="font-size:21px;"><strong>—MultipleColumnPrefixFilter</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">MultipleColumnPrefixFilter
</span><span style="font-family:SimSun, STSong;">和 </span><span style="font-family:Calibri;">ColumnPrefixFilter
</span><span style="font-family:SimSun, STSong;">行为差不多，但可以指定多个前缀</span></div>
<div style="line-height:1.75;font-size:14px;">byte[][] prefixes = new byte[][] {Bytes.toBytes("value1"),Bytes.toBytes("value2")};</div>
<div style="line-height:1.75;font-size:14px;">Filter f = new MultipleColumnPrefixFilter(prefixes);</div>
<div style="line-height:1.75;font-size:14px;">s1.setFilter(f);</div>
<div style="line-height:1.75;font-size:14px;"><span style="font-size:21px;"><strong>1.1.6. rowKey</strong></span><span style="font-size:21px;font-family:SimSun, STSong;"><strong>过滤器</strong></span><span style="font-size:21px;"><strong>—RowFilter</strong></span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">RowFilter
</span><span style="font-family:SimSun, STSong;">是</span><span style="font-family:Calibri;">rowkey</span><span style="font-family:SimSun, STSong;">过滤器</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">通常根据</span><span style="font-family:SimSun, STSong;">rowkey</span><span style="font-family:SimSun, STSong;">来指定范围时，使用</span><span style="font-family:Calibri;">scan</span><span style="font-family:SimSun, STSong;">扫描器的</span><span style="font-family:Calibri;">StartRow</span><span style="font-family:SimSun, STSong;">和</span><span style="font-family:Calibri;">StopRow</span><span style="font-family:SimSun, STSong;">方法比较好。</span></div>
<div style="line-height:1.75;font-size:14px;"><span style="font-family:SimSun, STSong;">Filter f = new RowFilter(CompareFilter.CompareOp.EQUAL, new RegexStringComparator("^1234")); //</span><span style="font-family:SimSun, STSong;">匹配以</span><span style="font-family:Calibri;">1234</span><span style="font-family:SimSun, STSong;">开头的</span><span style="font-family:Calibri;">rowkey</span></div>
<div style="line-height:1.75;font-size:14px;">s1.setFilter(f);</div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
<div style="line-height:1.75;font-size:14px;"><br></div>
            </div>
                </div>