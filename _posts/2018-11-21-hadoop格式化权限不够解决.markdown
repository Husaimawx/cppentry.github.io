---
layout:     post
title:      hadoop格式化权限不够解决
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <h5><br><span style="color:#ff6666;">[hadoop@xuniji ~]$ hadoop namenode -format</span><br></h5><p><span style="color:#999999;">DEPRECATED: Use of this script to execute hdfs command is deprecated.<br></span><span style="color:#999999;">Instead use the hdfs command for it.<br></span><span style="color:#999999;">/home/hadoop/apps/hadoop-2.6.4/bin/hdfs: line 276: /root/java/jdk1.7.0_72/bin/java: 权限不够<br></span><span style="color:#999999;">/home/hadoop/apps/hadoop-2.6.4/bin/hdfs: line 276: exec: /root/java/jdk1.7.0_72/bin/java: cannot execute: 权限不够</span></p><p><span style="color:#ff0000;">[hadoop@xuniji ~]$ which java          </span><span style="color:#000000;"> //查看在hadoop用户下没有安装jdk</span></p><p><span style="color:#999999;">/usr/bin/which: no java in (/root/java/jdk1.7.0_72/bin:/root/java/jdk1.7.0_72/bin:/usr/lib/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/root/apps/jdk1.7.0_45/bin:/home/hadoop/bin:/root/apps/jdk1.7.0_45/bin:/home/hadoop/apps/hadoop-2.6.4/bin:/home/hadoop/apps/hadoop-2.6.4/sbin)</span></p><h5></h5><h6><span style="color:#ff0000;"></span></h6><p><span style="color:#ff0000;">[hadoop@xuniji ~]$ echo $JAVA_HOME </span>     <span style="color:#000000;">//在root用户下安装了jdk，其他用户没有访问权限</span><br>/root/java/jdk1.7.0_72<br><span style="color:#ff0000;">[hadoop@xuniji ~]$ java -version              </span><span style="color:#000000;"> //查看是否有权限访问，果然问题在这里  没有访问权限</span><br>-bash: java: command not found</p><p></p><h5><span style="color:#ff0000;">解决：</span></h5><p>由于root下的文件其他用户没有访问权限，所以</p><p>我的解决方案 ： 修改了root用户下jdk的环境变量，把jdk文件移动到usr/local文件夹下</p><p><span style="color:#ff0000;">[root@xuniji ~]<span style="color:rgb(255,0,0);">$ </span>mv apps/jdk1.7.0_45  /usr/local/</span></p><h5><span style="color:#000000;">修改root用户的环境变量</span></h5><p><span style="color:rgb(255,0,0);">[root@xuniji ~]<span style="color:rgb(255,0,0);">$ </span>vi /etc/profile</span></p><p><span style="color:#666666;">export JAVA_HOME=/usr/local/jdk1.7.0_72/</span><br><span style="color:#999999;">export HADOOP_HOME=/home/hadoop/apps/hadoop-2.6.4</span><br><span style="color:#999999;">export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br><span style="color:#999999;">#set java environment</span><br></p><p><span style="color:#999999;">                        </span><span style="color:#666666;">JAVA_HOME=/usr/local/jdk1.7.0_72/ </span><span style="color:#999999;">      </span><span style="color:#666666;"> //当时我修改时忽略了这一行，导致一直没有成功困扰了几个小时</span></p><p><span style="color:rgb(255,0,0);">[root@xuniji ~]</span><span style="color:rgb(255,0,0);">$ source /etc/profile              </span><span style="color:#333333;">//使修改的配置立即生效</span><br></p><h5><span style="color:#333333;">修改普通用户的环境变量</span></h5><p><span style="color:#ff0000;">[hadoop@xuniji ~]$ vi .bash_profile         </span><span style="color:#333333;">//添加以下几行</span></p><p><span style="color:#666666;">export JAVA_HOME=/usr/local/jdk1.7.0_72/<br>export PATH==$JAVA_HOME/bin:$PATH<br>export CLASSPATH=.:$JAVA_HOME/lib.tools.jar<br></span></p><p><span style="color:#666666;">export JRE_HOME=$JAVA_HOME/jre </span></p><p><span style="color:#666666;"><span style="color:rgb(255,0,0);">[hadoop@xuniji ~]$ source <span style="color:rgb(255,0,0);">.bash_profile</span></span><br></span></p><p><span style="color:#666666;"><span style="color:rgb(255,0,0);"><span style="color:rgb(255,0,0);"><span style="color:rgb(255,0,0);">[hadoop@xuniji ~]$ echo $JAVA_HOME       //检查是否修改成功</span><br></span></span></span></p><p><span style="color:#666666;"><span style="color:rgb(255,0,0);"><span style="color:rgb(255,0,0);"><span style="color:rgb(255,0,0);"><span style="color:rgb(255,0,0);">[hadoop@xuniji ~]$ Java -version           //查看是否可以运行</span><br></span></span></span></span></p><h5><span style="color:#000000;">由于在安装hadoop集群中修改了一些配置，有jdk运行的目录，这里需要再重新修改一下，不然还是会格式化失败，需修改的配置：</span></h5><span style="color:#333333;">[hadoop@xuniji hadoop]$ vi hadoop-env.sh  </span>   <p></p><p><span style="background-color:rgb(255,255,255);"><span style="color:#666666;">[hadoop@xuniji hadoop-2.6.4]$ sudo vi /etc/profile </span></span><span style="color:rgb(0,0,0);background-color:rgb(255,255,255);">       </span></p><p><span style="color:#000000;">修改完环境变量后我的格式化就成功了</span></p>            </div>
                </div>