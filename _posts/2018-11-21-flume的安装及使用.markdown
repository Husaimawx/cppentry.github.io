---
layout:     post
title:      flume的安装及使用
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/Gscsd_T/article/details/80097214				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p>  Flume是什么？</p><p>      Flume是Cloudera提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume提供对数据进行简单处理，并写到各种数据接受方(可定制)的能力。</p><p>说白了flume就是可以从某个地方收集数据，再经过一个叫channel的通道后，将数据给某个东西，下面有张结构图，流程叫agent，包含三个东西，分别是source、channel、sink，眼神好使的估计已经看出他的结构流程了，source是获取数据，channel是通道，传输数据的，sink是把数据给谁的。</p><p><img src="https://img-blog.csdn.net/2018042617425491?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p></p><p align="left"><span style="color:#FF0000;">agent</span>:</p><p align="left">    <span style="color:#FF0000;">   source</span>  type:监控文件 监控 网络 thirft avro 或自定义（获取资源）</p><p align="left">       <span style="color:#FF0000;">channle </span>type:内存（管道—传输资源）</p><p align="left">       <span style="color:#FF0000;">sink    </span>type：kafka hdfs mysql数据库 （将传输过来的资源交给谁）</p><p align="left">接下来我们开始安装和使用flume了</p><p align="left">1.  将flume压缩包传输到Linux的hadoop用户下</p><p align="left">      <img src="https://img-blog.csdn.net/20180426175705441?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p align="left">2.  将压缩包解压到opt目录下</p><p align="left">      <img src="https://img-blog.csdn.net/20180426175741765?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p align="left">然后就会在opt目录下看到一个文件夹</p><p align="left">      <img src="https://img-blog.csdn.net/20180426175749191?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p align="left">3.  配置agent</p><p align="left">  首先进入conf目录，在该目录下新建一个文件，名字为a1.conf</p><p align="left">     <img src="https://img-blog.csdn.net/20180426175911983?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p align="left">然后就可以使用flume了，这个就看如何配置这个a1.conf这个文件了</p><p align="left"><strong>监听网络：</strong></p><p align="left">          <img src="https://img-blog.csdn.net/20180426180337812?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p align="left">这里主要看source的参数，配置了监听的类型，监听的主机，监听主机的端口</p><p align="left">接着我们来启动一下</p><p align="left"></p><p align="left">    ./bin/flume-ng agent -c conf -f conf/a1.conf -n a1 -Dflume.root.logger=INFO,console </p><p align="left"></p><div></div><img src="https://img-blog.csdn.net/20180426180708479?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br><p align="left">然后我们就远程到python这台主机上，回车一下就可以进行监听了，可以任意发送数据，flume那边都能看到</p><p align="left"></p><div></div><p>   <img src="https://img-blog.csdn.net/20180426180831611?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p><br></p><p><strong>监听文件：</strong></p><p>     和上面一样，只需要改动数据的来源端即source的配置即可，设置路径为/home/hadoop/a1.test，所以我们要新建一个名为a1.test的文件<br></p><p>      <img src="https://img-blog.csdn.net/20180426180948283?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p>接着我们启动flume</p><p>  <img src="https://img-blog.csdn.net/20180426180708479?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" style="margin-bottom:0px;" alt=""><br></p><p>然后我们对a1.test文件进行写操作</p><p></p><div></div><p>    <img src="https://img-blog.csdn.net/20180426181459281?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p></p><div></div><p>随即启动flume的那个窗口会出现一个感叹号，说明进行了操作，然后我们就会看到我们写入的信息</p><p><img src="https://img-blog.csdn.net/20180426181630969?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p></p><div></div><p>    也可看下该文件里面的数据</p><p>     <img src="https://img-blog.csdn.net/20180426181730405?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p><br></p><p><strong>监听目录：</strong></p><p> 只需修改source即可</p><p> 这里我们写了一个文件夹为a1_test,所以在该路径下新建这个文件夹<br></p><p>     <img src="https://img-blog.csdn.net/20180426181836859?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p></p><p>接着启动flume</p><p></p><div></div><img src="https://img-blog.csdn.net/20180426182307790?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br><p></p><p> 新建一个文件名为aaa</p><div></div><p>       <img src="https://img-blog.csdn.net/20180426182201543?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p>顺便再写点数据在里面</p><p>       <img src="https://img-blog.csdn.net/20180426182219509?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p>esc+shift+ZZ，保存并退出</p><p>然后将该文件移动到我们监听的那个目录里面去</p><p></p><div></div><p>    <img src="https://img-blog.csdn.net/20180426182524414?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p>随后便发现我们写入的数据</p><p>   <img src="https://img-blog.csdn.net/20180426182624986?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dzY3NkX1Q=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p align="left"><br></p><p align="left"></p><div></div><p align="left"><br></p>            </div>
                </div>