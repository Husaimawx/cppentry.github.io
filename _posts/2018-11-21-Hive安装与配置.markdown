---
layout:     post
title:      Hive安装与配置
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p><span class="wp_keywordlink_affiliate"><a href="https://www.iteblog.com/archives/tag/hive/" rel="nofollow" title="">Hive</a></span>的下载地址：http://archive.apache.org/dist/hive/，你可以选择你适合的版本去下载。本博客下载的<span class="wp_keywordlink_affiliate"><a href="https://www.iteblog.com/archives/tag/hive/" rel="nofollow" title="">Hive</a></span>版本为0.8.0。你可以运行下面的命令去下载Hive，并解压：</p> <div><div class="syntaxhighlighter nogutter java"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">Downloads]$ wget \</code></div><div class="line number2 index1 alt1"><code class="java spaces">    </code><code class="java plain">http:</code><code class="java comments">//archive.apache.org/dist/hive/hive-0.10.0/hive-0.10.0.tar.gz</code></div><div class="line number3 index2 alt2"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">Downloads]$ tar -zxvf hive-</code><code class="java value">0.10</code><code class="java plain">.</code><code class="java value">0</code><code class="java plain">.tar.gz</code></div></div></td></tr></tbody></table></div></div> <p>用wget下载的文件存放在你当前的路径，当前路径可以用pwd命令得到。解压完Hive之后，可以看到其目录的结构为：</p> <div><div class="syntaxhighlighter nogutter java"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">Downloads]$ cd hive-</code><code class="java value">0.10</code><code class="java plain">.</code><code class="java value">0</code><code class="java plain">/</code></div><div class="line number2 index1 alt1"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">hive-</code><code class="java value">0.8</code><code class="java plain">.</code><code class="java value">0</code><code class="java plain">]$ ls -l</code></div><div class="line number3 index2 alt2"><code class="java plain">total </code><code class="java value">132</code></div><div class="line number4 index3 alt1"><code class="java plain">drwxr-xr-x.  </code><code class="java value">3</code> <code class="java plain">wyp wyp  </code><code class="java value">4096</code> <code class="java plain">Dec </code><code class="java value">13</code>  <code class="java value">2011</code> <code class="java plain">bin</code></div><div class="line number5 index4 alt2"><code class="java plain">drwxr-xr-x.  </code><code class="java value">2</code> <code class="java plain">wyp wyp  </code><code class="java value">4096</code> <code class="java plain">Oct </code><code class="java value">31</code> <code class="java value">11</code><code class="java plain">:</code><code class="java value">21</code> <code class="java plain">conf</code></div><div class="line number6 index5 alt1"><code class="java plain">drwxr-xr-x.  </code><code class="java value">6</code> <code class="java plain">wyp wyp  </code><code class="java value">4096</code> <code class="java plain">Oct </code><code class="java value">31</code> <code class="java value">11</code><code class="java plain">:</code><code class="java value">16</code> <code class="java plain">docs</code></div><div class="line number7 index6 alt2"><code class="java plain">drwxr-xr-x.  </code><code class="java value">5</code> <code class="java plain">wyp wyp  </code><code class="java value">4096</code> <code class="java plain">Dec </code><code class="java value">13</code>  <code class="java value">2011</code> <code class="java plain">examples</code></div><div class="line number8 index7 alt1"><code class="java plain">drwxr-xr-x.  </code><code class="java value">4</code> <code class="java plain">wyp wyp  </code><code class="java value">4096</code> <code class="java plain">Oct </code><code class="java value">31</code> <code class="java value">11</code><code class="java plain">:</code><code class="java value">16</code> <code class="java plain">lib</code></div><div class="line number9 index8 alt2"><code class="java plain">-rw-rw-r--.  </code><code class="java value">1</code> <code class="java plain">wyp wyp </code><code class="java value">23208</code> <code class="java plain">Dec </code><code class="java value">13</code>  <code class="java value">2011</code> <code class="java plain">LICENSE</code></div><div class="line number10 index9 alt1"><code class="java plain">-rw-rw-r--.  </code><code class="java value">1</code> <code class="java plain">wyp wyp   </code><code class="java value">897</code> <code class="java plain">Dec </code><code class="java value">13</code>  <code class="java value">2011</code> <code class="java plain">NOTICE</code></div><div class="line number11 index10 alt2"><code class="java plain">-rw-rw-r--.  </code><code class="java value">1</code> <code class="java plain">wyp wyp  </code><code class="java value">4439</code> <code class="java plain">Dec </code><code class="java value">13</code>  <code class="java value">2011</code> <code class="java plain">README.txt</code></div><div class="line number12 index11 alt1"><code class="java plain">-rw-rw-r--.  </code><code class="java value">1</code> <code class="java plain">wyp wyp </code><code class="java value">66301</code> <code class="java plain">Dec </code><code class="java value">13</code>  <code class="java value">2011</code> <code class="java plain">RELEASE_NOTES.txt</code></div><div class="line number13 index12 alt2"><code class="java plain">drwxr-xr-x.  </code><code class="java value">4</code> <code class="java plain">wyp wyp  </code><code class="java value">4096</code> <code class="java plain">Dec </code><code class="java value">13</code>  <code class="java value">2011</code> <code class="java plain">scripts</code></div><div class="line number14 index13 alt1"><code class="java plain">drwxrwxr-x. </code><code class="java value">27</code> <code class="java plain">wyp wyp  </code><code class="java value">4096</code> <code class="java plain">Oct </code><code class="java value">31</code> <code class="java value">11</code><code class="java plain">:</code><code class="java value">16</code> <code class="java plain">src</code></div><div class="line number15 index14 alt2"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">hive-</code><code class="java value">0.8</code><code class="java plain">.</code><code class="java value">0</code><code class="java plain">]$ </code></div></div></td></tr></tbody></table></div></div> <p>　　现在我们需要配置Hive，这样才能够运行Hive。进入conf文件夹，并将hive-default.xml.template文件的内容复制到hive-site.xml文件中，操作如下：</p> <div><div class="syntaxhighlighter nogutter java"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">hive-</code><code class="java value">0.10</code><code class="java plain">.</code><code class="java value">0</code><code class="java plain">]$ cd conf/</code></div><div class="line number2 index1 alt1"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">conf]$ cp hive-</code><code class="java keyword">default</code><code class="java plain">.xml.template hive-site.xml</code></div></div></td></tr></tbody></table></div></div> <p>在hive-site.xml文件中替换掉以下配置为你电脑实际的配置，在我电脑配置如下：</p> <div><div class="syntaxhighlighter nogutter java"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">&lt;property&gt;</code></div><div class="line number2 index1 alt1"><code class="java spaces">  </code><code class="java plain">&lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;</code></div><div class="line number3 index2 alt2"><code class="java spaces">  </code><code class="java plain">&lt;value&gt;/home/wyp/cloud/hive/warehouse&lt;/value&gt;</code></div><div class="line number4 index3 alt1"><code class="java spaces">  </code><code class="java plain">&lt;description&gt;location of </code><code class="java keyword">default</code> <code class="java plain">database </code><code class="java keyword">for</code> <code class="java plain">the warehouse&lt;/description&gt;</code></div><div class="line number5 index4 alt2"><code class="java plain">&lt;/property&gt;</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="java plain">&lt;property&gt;</code></div><div class="line number8 index7 alt1"><code class="java spaces">  </code><code class="java plain">&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</code></div><div class="line number9 index8 alt2"><code class="java spaces">  </code><code class="java plain">&lt;value&gt;jdbc:mysql:</code><code class="java comments">//localhost:3306/hive_hdp?characterEncoding=UTF-8</code></div><div class="line number10 index9 alt1"><code class="java spaces">                    </code><code class="java plain">&amp;createDatabaseIfNotExist=</code><code class="java keyword">true</code><code class="java plain">&lt;/value&gt;</code></div><div class="line number11 index10 alt2"><code class="java spaces">  </code><code class="java plain">&lt;description&gt;JDBC connect string </code><code class="java keyword">for</code> <code class="java plain">a JDBC metastore&lt;/description&gt;</code></div><div class="line number12 index11 alt1"><code class="java plain">&lt;/property&gt;</code></div><div class="line number13 index12 alt2"> </div><div class="line number14 index13 alt1"><code class="java plain">&lt;property&gt;</code></div><div class="line number15 index14 alt2"><code class="java spaces">  </code><code class="java plain">&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;</code></div><div class="line number16 index15 alt1"><code class="java spaces">  </code><code class="java plain">&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;</code></div><div class="line number17 index16 alt2"><code class="java spaces">  </code><code class="java plain">&lt;description&gt;Driver </code><code class="java keyword">class</code> <code class="java plain">name </code><code class="java keyword">for</code> <code class="java plain">a JDBC metastore&lt;/description&gt;</code></div><div class="line number18 index17 alt1"><code class="java plain">&lt;/property&gt;</code></div><div class="line number19 index18 alt2"> </div><div class="line number20 index19 alt1"><code class="java plain">&lt;property&gt;</code></div><div class="line number21 index20 alt2"><code class="java spaces">  </code><code class="java plain">&lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</code></div><div class="line number22 index21 alt1"><code class="java spaces">  </code><code class="java plain">&lt;value&gt;root&lt;/value&gt;</code></div><div class="line number23 index22 alt2"><code class="java spaces">  </code><code class="java plain">&lt;description&gt;username to use against metastore database&lt;/description&gt;</code></div><div class="line number24 index23 alt1"><code class="java plain">&lt;/property&gt;</code></div><div class="line number25 index24 alt2"> </div><div class="line number26 index25 alt1"><code class="java plain">&lt;property&gt;</code></div><div class="line number27 index26 alt2"><code class="java spaces">  </code><code class="java plain">&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</code></div><div class="line number28 index27 alt1"><code class="java spaces">  </code><code class="java plain">&lt;value&gt;</code><code class="java value">123456</code><code class="java plain">&lt;/value&gt;</code></div><div class="line number29 index28 alt2"><code class="java spaces">  </code><code class="java plain">&lt;description&gt;password to use against metastore database&lt;/description&gt;</code></div><div class="line number30 index29 alt1"><code class="java plain">&lt;/property&gt;</code></div></div></td></tr></tbody></table></div></div> <p>　　Hive将元数据存储在RDBMS中，比如MySQL、Derby中。Hive默认是用Derby数据库，这里我修改为MySQL（所以你要确保你电脑上面已经安装好了MySQL数据库），所以配置如上。我们需要mysql驱动jar包mysql-connector-java-5.1.22-bin.jar 拷贝到 $HIVE_HOME/lib/ 目录下。然后编辑/etc/profile文件，将Hive的home目录添加进去，操作如下：</p> <div><div class="syntaxhighlighter nogutter java"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">conf]$ sudo vim /etc/profile</code></div><div class="line number2 index1 alt1"> </div><div class="line number3 index2 alt2"> </div><div class="line number4 index3 alt1"><code class="java plain">在里面添加以下语句，当然你得修改Hive的home路径为你自己的</code></div><div class="line number5 index4 alt2"><code class="java plain">export HIVE_HOME=/home/wyp/Downloads/hive-</code><code class="java value">0.10</code><code class="java plain">.</code><code class="java value">0</code></div><div class="line number6 index5 alt1"><code class="java plain">export PATH=$PATH:$HIVE_HOME/bin</code></div></div></td></tr></tbody></table></div></div> <p>最后让上面的修改生效，请运行下面的命令：</p> <div><div class="syntaxhighlighter nogutter java"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">conf]$ source /etc/profile</code></div></div></td></tr></tbody></table></div></div> <p>现在可以试一下，hive是否安装好（需要启动<span class="wp_keywordlink_affiliate"><a href="https://www.iteblog.com/archives/tag/hadoop/" rel="nofollow" title="">Hadoop</a></span>，否则不能运行成功！）：</p> <div><div class="syntaxhighlighter nogutter java"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">[wyp</code><code class="java color1">@wyp</code> <code class="java plain">conf]$ hive</code></div><div class="line number2 index1 alt1"><code class="java plain">hive&gt;</code></div></div></td></tr></tbody></table></div></div> <p>如果出现了上述情况，说明你的hive安装成功了！</p>            </div>
                </div>