---
layout:     post
title:      hive操作
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <h2 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><br></h2><h3 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a></a>显示地展示当前使用的数据库</h3><blockquote style="padding:16px;border-left:8px solid rgb(221,223,228);background:rgb(238,240,244);color:rgb(51,51,51);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;font-size:14px;"><p style="margin-bottom:0px;font-size:14px;color:rgb(153,153,153);line-height:22px;">hive&gt; set hive.cli.print.current.db=true; <br>hive(default)&gt;</p></blockquote><h3 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a></a><span>Hive显示列头</span></h3><blockquote style="padding:16px;border-left:8px solid rgb(221,223,228);background:rgb(238,240,244);color:rgb(51,51,51);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;font-size:14px;"><p style="margin-bottom:0px;font-size:14px;color:rgb(153,153,153);line-height:22px;">hive (default)&gt; set hive.cli.print.header=true; <br>hive (default)&gt; desc addressall_2015_07_09; <br>OK <br>col_name data_type comment <br>_c0 string <br>addr1 bigint <br>addr2 bigint <br>addr3 bigint <br>Time taken: 0.182 seconds, Fetched: 4 row(s) <br>hive (default)&gt; select * from addressall_2015_07_09; <br>OK <br>addressall_2015_07_09._c0 addressall_2015_07_09.addr1 addressall_2015_07_09.addr2 addressall_2015_07_09.addr3 <br>2015_07_09 536 488 493 <br>Time taken: 10.641 seconds, Fetched: 1 row(s)</p></blockquote><h3 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a></a><span>删除数据库</span></h3><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">删除数据库的时候，不允许删除有数据的数据库，如果数据库里面有数据则会报错。如果要忽略这些内容，则在后面增加CASCADE关键字，则忽略报错，删除数据库。</p><blockquote style="padding:16px;border-left:8px solid rgb(221,223,228);background:rgb(238,240,244);color:rgb(51,51,51);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;font-size:14px;"><p style="margin-bottom:0px;font-size:14px;color:rgb(153,153,153);line-height:22px;">hive&gt; DROP DATABASE DbName CASCADE(可选); <br>hive&gt; DROP DATABASE IF EXISTS DbName CASCADE;</p></blockquote><h2 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a><br></a></h2><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">也可以使用正则表达式 <code style="font-size:14px;line-height:22px;padding:4px 2px 0px;">hive&gt; SHOW TABLES LIKE 'h*';</code></p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs vbnet has-numbering">hive (<span class="hljs-keyword">default</span>)&gt; SHOW TABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-comment">'*all*' ;</span>
OK
tab_name
addressall_2015_07_09
Time taken: <span class="hljs-number">0.039</span> seconds, Fetched: <span class="hljs-number">1</span> row(s)</code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li></ul><h3 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a></a><span>获得表的建表语句</span></h3><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs oxygene has-numbering">hive (<span class="hljs-keyword">default</span>)&gt; show <span class="hljs-keyword">create</span> table address1_2015_07_09;
OK
createtab_stmt
<span class="hljs-keyword">CREATE</span>  TABLE `address1_2015_07_09`(
  `addr1` bigint)
ROW FORMAT SERDE
  <span class="hljs-string">'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe'</span>
STORED <span class="hljs-keyword">AS</span> INPUTFORMAT
  <span class="hljs-string">'org.apache.hadoop.mapred.TextInputFormat'</span>
OUTPUTFORMAT
  <span class="hljs-string">'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'</span>
LOCATION
  <span class="hljs-string">'hdfs://nameservice1/user/hive/warehouse/address1_2015_07_09'</span>
TBLPROPERTIES (
  <span class="hljs-string">'COLUMN_STATS_ACCURATE'</span>=<span class="hljs-string">'true'</span>,
  <span class="hljs-string">'numFiles'</span>=<span class="hljs-string">'1'</span>,
  <span class="hljs-string">'numRows'</span>=<span class="hljs-string">'0'</span>,
  <span class="hljs-string">'rawDataSize'</span>=<span class="hljs-string">'0'</span>,
  <span class="hljs-string">'totalSize'</span>=<span class="hljs-string">'4'</span>,
  <span class="hljs-string">'transient_lastDdlTime'</span>=<span class="hljs-string">'1436408451'</span>)
Time taken: <span class="hljs-number">0.11</span> seconds, Fetched: <span class="hljs-number">17</span> row(s)
</code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li><li style="color:rgb(153,153,153);">6</li><li style="color:rgb(153,153,153);">7</li><li style="color:rgb(153,153,153);">8</li><li style="color:rgb(153,153,153);">9</li><li style="color:rgb(153,153,153);">10</li><li style="color:rgb(153,153,153);">11</li><li style="color:rgb(153,153,153);">12</li><li style="color:rgb(153,153,153);">13</li><li style="color:rgb(153,153,153);">14</li><li style="color:rgb(153,153,153);">15</li><li style="color:rgb(153,153,153);">16</li><li style="color:rgb(153,153,153);">17</li><li style="color:rgb(153,153,153);">18</li><li style="color:rgb(153,153,153);">19</li><li style="color:rgb(153,153,153);">20</li><li style="color:rgb(153,153,153);">21</li><li style="color:rgb(153,153,153);">22</li></ul><h3 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a></a><span>创建表</span></h3><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs r has-numbering">CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS] [db_name.]table_name    -- (Note: TEMPORARY available <span class="hljs-keyword">in</span> Hive <span class="hljs-number">0.14</span><span class="hljs-number">.0</span> and later)
  [(col_name data_type [COMMENT col_comment], <span class="hljs-keyword">...</span>)]
  [COMMENT table_comment]
  [PARTITIONED BY (col_name data_type [COMMENT col_comment], <span class="hljs-keyword">...</span>)]
  [CLUSTERED BY (col_name, col_name, <span class="hljs-keyword">...</span>) [SORTED BY (col_name [ASC|DESC], <span class="hljs-keyword">...</span>)] INTO num_buckets BUCKETS]
  [SKEWED BY (col_name, col_name, <span class="hljs-keyword">...</span>)                  -- (Note: Available <span class="hljs-keyword">in</span> Hive <span class="hljs-number">0.10</span><span class="hljs-number">.0</span> and later)]
     ON ((col_value, col_value, <span class="hljs-keyword">...</span>), (col_value, col_value, <span class="hljs-keyword">...</span>), <span class="hljs-keyword">...</span>)
     [STORED AS DIRECTORIES]
  [
   [ROW FORMAT row_format] 
   [STORED AS file_format]
     | STORED BY <span class="hljs-string">'storage.handler.class.name'</span> [WITH SERDEPROPERTIES (<span class="hljs-keyword">...</span>)]  -- (Note: Available <span class="hljs-keyword">in</span> Hive <span class="hljs-number">0.6</span><span class="hljs-number">.0</span> and later)
  ]
  [LOCATION hdfs_path]
  [TBLPROPERTIES (property_name=property_value, <span class="hljs-keyword">...</span>)]   -- (Note: Available <span class="hljs-keyword">in</span> Hive <span class="hljs-number">0.6</span><span class="hljs-number">.0</span> and later)
  [AS select_statement];   -- (Note: Available <span class="hljs-keyword">in</span> Hive <span class="hljs-number">0.5</span><span class="hljs-number">.0</span> and later; not supported <span class="hljs-keyword">for</span> external tables)</code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li><li style="color:rgb(153,153,153);">6</li><li style="color:rgb(153,153,153);">7</li><li style="color:rgb(153,153,153);">8</li><li style="color:rgb(153,153,153);">9</li><li style="color:rgb(153,153,153);">10</li><li style="color:rgb(153,153,153);">11</li><li style="color:rgb(153,153,153);">12</li><li style="color:rgb(153,153,153);">13</li><li style="color:rgb(153,153,153);">14</li><li style="color:rgb(153,153,153);">15</li><li style="color:rgb(153,153,153);">16</li></ul><blockquote style="padding:16px;border-left:8px solid rgb(221,223,228);background:rgb(238,240,244);color:rgb(51,51,51);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;font-size:14px;"><p style="margin-bottom:0px;font-size:14px;color:rgb(153,153,153);line-height:22px;">hive (default)&gt; create table test(id int); <br>OK <br>Time taken: 10.143 seconds</p></blockquote><h3 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a></a><span>获得表的建表语句</span></h3><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs oxygene has-numbering">hive (<span class="hljs-keyword">default</span>)&gt; show <span class="hljs-keyword">create</span> table test;
OK
createtab_stmt
<span class="hljs-keyword">CREATE</span>  TABLE `test`(
  `id` int)
ROW FORMAT SERDE
  <span class="hljs-string">'org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe'</span>
STORED <span class="hljs-keyword">AS</span> INPUTFORMAT
  <span class="hljs-string">'org.apache.hadoop.mapred.TextInputFormat'</span>
OUTPUTFORMAT
  <span class="hljs-string">'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'</span>
LOCATION
  <span class="hljs-string">'hdfs://nameservice1/user/hive/warehouse/test'</span>
TBLPROPERTIES (
  <span class="hljs-string">'transient_lastDdlTime'</span>=<span class="hljs-string">'1436799093'</span>)
Time taken: <span class="hljs-number">0.135</span> seconds, Fetched: <span class="hljs-number">12</span> row(s)</code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li><li style="color:rgb(153,153,153);">6</li><li style="color:rgb(153,153,153);">7</li><li style="color:rgb(153,153,153);">8</li><li style="color:rgb(153,153,153);">9</li><li style="color:rgb(153,153,153);">10</li><li style="color:rgb(153,153,153);">11</li><li style="color:rgb(153,153,153);">12</li><li style="color:rgb(153,153,153);">13</li><li style="color:rgb(153,153,153);">14</li><li style="color:rgb(153,153,153);">15</li><li style="color:rgb(153,153,153);">16</li></ul><h4 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><span>创建内部表</span></h4><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><img src="https://img-blog.csdn.net/20150714133049887" alt="" title="" style="margin-top:24px;margin-bottom:24px;"></p><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">其他获得表的信息 <br><img src="https://img-blog.csdn.net/20150714133517261" alt="" title="" style="margin-top:24px;margin-bottom:24px;"></p><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><img src="https://img-blog.csdn.net/20150714133642001" alt="" title="" style="margin-top:24px;margin-bottom:24px;"></p><h4 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><span>创建外部表</span></h4><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs vhdl has-numbering">hive (<span class="hljs-keyword">default</span>)&gt; create external table testexttable(
              &gt; name <span class="hljs-typename">string</span> comment <span class="hljs-attribute">'name</span> value',
              &gt; addr <span class="hljs-typename">string</span> comment <span class="hljs-attribute">'addr</span> value'
              &gt; );
OK
<span class="hljs-typename">Time</span> taken: <span class="hljs-number">10.172</span> seconds</code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li><li style="color:rgb(153,153,153);">6</li></ul><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><img src="https://img-blog.csdn.net/20150714134509068" alt="" title="" style="margin-top:24px;margin-bottom:24px;"></p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs sql has-numbering"><span class="hljs-operator"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> testtable(
name string comment <span class="hljs-string">'name value'</span>,
addr string comment <span class="hljs-string">'addr value'</span>
)
<span class="hljs-keyword">row</span> format delimited fields terminated <span class="hljs-keyword">by</span> <span class="hljs-string">'\t'</span> lines terminated <span class="hljs-keyword">by</span> <span class="hljs-string">'\n'</span> stored <span class="hljs-keyword">as</span> textfile
;</span></code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li><li style="color:rgb(153,153,153);">6</li></ul><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><img src="https://img-blog.csdn.net/20150714154919443" alt="" title="" style="margin-top:24px;margin-bottom:24px;"></p><h4 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><span>加载数据</span></h4><blockquote style="padding:16px;border-left:8px solid rgb(221,223,228);background:rgb(238,240,244);color:rgb(51,51,51);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;font-size:14px;"><p style="margin-bottom:0px;font-size:14px;color:rgb(153,153,153);line-height:22px;">hive (default)&gt; load data local inpath ‘/liguodong/hivedata/datatest’ overwrite into table testtable;</p></blockquote><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><img src="https://img-blog.csdn.net/20150714155934735" alt="" title="" style="margin-top:24px;margin-bottom:24px;"></p><blockquote style="padding:16px;border-left:8px solid rgb(221,223,228);background:rgb(238,240,244);color:rgb(51,51,51);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;font-size:14px;"><p style="margin-bottom:0px;font-size:14px;color:rgb(153,153,153);line-height:22px;">hive (default)&gt; load data local inpath ‘/liguodong/hivedata/datatest’ into table testtable; <br>如果没有使用overwrite，则会再拷贝一份数据，不会覆盖原来的数据。</p></blockquote><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><img src="https://img-blog.csdn.net/20150714161607125" alt="" title="" style="margin-top:24px;margin-bottom:24px;"></p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs lasso has-numbering">hive (default)<span class="hljs-subst">&gt;</span> create external table <span class="hljs-keyword">if</span> <span class="hljs-literal">not</span> exists employees(
              <span class="hljs-subst">&gt;</span> name <span class="hljs-built_in">string</span>,
              <span class="hljs-subst">&gt;</span> salary <span class="hljs-built_in">string</span>,
              <span class="hljs-subst">&gt;</span> subordinates <span class="hljs-built_in">array</span><span class="hljs-subst">&lt;</span><span class="hljs-built_in">string</span><span class="hljs-subst">&gt;</span>,
              <span class="hljs-subst">&gt;</span> deductions <span class="hljs-built_in">map</span><span class="hljs-subst">&lt;</span><span class="hljs-built_in">string</span>,float<span class="hljs-subst">&gt;</span>,
              <span class="hljs-subst">&gt;</span> address struct<span class="hljs-subst">&lt;</span>street:<span class="hljs-built_in">string</span>,city:<span class="hljs-built_in">string</span>,state:<span class="hljs-built_in">string</span>,zip:int<span class="hljs-subst">&gt;</span>
              <span class="hljs-subst">&gt;</span> )
              <span class="hljs-subst">&gt;</span> row format delimited fields terminated <span class="hljs-keyword">by</span> <span class="hljs-string">'\t'</span>
              <span class="hljs-subst">&gt;</span> collection items terminated <span class="hljs-keyword">by</span> <span class="hljs-string">','</span>
              <span class="hljs-subst">&gt;</span> <span class="hljs-built_in">map</span> keys terminated <span class="hljs-keyword">by</span> <span class="hljs-string">':'</span>
              <span class="hljs-subst">&gt;</span> lines terminated <span class="hljs-keyword">by</span> <span class="hljs-string">'\n'</span>
              <span class="hljs-subst">&gt;</span> stored as textfile
              <span class="hljs-subst">&gt;</span> location <span class="hljs-string">'/liguodong/data/'</span>
              <span class="hljs-subst">&gt;</span> ;</code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li><li style="color:rgb(153,153,153);">6</li><li style="color:rgb(153,153,153);">7</li><li style="color:rgb(153,153,153);">8</li><li style="color:rgb(153,153,153);">9</li><li style="color:rgb(153,153,153);">10</li><li style="color:rgb(153,153,153);">11</li><li style="color:rgb(153,153,153);">12</li><li style="color:rgb(153,153,153);">13</li><li style="color:rgb(153,153,153);">14</li></ul><h3 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a></a><span>查找表数据</span></h3><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs vbscript has-numbering">hive&gt; <span class="hljs-keyword">select</span> * from employees;
OK
tony    <span class="hljs-number">1338</span>    [<span class="hljs-string">"a1"</span>,<span class="hljs-string">"a2"</span>,<span class="hljs-string">"a3"</span>]        {<span class="hljs-string">"k1"</span>:<span class="hljs-number">1.0</span>,<span class="hljs-string">"k2"</span>:<span class="hljs-number">2.0</span>,<span class="hljs-string">"k3"</span>:<span class="hljs-number">3.0</span>}    {<span class="hljs-string">"street"</span>:<span class="hljs-string">"s1"</span>,<span class="hljs-string">"city"</span>:<span class="hljs-string">"s2"</span>,<span class="hljs-string">"state"</span>:<span class="hljs-string">"s3"</span>,<span class="hljs-string">"zip"</span>:<span class="hljs-number">4</span>}
mark    <span class="hljs-number">5453</span>    [<span class="hljs-string">"a4"</span>,<span class="hljs-string">"a5"</span>,<span class="hljs-string">"a6"</span>]        {<span class="hljs-string">"k4"</span>:<span class="hljs-number">4.0</span>,<span class="hljs-string">"k5"</span>:<span class="hljs-number">5.0</span>,<span class="hljs-string">"k6"</span>:<span class="hljs-number">6.0</span>}    {<span class="hljs-string">"street"</span>:<span class="hljs-string">"s4"</span>,<span class="hljs-string">"city"</span>:<span class="hljs-string">"s5"</span>,<span class="hljs-string">"state"</span>:<span class="hljs-string">"s6"</span>,<span class="hljs-string">"zip"</span>:<span class="hljs-number">6</span>}
ivy     <span class="hljs-number">323</span>     [<span class="hljs-string">"a7"</span>,<span class="hljs-string">"a8"</span>,<span class="hljs-string">"a9"</span>]        {<span class="hljs-string">"k7"</span>:<span class="hljs-number">7.0</span>,<span class="hljs-string">"k8"</span>:<span class="hljs-number">8.0</span>,<span class="hljs-string">"k9"</span>:<span class="hljs-number">9.0</span>}    {<span class="hljs-string">"street"</span>:<span class="hljs-string">"s7"</span>,<span class="hljs-string">"city"</span>:<span class="hljs-string">"s8"</span>,<span class="hljs-string">"state"</span>:<span class="hljs-string">"s9"</span>,<span class="hljs-string">"zip"</span>:<span class="hljs-number">9</span>}
<span class="hljs-built_in">Time</span> taken: <span class="hljs-number">10.204</span> seconds, Fetched: <span class="hljs-number">3</span> row(s)

查树组
hive&gt; <span class="hljs-keyword">select</span> subordinates[<span class="hljs-number">1</span>]  from employees;
Total MapReduce CPU <span class="hljs-built_in">Time</span> Spent: <span class="hljs-number">2</span> seconds <span class="hljs-number">740</span> msec
OK
a2
a5
a8
查map
hive&gt; <span class="hljs-keyword">select</span> deductions[<span class="hljs-string">"k2"</span>]  from employees;

OK
<span class="hljs-number">2.0</span>
<span class="hljs-literal">NULL</span>
<span class="hljs-literal">NULL</span>
<span class="hljs-built_in">Time</span> taken: <span class="hljs-number">75.812</span> seconds, Fetched: <span class="hljs-number">3</span> row(s)

查结构体
hive&gt; <span class="hljs-keyword">select</span> address.city  from employees;
Total MapReduce CPU <span class="hljs-built_in">Time</span> Spent: <span class="hljs-number">2</span> seconds <span class="hljs-number">200</span> msec
OK
s2
s5
s8
<span class="hljs-built_in">Time</span> taken: <span class="hljs-number">75.311</span> seconds, Fetched: <span class="hljs-number">3</span> row(s)</code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li><li style="color:rgb(153,153,153);">6</li><li style="color:rgb(153,153,153);">7</li><li style="color:rgb(153,153,153);">8</li><li style="color:rgb(153,153,153);">9</li><li style="color:rgb(153,153,153);">10</li><li style="color:rgb(153,153,153);">11</li><li style="color:rgb(153,153,153);">12</li><li style="color:rgb(153,153,153);">13</li><li style="color:rgb(153,153,153);">14</li><li style="color:rgb(153,153,153);">15</li><li style="color:rgb(153,153,153);">16</li><li style="color:rgb(153,153,153);">17</li><li style="color:rgb(153,153,153);">18</li><li style="color:rgb(153,153,153);">19</li><li style="color:rgb(153,153,153);">20</li><li style="color:rgb(153,153,153);">21</li><li style="color:rgb(153,153,153);">22</li><li style="color:rgb(153,153,153);">23</li><li style="color:rgb(153,153,153);">24</li><li style="color:rgb(153,153,153);">25</li><li style="color:rgb(153,153,153);">26</li><li style="color:rgb(153,153,153);">27</li><li style="color:rgb(153,153,153);">28</li><li style="color:rgb(153,153,153);">29</li><li style="color:rgb(153,153,153);">30</li><li style="color:rgb(153,153,153);">31</li></ul><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">注意：<code style="font-size:14px;line-height:22px;padding:4px 2px 0px;">select *</code> 不执行mapreduce，只进行一个本地的查询。 <br>而<code style="font-size:14px;line-height:22px;padding:4px 2px 0px;">select 某个字段</code> 生成一个job，执行mapreduce。</p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs sql has-numbering"><span class="hljs-operator"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> employees;</span>
<span class="hljs-operator"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> employees limit <span class="hljs-number">10</span>;</span></code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li></ul><h3 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a></a><span>删除表</span></h3><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">内部表删除，会连同hdfs存储的数据一同删除，而外部表删除，只会删除外部表的元数据信息。</p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs haskell has-numbering"><span class="hljs-title">hive</span> (<span class="hljs-default"><span class="hljs-keyword">default</span>)&gt; drop table testtable;</span>
<span class="hljs-type">OK</span>
<span class="hljs-type">Time</span> taken: <span class="hljs-number">10.283</span> seconds
<span class="hljs-title">hive</span> (<span class="hljs-default"><span class="hljs-keyword">default</span>)&gt; drop table testexttable;</span>
<span class="hljs-type">OK</span>
<span class="hljs-type">Time</span> taken: <span class="hljs-number">0.258</span> seconds</code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li><li style="color:rgb(153,153,153);">6</li></ul><h3 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><a></a><span>Hive建表的其他方式</span></h3><h4 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><span>有一个表，创建另一个表</span></h4><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">（只是复制了表结构，并不会复制内容。） <br><code style="font-size:14px;line-height:22px;padding:4px 2px 0px;">create table test3 like test2;</code> <br>不需要执行mapreduce</p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs cs has-numbering">hive&gt; desc testtable;
OK
name                    <span class="hljs-keyword">string</span>                  name <span class="hljs-keyword">value</span>
addr                    <span class="hljs-keyword">string</span>                  addr <span class="hljs-keyword">value</span>
Time taken: <span class="hljs-number">0.267</span> seconds, Fetched: <span class="hljs-number">2</span> row(s)
hive&gt; create table testtableNew like testtable;
OK
Time taken: <span class="hljs-number">10.323</span> seconds
hive&gt; desc testtableNew;
OK
name                    <span class="hljs-keyword">string</span>                  name <span class="hljs-keyword">value</span>
addr                    <span class="hljs-keyword">string</span>                  addr <span class="hljs-keyword">value</span>
Time taken: <span class="hljs-number">0.135</span> seconds, Fetched: <span class="hljs-number">2</span> row(s)
</code></pre><ul class="pre-numbering"><li style="color:rgb(153,153,153);">1</li><li style="color:rgb(153,153,153);">2</li><li style="color:rgb(153,153,153);">3</li><li style="color:rgb(153,153,153);">4</li><li style="color:rgb(153,153,153);">5</li><li style="color:rgb(153,153,153);">6</li><li style="color:rgb(153,153,153);">7</li><li style="color:rgb(153,153,153);">8</li><li style="color:rgb(153,153,153);">9</li><li style="color:rgb(153,153,153);">10</li><li style="color:rgb(153,153,153);">11</li><li style="color:rgb(153,153,153);">12</li><li style="color:rgb(153,153,153);">13</li><li style="color:rgb(153,153,153);">14</li></ul><h4 style="padding:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);"><span>从其他表查询，再创建表</span></h4><p style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">（复制表结构的同时，把内容也复制过来了） <br><code style="font-size:14px;line-height:22px;padding:4px 2px 0px;">create table test2 as select name,addr from test1;</code> <br>需要执行mapreduce</p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs cs has-numbering">hive&gt; create table testNewtable <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> name,addr <span class="hljs-keyword">from</span> testtable;
hive&gt; desc testNewtable;
OK
name                    <span class="hljs-keyword">string</span>
addr                    <span class="hljs-keyword">string</span>
Time taken: <span class="hljs-number">0.122</span> seconds, Fetched: <span class="hljs-number">2</span> row(s)
hive&gt; <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> testNewtable;
OK
liguodong       cd
aobama  lsj
Time taken: <span class="hljs-number">10.226</span> seconds, Fetched: <span class="hljs-number">4</span> row(s)</code></pre>            </div>
                </div>