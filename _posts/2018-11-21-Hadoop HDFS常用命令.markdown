---
layout:     post
title:      Hadoop HDFS常用命令
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<span style="font-size:18px;"><span></span>HDFS的特点： 一次写入，多次读取<br><span></span><br><span></span>HDFS下的文件操作：<br><span></span>1.列出HDFS文件<br><span></span>hadoop dfs -ls<br><span></span>//未带参数的-ls命令没有任何返回值，默认返回HDFS的“home”目录下的内容<br><span></span>//HDFS中，没有当前工作目录这样的概念，也没有cd这个命令<br><span></span><br><span></span>2.列出HDFS目录下某个文档中的文件<br><span></span>hadoop dfs -ls in<br><span></span><br><span></span>3.上传文件到HDFS（下面的命令中省略 hadoop dfs）<br><span></span>-put file_name new_File_nme<br><span></span>//将hadoop主目录下的file_name文件上传到HDFS并重命名为new_File_name<br><span></span>//上传文件时，文件首先复制到datenode上，只有所有的datenode都成功接收完数据，文件上传才是成功的<br><span></span><br><span></span>4.将HDFS中的文件复制到本地系统中<br><span></span>-get file newFileName<br><span></span>//将HDFS中的file文件复制到本地系统并命名为newFileName<br><span></span>//-put 和 -get 既可以操作文件，也可以操作目录<br><span></span><br><span></span>5.删除HDFS下的文档<br><span></span>-rmr out<br><span></span>//删除HDFS下的out文档<br><span></span><br><span></span>6.查看HDFS下某个文件<br><span></span>-cat fileName<br><span></span><br><span></span>7.可以通过-help commandName命令列出的清单来进行进一步的学习与探索<br><span></span><br><span></span>管理与更新<br><span></span>1.报告HDFS的基本信息<br><span></span>hadoop dfsadmin -report<br><span></span><br><span></span>2.退出安全模式<br><span></span>“Name node is in safe mode”<br><span></span>可以通过以下命令退出安全模式<br><span></span>hadoop dfsadmin -safemode leave<br><span></span><br><span></span>3.进入安全模式<br><span></span>hadoop dfsadmin -safemode eneter<br><span></span><br><span></span>4.添加新的DateNode节点<br><span></span>安装hadoop,可以NameNode的hadoop直接scp到新节点上<br><span></span>slaves文件中添加新节点<br><span></span>SSH无密码连接<br><span></span><br><span></span>5.负载均衡<br><span></span>start-balancer.sh<br><span></span><br>
2.3 HDFS API<br><span></span>1.上传本地文件到HDFS<br><span></span>FileSystem.copyFromLocalFile(Path src,Path dest)<br><span></span><br><span></span>Configuration conf = new Configuration();<br><span></span>FileSystem hdfs = FileSystem.get(conf);<br><span></span>hdfs.copyFromLocalFile(src,dest);<br><span></span><br><span></span>2.创建HDFS文件<br><span></span>FileSystem.create(Path f)<br><span></span><br><span></span>3.重命名HDFS文件<br><span></span>FileSystem.rename(Path src,Path dest)<br><span></span><br><span></span>4.删除HDFS上的文件<br><span></span>FileSystem.delete(Path f,Boolean recursive)<br><span></span><br><span></span>7.查找某个文件在HDFS集群的位置<br><span></span>FileSystem.getFileBlockLocations(FileStatus file,long start,long len)<br><span></span>8.获取HDFS集群上所有节点名称<br><span></span>DatanodeInfo.getHostName()</span>
            </div>
                </div>