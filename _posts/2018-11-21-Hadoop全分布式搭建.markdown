---
layout:     post
title:      Hadoop全分布式搭建
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/FLOWER1573/article/details/79378683				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <h1 align="center"></h1><h1 align="center">   Hadoop全分布式搭建</h1><p align="left"><span style="color:#008000;">STP1</span></p><p align="left">      新建hadoop文件夹【<span style="color:#FF0000;">mkdir hadoop</span>】</p><p align="left">       <span style="color:#7030A0;"> </span><span style="color:#7030A0;">说明——【hadoop</span>的安装文件夹】</p><p align="left"><span style="color:#008000;">STP2</span></p><p align="left">      解压hadoop文件<span style="color:#FF0000;">【tar -zxf/opt/software/hadoop-2.5.0-cdh5.3.6.tar.gz -C /opt/hadoop/</span>】</p><p align="left"><span style="color:#008000;">STP3</span></p><p align="left"><span style="color:#008000;">      </span>修改hadoop的名称<span style="color:#FF0000;">【mv /opt/modules/hadoop-2.5.0-cdh5.3.6//opt/ hadoop</span></p><p align="left"><span style="color:#FF0000;">/hadoop-2.5.0</span><span style="color:#FF0000;">】</span></p><p align="left">        <span style="color:#7030A0;">说明——【修改名称是为了后面方便管理】</span></p><p align="left"><span style="color:#008000;">STP4</span></p><p align="left"><span style="color:#008000;">   </span>   修改hadoop的配置文件</p><p align="left"><span style="color:#7030A0;">        </span><span style="color:#7030A0;">说明——文件路径【/opt/<span style="color:#FF0000;"><span style="color:#7030A0;">hadoop</span></span>/hadoop-2.5.0/etc/hadoop</span>】</p><p align="left"><span style="color:#008000;">STP4 - 1</span></p><p align="left"><span style="color:#008000;">        </span>修改JDK路径</p><p align="left"><span style="color:#008000;">        </span><span style="color:#FF0000;">修改以下文件中JAVA_HOME</span>配置【hadoop-env.sh、mapred-env.sh、yarn-env.sh 】</p><p align="left"><span style="color:#FF0000;">        </span><span style="color:#FF0000;">修改内容【export JAVA_HOME=/opt/hadoop/jdk1.7.0_67</span>】</p><p align="left"><span style="color:#008000;">        </span></p><p align="left"><span style="color:#008000;">STP4 - 2</span></p><p align="left"><span style="color:#008000;">        </span>添加数据节点</p><p align="left">        修改以下文件的配置<span style="color:#FF0000;">【slaves</span>】</p><p align="left">        将<span style="color:#FF0000;">【localhost</span>】修改为<span style="color:#FF0000;">【 </span></p><p align="left">                            <span style="color:#FF0000;">huayi1.org</span></p><p align="left"><span style="color:#FF0000;">                            </span><span style="color:#FF0000;">huayi2.org</span></p><p align="left"><span style="color:#FF0000;">                            </span><span style="color:#FF0000;"></span><span style="color:#FF0000;">huayi3.org</span></p><p align="left">                           <span style="color:#FF0000;"> </span><span style="color:#FF0000;">】</span></p><p align="left"><span style="color:#FF0000;"> </span></p><p align="left"><span style="color:#008000;">STP4 - 3</span></p><p align="left"><span style="color:#008000;">        </span>修改配置XML文件</p><p align="left">        <span style="color:#FF0000;">修改以下文件中XML</span>配置【core-site.xml、hdfs-site.xml、yarn-site.xml 】</p><p align="left"><span style="color:#FF0000;">        </span>core-site.xml<span style="color:#FF0000;">中修改【</span></p><p align="left"><span style="color:#FF0000;">                            </span><span style="color:#FF0000;">&lt;configuration&gt;</span></p><p align="left"><span style="color:#FF0000;">     </span>                            &lt;property&gt;</p><p align="left"><span style="color:#FF0000;">         </span>                       &lt;name&gt;fs.defaultFS&lt;/name&gt;</p><p align="left"><span style="color:#FF0000;">         </span>                       &lt;value&gt;hdfs://huayi1.org:8020&lt;/value&gt;</p><p align="left"><span style="color:#FF0000;">     </span>                            &lt;/property&gt;</p><p align="left"><span style="color:#FF0000;">     </span>                            &lt;property&gt;</p><p align="left"><span style="color:#FF0000;">         </span>                       &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</p><p align="left"><span style="color:#FF0000;">         </span>                         &lt;value&gt;/opt/<span style="color:#7030A0;">hadoop</span>/hadoop-2.5.0/tmp&lt;/value&gt;</p><p align="left"><span style="color:#FF0000;">     </span>                              &lt;/property&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span>  &lt;/configuration&gt;</p><p align="left"><span style="color:#FF0000;">                            </span><span style="color:#FF0000;">】</span></p><p align="left"><span style="color:#FF0000;">       </span> hdfs-site.xml<span style="color:#FF0000;">中修改【</span></p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;configuration&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;property&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;name&gt;dfs.replication&lt;/name&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;value&gt;3&lt;/value&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;/property&gt;</p><p align="left"><span style="color:#FF0000;">                   </span>               &lt;property&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;value&gt;huayi1.org:50070&lt;/value&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;/property&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;property&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;value&gt;huayi1.org:50090&lt;/value&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;/property&gt;</p><p align="left"><span style="color:#FF0000;">                                 </span> &lt;/configuration&gt;</p><p align="left"><span style="color:#FF0000;">                            </span><span style="color:#FF0000;">】</span></p><p align="left"><span style="color:#7030A0;">    </span>    <span style="color:#FF0000;">yarn-site.xml</span><span style="color:#FF0000;">中修改【</span></p><p align="left"><span style="color:#FF0000;">&lt;configuration&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;name&gt;mapreduce.framework.name&lt;/name&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;value&gt;yarn&lt;/value&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;/property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;value&gt;mapreduce_shuffle&lt;/value&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;/property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;value&gt;huayi1.org&lt;/value&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;/property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;value&gt;true&lt;/value&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;/property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;value&gt;86400&lt;/value&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;/property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;value&gt;huayi1.org:10020&lt;/value&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;/property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;value&gt;<span style="color:#FF0000;">huayi1.org</span>:19888&lt;/value&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;/property&gt;</span></p><p align="left"><span style="color:#FF0000;">&lt;/configuration&gt;</span></p><p align="left"><span style="color:#FF0000;">                    </span>        <span style="color:#FF0000;">】</span></p><p align="left"><span style="color:#008000;">STP4 - 4</span></p><p align="left"><span style="color:#008000;">        </span><span style="color:#FF0000;">创建集群缓存文件路径【mkdir tmp</span>】</p><p align="left"><span style="color:#7030A0;">        </span><span style="color:#7030A0;">说明——路径【/opt/<span style="color:#7030A0;">hadoop</span>/hadoop-2.5.0/</span>】</p><p align="left"><span style="color:#008000;"> </span></p><p align="left"><span style="color:#008000;">STP5</span></p><p align="left"><span style="color:#FF0000;">        </span><span style="color:#FF0000;">复制hadoop</span>到子节点机器【scp -rhadoop-2.5.0/ <a href="mailto:glm@bigdata03.com:/opt/modules/" rel="nofollow"><span style="color:#FF0000;">sang@<span style="color:#FF0000;">huayi2.org</span>:/opt/hadoop/</span></a><span style="color:#FF0000;">】</span></p><p align="left"><span style="color:#7030A0;">    </span>   <span style="color:#7030A0;">说明——路径【/opt/<span style="color:#7030A0;">hadoop</span>/</span>】</p><p align="left"><span style="color:#008000;">STP6</span></p><p align="left"><span style="color:#008000;">      </span>格式化hadoop</p><p align="left"><span style="color:#008000;">   </span><span style="color:#FF0000;">    </span><span style="color:#FF0000;">【bin/hadoopnamenode -format</span>】</p><p align="left"><span style="color:#008000;">STP7</span></p><p align="left"><span style="color:#008000;">     </span>启动hadoop</p><p align="left"><span style="color:#008000;">     </span><span style="color:#FF0000;">【sbin/start-all.sh</span>】</p><p align="left"><span style="color:#FF0000;"> </span></p><p align="left"> </p><br><p></p><div align="left"><br></div>            </div>
                </div>