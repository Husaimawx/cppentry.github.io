---
layout:     post
title:      kafka和flume集成
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p><span style="font-size:18px;">使用flume+kafka+sparkstreaming进行日志实时处理，flume作为kafka的producer,sparkstreaming作为kafka的消费者。</span></p><p><span style="font-size:18px;">flume只有1.6.0和以上的版才可以和kafka集成，1.6.0之前的版本没有提供kafka sink这个功能，在kafka中创建一个flumeTopic topic，然后使用flume 监控五个日志文件，五个文件实时更新，flume配置文件如下</span>：</p><p>a1.sources = s1 s2 s3 s4 s5<br>a1.channels = c1<br>a1.sinks = k1<br><br><br># define the source<br>a1.sources.s1.type = exec<br>a1.sources.s1.command = tail -F /nfs0/log/log1.log<br>a1.sources.s1.shell = /bin/sh -c<br><br><br>a1.sources.s2.type = exec<br>a1.sources.s2.command = tail -F /nfs0/log/log2.log<br>a1.sources.s2.shell = /bin/sh -c<br><br><br>a1.sources.s3.type = exec<br>a1.sources.s3.command = tail -F /nfs0/log/log3.log<br>a1.sources.s3.shell = /bin/sh -c<br><br><br><br><br>a1.sources.s4.type = exec<br>a1.sources.s4.command = tail -F /nfs0/log/log4.log<br>a1.sources.s4.shell = /bin/sh -c<br><br><br><br><br>a1.sources.s5.type = exec<br>a1.sources.s5.command = tail -F /nfs0/log/log5.log<br>a1.sources.s5.shell = /bin/sh -c<br><br><br>#define the channel<br>a1.channels.c1.type = memory<br>a1.channels.c1.capacity = 1000000<br>a1.channels.c1.transactionCapacity = 10000<br><br><br>#define the sink<br>a1.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink<br>a1.sinks.k1.brokerList = master11:9092,slave11:9092,slave12:9092<br>a1.sinks.k1.topic = flumeTopic<br><br><br># zuhe<br>a1.sources.s1.channels = c1<br>a1.sources.s2.channels = c1<br>a1.sources.s3.channels = c1<br>a1.sources.s4.channels = c1<br>a1.sources.s5.channels = c1<br></p><p>a1.sinks.k1.channel = c1</p><p><br></p><p>启动flume和kafka，此时sparkstreaming就可以实时消费kafka中的数据了</p>            </div>
                </div>