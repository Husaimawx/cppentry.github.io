---
layout:     post
title:      Hadoop命令
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<p>进入到Hadoop安装目录下的bin目录中</p>
<p>不加任何参数运行Hadoop</p>
<p> <span style="color:#ff0000;">  ./hadoop或直接输入hadoop</span></p>
<p>   得到  </p>
<pre></pre><ol class="dp-j"><li class="alt"><span><span>[root</span><span class="annotation">@localhost</span><span> bin]# ./hadoop </span></span></li><li><span>Usage: hadoop [--config confdir] COMMAND </span></li><li class="alt"><span>where COMMAND is one of: </span></li><li><span>  namenode -format     format the DFS filesystem </span></li><li class="alt"><span>  secondarynamenode    run the DFS secondary namenode </span></li><li><span>  namenode             run the DFS namenode </span></li><li class="alt"><span>  datanode             run a DFS datanode </span></li><li><span>  dfsadmin             run a DFS admin client </span></li><li class="alt"><span>  mradmin              run a Map-Reduce admin client </span></li><li><span>  fsck                 run a DFS filesystem checking utility </span></li><li class="alt"><span>  fs                   run a generic filesystem user client </span></li><li><span>  balancer             run a cluster balancing utility </span></li><li class="alt"><span>  fetchdt              fetch a delegation token from the NameNode </span></li><li><span>  jobtracker           run the MapReduce job Tracker node </span></li><li class="alt"><span>  pipes                run a Pipes job </span></li><li><span>  tasktracker          run a MapReduce task Tracker node </span></li><li class="alt"><span>  historyserver        run job history servers as a standalone daemon </span></li><li><span>  job                  manipulate MapReduce jobs </span></li><li class="alt"><span>  queue                get information regarding JobQueues </span></li><li><span>  version              print the version </span></li><li class="alt"><span>  jar &lt;jar&gt;            run a jar file </span></li><li><span>  distcp &lt;srcurl&gt; &lt;desturl&gt; copy file or directories recursively </span></li><li class="alt"><span>  archive -archiveName NAME -p &lt;parent path&gt; &lt;src&gt;* &lt;dest&gt; create a hadoop archive </span></li><li><span>  classpath            prints the <span class="keyword">class</span><span> path needed to get the </span></span></li><li class="alt"><span>                       Hadoop jar and the required libraries </span></li><li><span>  daemonlog            get/set the log level <span class="keyword">for</span><span> each daemon </span></span></li><li class="alt"><span> or </span></li><li><span>  CLASSNAME            run the <span class="keyword">class</span><span> named CLASSNAME </span></span></li><li class="alt"><span>Most commands print help when invoked w/o parameters. </span></li></ol>
<p>   各参数的中文描述为：</p>
<ol class="dp-xml"><li class="alt"><span><span>[root@localhost bin]# ./hadoop </span></span></li><li><span>Usage: hadoop [--config confdir] COMMAND </span></li><li class="alt"><span>where COMMAND is one of: </span></li><li><span>  namenode -format     格式化DFS文件系统</span></li><li class="alt"><span>  secondarynamenode    运行DFS的第二个namenode </span></li><li><span>  namenode             运行DFS的namenode </span></li><li class="alt"><span>  datanode             运行一个DFS的datanode</span></li><li><span>  dfsadmin             运行一个DFS的admin客户端</span></li><li class="alt"><span>  mradmin              运行一个MapReduce的admin客户端</span></li><li><span>  fsck                 运行一个DFS文件系统的检查工具</span></li><li class="alt"><span>  fs                   运行一个普通的文件系统用户客户端</span></li><li><span>  balancer             运行一个集群负载均衡工具 </span></li><li class="alt"><span>  fetchdt              从NameNode取一行词 </span></li><li><span>  jobtracker           运行MapReduce的Tracker 节点</span></li><li class="alt"><span>  pipes                运行 Pipes 作业 </span></li><li><span>  tasktracker          运行MapReduce的task Tracker 节点</span></li><li class="alt"><span>  historyserver        运行一个独立的history server守护进程</span></li><li><span>  job                  处理MapReduce作业 </span></li><li class="alt"><span>  queue                得到JobQueues的信息 </span></li><li><span>  version              打印版本 </span></li><li class="alt"><span>  jar <span class="tag">&lt;</span><span class="tag-name">jar</span><span class="tag">&gt;</span><span>            运行一个 jar file </span></span></li><li><span>  distcp <span class="tag">&lt;</span><span class="tag-name">srcurl</span><span class="tag">&gt;</span><span> </span><span class="tag">&lt;</span><span class="tag-name">desturl</span><span class="tag">&gt;</span><span> 递归地复制文件或者目录</span></span></li><li class="alt"><span>  archive -archiveName NAME -p <span class="tag">&lt;</span><span class="tag-name">parent</span><span> path</span><span class="tag">&gt;</span><span> </span><span class="tag">&lt;</span><span class="tag-name">src</span><span class="tag">&gt;</span><span>* </span><span class="tag">&lt;</span><span class="tag-name">dest</span><span class="tag">&gt;</span><span> 生成一个Hadoop档案</span></span></li><li><span>  classpath            打印找到</span><span>Hadoop jar and the required libraries 所需要的目录</span></li><li><span>  daemonlog            获取每个daemon的日志级别 </span></li><li class="alt"><span> or </span></li><li><span>  CLASSNAME            运行名为CLASSNAME的类大多数命令会在使用w/o参数时打印出帮助信息</span></li><li class="alt"><span>Most commands print help when invoked w/o parameters. </span></li></ol><span></span>
<p>如运行./hadoop classpath，我们得到</p>
<pre></pre><ol class="dp-xml"><li class="alt"><span><span>[root@localhost bin]# ./hadoop classpath </span></span></li><li><span>/opt/hadoop-1.0.2/libexec/../conf:/usr/java/jdk1.6.0_29/lib/tools.jar:/opt/hadoop-1.0.2/libexec/..:/opt/hadoop-1.0.2/libexec/../hadoop-core-1.0.2.jar:/opt/hadoop-1.0.2/libexec/../lib/asm-3.2.jar:/opt/hadoop-1.0.2/libexec/../lib/aspectjrt-1.6.5.jar:/opt/hadoop-1.0.2/libexec/../lib/aspectjtools-1.6.5.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-beanutils-1.7.0.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-beanutils-core-1.8.0.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-cli-1.2.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-codec-1.4.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-collections-3.2.1.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-configuration-1.6.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-daemon-1.0.1.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-digester-1.8.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-el-1.0.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-httpclient-3.0.1.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-lang-2.4.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-logging-1.1.1.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-logging-api-1.0.4.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-math-2.1.jar:/opt/hadoop-1.0.2/libexec/../lib/commons-net-1.4.1.jar:/opt/hadoop-1.0.2/libexec/../lib/core-3.1.1.jar:/opt/hadoop-1.0.2/libexec/../lib/hadoop-capacity-scheduler-1.0.2.jar:/opt/hadoop-1.0.2/libexec/../lib/hadoop-fairscheduler-1.0.2.jar:/opt/hadoop-1.0.2/libexec/../lib/hadoop-thriftfs-1.0.2.jar:/opt/hadoop-1.0.2/libexec/../lib/hsqldb-1.8.0.10.jar:/opt/hadoop-1.0.2/libexec/../lib/jackson-core-asl-1.8.8.jar:/opt/hadoop-1.0.2/libexec/../lib/jackson-mapper-asl-1.8.8.jar:/opt/hadoop-1.0.2/libexec/../lib/jasper-compiler-5.5.12.jar:/opt/hadoop-1.0.2/libexec/../lib/jasper-runtime-5.5.12.jar:/opt/hadoop-1.0.2/libexec/../lib/jdeb-0.8.jar:/opt/hadoop-1.0.2/libexec/../lib/jersey-core-1.8.jar:/opt/hadoop-1.0.2/libexec/../lib/jersey-json-1.8.jar:/opt/hadoop-1.0.2/libexec/../lib/jersey-server-1.8.jar:/opt/hadoop-1.0.2/libexec/../lib/jets3t-0.6.1.jar:/opt/hadoop-1.0.2/libexec/../lib/jetty-6.1.26.jar:/opt/hadoop-1.0.2/libexec/../lib/jetty-util-6.1.26.jar:/opt/hadoop-1.0.2/libexec/../lib/jsch-0.1.42.jar:/opt/hadoop-1.0.2/libexec/../lib/junit-4.5.jar:/opt/hadoop-1.0.2/libexec/../lib/kfs-0.2.2.jar:/opt/hadoop-1.0.2/libexec/../lib/log4j-1.2.15.jar:/opt/hadoop-1.0.2/libexec/../lib/mockito-all-1.8.5.jar:/opt/hadoop-1.0.2/libexec/../lib/oro-2.0.8.jar:/opt/hadoop-1.0.2/libexec/../lib/servlet-api-2.5-20081211.jar:/opt/hadoop-1.0.2/libexec/../lib/slf4j-api-1.4.3.jar:/opt/hadoop-1.0.2/libexec/../lib/slf4j-log4j12-1.4.3.jar:/opt/hadoop-1.0.2/libexec/../lib/xmlenc-0.52.jar:/opt/hadoop-1.0.2/libexec/../lib/jsp-2.1/jsp-2.1.jar:/opt/hadoop-1.0.2/libexec/../lib/jsp-2.1/jsp-api-2.1.jar </span></li></ol>
<p><span style="color:#ff0000;">由上可知，运行一个（Java）Hadoop程序的命令为hadoop jar&lt;jar&gt;。就像命令显示的那样，用Java写的Hadoop程序被打包为jar执行文件</span>。</p>
<p>在Hadoop的目录下，有一个名为hadoop-examples-1.0.2.jar的文件（不同版本的Hadoop,jar文件不同），jar里打包了一些例子。可以在hadoop-1.0.2/src/examples/org/apache/hadoop/examples目录下找到这些例子。例子如下：</p>
<ol class="dp-xml"><li class="alt"><span><span>[root@localhost examples]# ll </span></span></li><li><span>total 228 </span></li><li class="alt"><span>-rw-rw-r-- 1 root root  2797 Mar 25 08:01 AggregateWordCount.java </span></li><li><span>-rw-rw-r-- 1 root root  2879 Mar 25 08:01 AggregateWordHistogram.java </span></li><li class="alt"><span>drwxr-xr-x 2 root root  4096 Apr 11 21:50 dancing </span></li><li><span>-rw-rw-r-- 1 root root 13089 Mar 25 08:01 DBCountPageView.java </span></li><li class="alt"><span>-rw-rw-r-- 1 root root  3751 Mar 25 08:01 ExampleDriver.java </span></li><li><span>-rw-rw-r-- 1 root root  3334 Mar 25 08:01 Grep.java </span></li><li class="alt"><span>-rw-rw-r-- 1 root root  6582 Mar 25 08:01 Join.java </span></li><li><span>-rw-rw-r-- 1 root root  8282 Mar 25 08:01 MultiFileWordCount.java </span></li><li class="alt"><span>-rw-rw-r-- 1 root root   853 Mar 25 08:01 package.html </span></li><li><span>-rw-rw-r-- 1 root root 11914 Mar 25 08:01 PiEstimator.java </span></li><li class="alt"><span>-rw-rw-r-- 1 root root 40350 Mar 25 08:01 RandomTextWriter.java </span></li><li><span>-rw-rw-r-- 1 root root 10190 Mar 25 08:01 RandomWriter.java </span></li><li class="alt"><span>-rw-rw-r-- 1 root root  7809 Mar 25 08:01 SecondarySort.java </span></li><li><span>-rw-rw-r-- 1 root root  9156 Mar 25 08:01 SleepJob.java </span></li><li class="alt"><span>-rw-rw-r-- 1 root root  8040 Mar 25 08:01 Sort.java </span></li><li><span>drwxr-xr-x 2 root root  4096 Apr 11 21:50 terasort </span></li><li class="alt"><span>-rw-rw-r-- 1 root root  2395 Mar 25 08:01 WordCount.java </span></li></ol><pre class="alt"><span>我们使用WordCount来试运行一个Hadoop。</span></pre><p> 不指定任何参数执行wordcount将显示一些有关用法的信息：</p><pre></pre><ol class="dp-xml"><li class="alt"><span><span>[root@localhost bin]# ./hadoop jar /opt/hadoop-1.0.2/hadoop-examples-1.0.2.jar wordcount </span></span></li><li><span>Usage: wordcount <span class="tag">&lt;</span><span class="tag-name">in</span><span class="tag">&gt;</span><span> </span><span class="tag">&lt;</span><span class="tag-name">out</span><span class="tag">&gt;</span><span> </span></span></li></ol><p> 从网上下载一篇英文散文，保存为test.txt,保存在/opt/data目录下</p><p> 再次执行wordcount得到</p><pre></pre><ol class="dp-j"><li class="alt"><span><span>[root</span><span class="annotation">@localhost</span><span> bin]# <span style="color:#ff0000;">./hadoop jar /opt/hadoop-</span></span><span style="color:#ff0000;"><span class="number">1.0</span><span>.</span><span class="number">2</span><span>/hadoop-examples-</span><span class="number">1.0</span><span>.</span><span class="number">2</span><span>.jar wordcount /opt/data/test.txt /opt/data/output </span></span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">41</span><span> INFO util.NativeCodeLoader: Loaded the </span><span class="keyword">native</span><span>-hadoop library </span></span></li><li class="alt"><span>****file:/opt/data/test.txt </span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">41</span><span> INFO input.FileInputFormat: Total input paths to process : </span><span class="number">1</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">41</span><span> WARN snappy.LoadSnappy: Snappy </span><span class="keyword">native</span><span> library not loaded </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">42</span><span> INFO mapred.JobClient: Running job: job_local_0001 </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">42</span><span> INFO util.ProcessTree: setsid exited with exit code </span><span class="number">0</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">42</span><span> INFO mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin</span><span class="annotation">@9ced8e</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">42</span><span> INFO mapred.MapTask: io.sort.mb = </span><span class="number">100</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">43</span><span> INFO mapred.MapTask: data buffer = </span><span class="number">79691776</span><span>/</span><span class="number">99614720</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">43</span><span> INFO mapred.MapTask: record buffer = </span><span class="number">262144</span><span>/</span><span class="number">327680</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">43</span><span> INFO mapred.MapTask: Starting flush of map output </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">43</span><span> INFO mapred.MapTask: Finished spill </span><span class="number">0</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">43</span><span> INFO mapred.Task: Task:attempt_local_0001_m_000000_0 is done. And is in the process of commiting </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">43</span><span> INFO mapred.JobClient:  map </span><span class="number">0</span><span>% reduce </span><span class="number">0</span><span>% </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.LocalJobRunner:  </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.Task: Task </span><span class="string">'attempt_local_0001_m_000000_0'</span><span> done. </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin</span><span class="annotation">@281d4b</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.LocalJobRunner:  </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.Merger: Merging </span><span class="number">1</span><span> sorted segments </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.Merger: Down to the last merge-pass, with </span><span class="number">1</span><span> segments left of total size: </span><span class="number">6079</span><span> bytes </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.LocalJobRunner:  </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.Task: Task:attempt_local_0001_r_000000_0 is done. And is in the process of commiting </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.LocalJobRunner:  </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO mapred.Task: Task attempt_local_0001_r_000000_0 is allowed to commit now </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">45</span><span> INFO output.FileOutputCommitter: Saved output of task </span><span class="string">'attempt_local_0001_r_000000_0'</span><span> to /opt/data/output </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">46</span><span> INFO mapred.JobClient:  map </span><span class="number">100</span><span>% reduce </span><span class="number">0</span><span>% </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">48</span><span> INFO mapred.LocalJobRunner: reduce &gt; reduce </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">48</span><span> INFO mapred.Task: Task </span><span class="string">'attempt_local_0001_r_000000_0'</span><span> done. </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:  map </span><span class="number">100</span><span>% reduce </span><span class="number">100</span><span>% </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient: Job complete: job_local_0001 </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient: Counters: </span><span class="number">20</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:   File Output Format Counters  </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Bytes Written=</span><span class="number">4241</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:   FileSystemCounters </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     FILE_BYTES_READ=</span><span class="number">301803</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     FILE_BYTES_WRITTEN=</span><span class="number">368355</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:   File Input Format Counters  </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Bytes Read=</span><span class="number">5251</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:   Map-Reduce Framework </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Map output materialized bytes=</span><span class="number">6083</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Map input records=</span><span class="number">21</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Reduce shuffle bytes=</span><span class="number">0</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Spilled Records=</span><span class="number">946</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Map output bytes=</span><span class="number">9182</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Total committed heap usage (bytes)=</span><span class="number">321134592</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     CPU time spent (ms)=</span><span class="number">0</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     SPLIT_RAW_BYTES=</span><span class="number">88</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Combine input records=</span><span class="number">970</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Reduce input records=</span><span class="number">473</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Reduce input groups=</span><span class="number">473</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Combine output records=</span><span class="number">473</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Physical memory (bytes) snapshot=</span><span class="number">0</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Reduce output records=</span><span class="number">473</span><span> </span></span></li><li class="alt"><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Virtual memory (bytes) snapshot=</span><span class="number">0</span><span> </span></span></li><li><span><span class="number">12</span><span>/</span><span class="number">04</span><span>/</span><span class="number">11</span><span> </span><span class="number">22</span><span>:</span><span class="number">48</span><span>:</span><span class="number">49</span><span> INFO mapred.JobClient:     Map output records=</span><span class="number">970</span><span> </span></span></li></ol><p>查看统计的结果</p><pre></pre><ol class="dp-xml"><li class="alt"><span><span>[root@localhost bin]# more /opt/data/output/* </span></span></li><li><span>:::::::::::::: </span></li><li class="alt"><span>/opt/data/output/part-r-00000 </span></li><li><span>:::::::::::::: </span></li><li class="alt"><span>"Eat,   1 </span></li><li><span>"How    1 </span></li><li class="alt"><span>"she    1 </span></li><li><span>And     1 </span></li><li class="alt"><span>But     1 </span></li><li><span>Darkness        1 </span></li><li class="alt"><span>Epicurean       1 </span></li><li><span>Eyes".  1 </span></li><li class="alt"><span>He      1 </span></li><li><span>I       24 </span></li><li class="alt"><span>If      2 </span></li><li><span>In      1 </span></li><li class="alt"><span>It      3 </span></li><li><span>Nature  2 </span></li><li class="alt"><span>Occasionally,   1 </span></li><li><span>Only    1 </span></li><li class="alt"><span>Particularly    1 </span></li><li><span>Persian 1 </span></li><li class="alt"><span>Recently        1 </span></li><li><span>So      1 </span></li><li class="alt"><span>Sometimes       1 </span></li><li><span>Such    1 </span></li><li class="alt"><span>The     2 </span></li><li><span>Their   1 </span></li><li class="alt"><span>There   1 </span></li><li><span>To      2 </span></li><li class="alt"><span>Use     1 </span></li><li><span>We      3 </span></li><li class="alt"><span>What    1 </span></li><li><span>When    1 </span></li><li class="alt"><span>Yet,    1 </span></li></ol><p>wordcount程序有一些不足，分词完全根据空格而不是根据标点符号，这使得“<span style="font-family:'Courier New', monospace;font-size:12px;line-height:15px;background-color:rgb(247,247,247);">"Eat</span>”，“eat”,“Eat”分别成为单独的单词。可以修改wordcount.java来修改这个不足</p><p>将StringTokenizer itr = new StringTokenizer(line)改为</p><p>StringTokenizer itr = new StringTokenizer(line," \t\n\r\f,.:;?![]'")</p><p>重新编译再运行一次，得到的结果就好多了。</p>
<p class="alt"> </p>
<pre class="alt"><span></span> </pre>
            </div>
                </div>