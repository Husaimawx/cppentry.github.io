---
layout:     post
title:      HBase——安装配置与shell操作
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，欢迎一起学习交流。					https://blog.csdn.net/ym01213/article/details/80063564				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p>本节目标：</p><p>1.掌握HBase的伪分布式和完全分布式的安装与配置</p><p>2.通过HBase Shell了解HBase存储原理</p><p>3、掌握常用hbase shell命令</p><h1>一、伪分布式</h1><p>下载与使用的Hadoop版本匹配的HBase<br></p><p><img src="https://img-blog.csdn.net/20180424152712159" alt=""></p><p>本人采用Hadoop-2.7.6，HBase选择1.3.2版本，可到<a href="http://mirror.bit.edu.cn/apache/hbase/" rel="nofollow">官网下载</a>。</p><p>1.解压安装hbash到指定目录<br></p><p>2.修改环境变量：<br>        export HBASE_HOME=/usr/local/src/hbase-1.3.2<br>        export PATH=$PATH:$HBASE_HOME/bin<br><span style="white-space:pre;">	</span>source ~/.bashrc<br>3.修改conf下的配置文件<br>    <span style="color:#ff0000;">hbash-env.sh<br></span></p><p><span style="white-space:pre;">	<img src="https://img-blog.csdn.net/20180424185517966" alt=""></span></p><p>    <span style="color:rgb(255,0,0);">hbase-site.xml</span></p><p><span style="color:rgb(255,0,0);"><img src="https://img-blog.csdn.net/20180424185559801" alt=""></span></p><p>4.启动:start-hbase.sh</p><p><span style="white-space:pre;"><img src="https://img-blog.csdn.net/20180424185751716" alt="" style="margin-bottom:0px;"></span><br></p><p><span style="white-space:pre;">伪分布式自带zookeeper，因此不能启动自己安装的zk，否则端口被占用报错。</span></p><p><span style="white-space:pre;"><img src="https://img-blog.csdn.net/20180425101241146" alt=""><br></span></p><p>5、进入命令行模式：hbase shell</p><p>（1）help查看帮助信息</p><p><img src="https://img-blog.csdn.net/2018042419041571" alt=""><br></p><p>（1）创建表</p><p><img src="https://img-blog.csdn.net/20180424190327995" alt=""><br></p><p><img src="https://img-blog.csdn.net/20180424190548427" alt=""><br></p><p>（3）查看所有表</p><p><img src="https://img-blog.csdn.net/20180424190630285" alt=""><br></p><p>（3）查看表描述信息</p><p><img src="https://img-blog.csdn.net/20180424190653330" alt=""><br></p><p>（4）写入表数据</p><p><img src="https://img-blog.csdn.net/2018042419083638" alt=""><br></p><p>（5）扫描表</p><p><img src="https://img-blog.csdn.net/20180424190945713" alt=""><br></p><p>（6）获取表数据</p><p><img src="https://img-blog.csdn.net/20180424191009732" alt=""><br></p><p><img src="https://img-blog.csdn.net/20180424191032876" alt=""><br></p><p>（7）查看名称空间</p><p><img src="https://img-blog.csdn.net/20180424191120537" alt=""><br></p><p>（8）删除表，先禁用表，才能删除</p><p><img src="https://img-blog.csdn.net/20180424191156990" alt=""><br></p><p>以上基本操作后，查看本地对数据的存储。</p><p><img src="https://img-blog.csdn.net/20180424191357782" alt=""></p><p><img src="https://img-blog.csdn.net/20180424191438541" alt=""><img src="https://img-blog.csdn.net/20180424191509683" alt=""></p><img src="https://img-blog.csdn.net/20180424191527145" alt=""><br>此时文件保存路径下没有数据写入，全部在MemStore中，需要刷新缓存后，才会落地保存。<br><img src="https://img-blog.csdn.net/20180424191745819" alt=""><br>使用命令时注意：<br>命令行后面不带“;”<br>ctrl+del往前删除<h1>二、完全分布式搭建</h1><p></p><div style="text-align:left;"><span style="font-size:14px;"></span><p>基于<a href="https://mp.csdn.net/postedit/80044389" rel="nofollow">Hadoop搭建</a>完成HBase完全分布式搭建。</p><p>节点分布情况：</p></div><table border="1" cellspacing="0" cellpadding="0"><tbody><tr><td valign="top"><p> </p></td>  <td valign="top"><p align="center">NN</p></td>  <td valign="top"><p align="center">DN</p></td>  <td valign="top"><p align="center">JN</p></td>  <td valign="top"><p align="center">ZK</p></td>  <td valign="top"><p align="center">ZKFC</p></td>  <td valign="top"><p align="center">RM</p></td>  <td valign="top"><p align="center">NM</p></td>  <td valign="top"><p align="center"><span style="color:#ff0000;">Master</span></p></td>  <td valign="top"><p align="center"><span style="color:#ff0000;">RegionServer</span></p></td> </tr><tr><td valign="top"><p><strong>master(192.168.85.10)</strong></p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center">l    </p></td> </tr><tr><td valign="top"><p><strong>slave1(192.168.85.11)</strong></p></td>  <td valign="top"><p align="center">l   </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center"> </p></td> </tr><tr><td valign="top"><p><strong>slave2(192.168.85.12)</strong></p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center">l   </p></td>  <td valign="top"><p align="center">l   </p></td>  <td valign="top"><p align="center">l （backup-master）  </p></td>  <td valign="top"><p align="center">l   </p></td> </tr><tr><td valign="top"><p><strong>slave3(192.168.85.13)</strong></p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center">l    </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center">l   </p></td>  <td valign="top"><p align="center">l   </p></td>  <td valign="top"><p align="center"> </p></td>  <td valign="top"><p align="center">l   </p></td> </tr></tbody></table><p>1.每个节点上解压安装hbase</p><p>2.修改环境变量（同上）<br></p>3.修改conf下配置文件<br><span style="color:#ff6666;">conf/hbash-env.sh</span><br><span style="white-space:pre;">	</span>JAVA_HOME=同上<br><span style="white-space:pre;">	</span>HBASE_MANAGERS_ZK=false   --&gt;不使用自带zk<br><span style="color:#ff6666;">hbase-site.xml</span><br><span style="white-space:pre;">	</span>&lt;property&gt;<br><span style="white-space:pre;">		</span>&lt;name&gt;hbase.rootdir&lt;/name&gt;<br><span style="white-space:pre;">	</span>&lt;value&gt;hdfs://HDFSHA/hbase&lt;/value&gt;<br><span style="white-space:pre;">	</span>&lt;/property&gt;<br><span style="white-space:pre;">	</span>&lt;property&gt;<br><span style="white-space:pre;">		</span>&lt;name&gt;hbase.cluster.distributed&lt;/name&gt;<br><span style="white-space:pre;">		</span>&lt;value&gt;true&lt;/value&gt;<br><span style="white-space:pre;">	</span>&lt;/property&gt;<br><span style="white-space:pre;">	</span>&lt;property&gt;<br><span style="white-space:pre;">		</span>&lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;<br><span style="white-space:pre;">		</span>&lt;value&gt; master,slave1,slave2 &lt;/value&gt;<br><span style="white-space:pre;">	</span>&lt;/property&gt;<br><span style="color:#ff6666;">regionservers </span>  <br><span style="white-space:pre;">	</span>master<br><span style="white-space:pre;">	</span>slave2<br><span style="white-space:pre;">	</span>slave3<br><span style="color:#ff0000;">vi</span> <span style="color:#ff0000;">backup-masters</span><br><img src="https://img-blog.csdn.net/20180424192639194" alt=""><br><strong>4、hdfs-site.xml拷贝到conf下</strong><br>5、将配置文件同步到其他节点<br><span style="white-space:pre;">	</span>scp ./* <br><p></p><p>6、启动</p><p>依次启动zk，hadoop，RM，hbase</p><p>Master上启动start-hbase.sh</p><p><img src="https://img-blog.csdn.net/20180424192851695" alt=""><br></p><p>7、webUI检查</p><p><img src="https://img-blog.csdn.net/20180424193025194" alt=""><br></p><p><img src="https://img-blog.csdn.net/20180424193038549" alt=""></p><p>8.检测HA</p>kill -9 端口号<br><p>如果单独启动一个HMaster进程：bin/hbase-daemon.sh start master<br></p><p>单独启动一个HRegionServer进程：bin/hbase-daemon.sh start regionserver</p><p>9、通过hbase shell简单操作，查看在HDFS上的存储情况</p><p><img src="https://img-blog.csdn.net/20180424193233689" alt=""><br></p><p><img src="https://img-blog.csdn.net/20180424193241978" alt=""><br></p><p>更多使用操作，查看<a href="http://hbase.apache.org/book.html#quickstart" rel="nofollow">官方手册</a>。</p><p><br></p>            </div>
                </div>