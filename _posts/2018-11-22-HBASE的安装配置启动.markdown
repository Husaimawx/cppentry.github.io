---
layout:     post
title:      HBASE的安装配置启动
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <h2 style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:1.1;color:rgb(51,51,51);font-size:30px;border-left:10px solid rgb(52,152,219);background-color:rgb(247,247,247);">一、HBase介绍</h2><pre style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:16px;color:rgb(51,51,51);background-color:rgb(245,245,245);border:1px solid rgb(217,217,217);"><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;color:rgb(21,21,21);background:none;vertical-align:middle;">HBase是一个分布式的、面向列的开源数据库,源于Google的一篇论文《BigTable：一个结构化数据的分布式存储系统》。HBase以表的形式存储数据，表有行和列组成，列划分为若干个列族/列簇(column family)。欲了解HBase的官方资讯，请访问[HBase官方网站](http://hbase.apache.org/)。
HBase的运行有三种模式：单机模式、伪分布式模式、分布式模式。
单机模式：在一台计算机上安装和使用HBase，不涉及数据的分布式存储；伪分布式模式：在一台计算机上模拟一个小的集群；分布式模式：使用多台计算机实现物理意义上的分布式存储。这里出于学习目的，我们只重点讨论单机模式和伪分布式模式。
</code></pre><p style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;"><span style="color:rgb(51,51,51);background-color:rgb(254,254,254);">本教程运行环境是在Ubuntu-64位系统下，HBase版本为hbase-1.1.2，这是目前已经发行的已经编译好的稳定的版本，带有src的文件是未编译的版本，这里我们只要下载bin版本hbase-1.1.2-bin.tar.gz就好了。hbase-1.1.2-bin.tar.gz.mds是用来校验文件hbase-1.1.2-bin.tar.gz是否完整，一般不需要校验，如果您想要校验可以参考</span><a href="http://dblab.xmu.edu.cn/blog/install-hadoop/" rel="nofollow" style="background-position:0px 0px;"><span style="color:#333333;background-color:rgb(255,255,255);">Hadoop安装教程</span></a><span style="color:rgb(51,51,51);background-color:rgb(254,254,254);"> 中对Hadoop的校验。</span></p><ol style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><li>如果读者是使用虚拟机方式安装Ubuntu系统的用户，请用虚拟机中的Ubuntu自带firefox浏览器访问本指南，再点击下面的地址，才能把HBase文件下载虚拟机Ubuntu中。请不要使用Windows系统下的浏览器下载，文件会被下载到Windows系统中，虚拟机中的Ubuntu无法访问外部Windows系统的文件，造成不必要的麻烦。</li><li>如果读者是使用双系统方式安装Ubuntu系统的用户，请运行Ubuntu系统，在Ubuntu系统打开firefox浏览器访问本指南，再点击下面的地址下载（2016.5已经更新到1.2.1版本，最新版本向下兼容，本教程同样适用）<br><a href="http://archive.apache.org/dist/hbase/" rel="nofollow" style="background:0px 0px;color:rgb(32,128,223);">HBase下载地址</a></li></ol><h2 style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:1.1;color:rgb(51,51,51);font-size:30px;border-left:10px solid rgb(52,152,219);background-color:rgb(247,247,247);">二、安装并配置HBase</h2><h3 style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:1.1;color:rgb(51,51,51);font-size:26px;border-left:8px solid rgb(52,152,219);background-color:rgb(247,247,247);">1. HBase安装</h3><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">1.1 解压安装包hbase-1.1.2-bin.tar.gz至路径 /usr/local，命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">        sudo tar -zxvf ~/下载/hbase-1.1.2-bin.tar.gz -C /usr/local<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">1.2 将解压的文件名hbase-1.1.2改为hbase，以方便使用，命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">        sudo mv /usr/local/hbase-1.1.2 /usr/local/hbase 或者用软连接  ln -s <span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">/usr/local/hbase-1.1.2  hbase</span><br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">1.3 配置环境变量<br>将hbase下的bin目录添加到path中，这样，启动hbase就无需到/usr/local/hbase目录下，大大的方便了hbase的使用。教程下面的部分还是切换到了/usr/local/hbase目录操作，有助于初学者理解运行过程，熟练之后可以不必切换。<br>编辑/etc/profile文件</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">如果已经引入过PATH请在export PATH这行追加/usr/local/hbase/bin，这里的“：”是分隔符。如下图：<br><img src="http://dblab.xmu.edu.cn/blog/wp-content/uploads/2016/01/%E5%BC%95%E5%85%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" alt="配置环境变量" style="border:0px;vertical-align:middle;margin-left:auto;"><br></p><p>编辑完成后，再执行source命令使上述配置在当前终端立即生效，命令如下：</p><p>source /etc/profile</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">扩展阅读: <a href="http://dblab.xmu.edu.cn/blog/linux-environment-variable/" rel="nofollow"> 设置Linux环境变量的方法和区别</a>1.4 添加HBase权限</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">cd /usr/local<br></p><p>sudo chown -R hadoop ./hbase       #将hbase下的所有文件的所有者改为hadoop，hadoop是当前用户的用户名。</p><p>1.5 查看HBase版本，确定hbase安装成功,命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;">    /usr/local/hbase/bin/hbase version</p><p><span style="background-color:rgb(255,255,102);"><span style="font-size:14px;">这里输入hbase version命令之前需要先设置HBASE依赖的java_home。 在HBASE-env.sh文件设置。</span></span></p><p style="background-color:rgb(254,254,254);">命令执行后，输出信息截图如下：</p><span style="background-color:rgb(254,254,254);margin-left:auto;"><img src="http://dblab.xmu.edu.cn/blog/wp-content/uploads/2015/09/viewedition.png" alt="查看版本" style="border:0px;vertical-align:middle;margin-left:auto;"></span><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">看到以上输出消息表示HBase已经安装成功，接下来将分别进行HBase单机模式和伪分布式模式的配置。</p><h3 style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:1.1;color:rgb(51,51,51);font-size:26px;border-left:8px solid rgb(52,152,219);background-color:rgb(247,247,247);">2. HBase配置</h3><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">HBase有三种运行模式，单机模式、伪分布式模式、分布式模式。作为学习，我们重点讨论单机模式和伪分布式模式。<span style="color:#FF0000;">以下先决条件很重要，比如没有配置JAVA_HOME环境变量，就会报错。</span><span style="color:#FF0000;">– jdk</span><span style="color:#FF0000;">– Hadoop( 单机模式不需要，伪分布式模式和分布式模式需要)</span><span style="color:#FF0000;">– SSH</span></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">以上三者如果没有安装，请回到<a href="http://dblab.xmu.edu.cn/blog/285/" rel="nofollow" style="background:0px 0px;color:rgb(32,128,223);">第二章的指南</a>参考如何安装。</p><h4 style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:1.1;color:rgb(51,51,51);font-size:22px;border-left:6px solid rgb(52,152,219);background-color:rgb(247,247,247);">2.1单机模式配置</h4><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">1. 配置/usr/local/hbase/conf/hbase-env.sh 。配置JAVA环境变量，并添加配置HBASE_MANAGES_ZK为true，用vi命令打开并编辑hbase-env.sh，命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">vi /usr/local/hbase/conf/hbase-env.sh<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">配置JAVA环境变量<span style="text-align:justify;">，jdk的安装目录默认是 /usr/lib/jvm/java-1.7.0-openjdk， 则JAVA _HOME =/usr/lib/jvm/java-7-openjdk-amd64，其中java-1.7.0-openjdk是你的jdk版本；配置HBASE_MANAGES_ZK为true，表示由hbase自己管理zookeeper，不需要单独的zookeeper。hbase-env.sh中本来就存在这些变量的配置，大家只需要删除前面的#并修改配置内容即可(#代表注释)：</span></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="text-align:justify;">export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64<br>export HBASE_MANAGES_ZK=true <br></span></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><img src="http://dblab.xmu.edu.cn/blog/wp-content/uploads/2016/01/hbase-env.sh_.png" alt="配置hbase-env.sh" style="border:0px;vertical-align:middle;margin-left:auto;"><span class="img-caption" style="text-align:center;font-size:15px;color:rgb(141,141,141);">配置hbase-env.sh</span></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">添加完成后保存退出即可。</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">2. 配置/usr/local/hbase/conf/hbase-site.xml打开并编辑hbase-site.xml，命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">vi /usr/local/hbase/conf/hbase-site.xml<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">在启动HBase前需要设置属性hbase.rootdir，用于指定HBase数据的存储位置，<span style="color:#FF0000;">因为如果不设置的话，hbase.rootdir默认为/tmp/hbase-${user.name},这意味着每次重启系统都会丢失数据。</span>此处设置为HBase安装目录下的hbase-tmp文件夹即（/usr/local/hbase/hbase-tmp）,添加配置如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">&lt;configuration&gt;<br>        &lt;property&gt;<br>                &lt;name&gt;hbase.rootdir&lt;/name&gt;<br>                &lt;value&gt;file:///usr/local/hbase/hbase-tmp&lt;/value&gt;<br>        &lt;/property&gt;<br>&lt;/configuration&gt;<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">3. 接下来测试运行。首先切换目录至HBase安装目录/usr/local/hbase；再启动HBase。命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">cd /usr/local/hbase<br>bin/start-hbase.sh<br>bin/hbase shell<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">上述三条命令中，sudo bin/start-hbase.sh用于启动HBase，bin/hbase shell用于打开shell命令行模式，用户可以通过输入shell命令操作HBase数据库。成功启动HBase，截图如下：<img src="http://dblab.xmu.edu.cn/blog/wp-content/uploads/2016/01/hbase-shell.png" alt="hbase shell" title="" style="border:0px;vertical-align:middle;margin-left:auto;"></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">停止HBase运行,命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">bin/stop-hbase.sh<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:#FF0000;">注意：如果在操作HBase的过程中发生错误，可以通过{HBASE_HOME}目录（/usr/local/hbase）下的logs子目录中的日志文件查看错误原因。</span></p><h4 style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;line-height:1.1;color:rgb(51,51,51);font-size:22px;border-left:6px solid rgb(52,152,219);background-color:rgb(247,247,247);">2.2 伪分布式模式配置</h4><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">1.配置/usr/local/hbase/conf/hbase-env.sh。命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">vi /usr/local/hbase/conf/hbase-env.sh<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">配置JAVA_HOME，HBASE_CLASSPATH，HBASE_MANAGES_ZK.HBASE_CLASSPATH设置为本机Hadoop安装目录下的conf目录（即/usr/local/hadoop/conf）</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64<br>export HBASE_CLASSPATH=/usr/local/hadoop/conf <br>export HBASE_MANAGES_ZK=true<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">截图如下：<img src="http://dblab.xmu.edu.cn/blog/wp-content/uploads/2016/01/%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8Fhbase.png" alt="伪分布式hbase" title="" style="border:0px;vertical-align:middle;margin-left:auto;"></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">2.配置/usr/local/hbase/conf/hbase-site.xml用命令vi打开并编辑hbase-site.xml，命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">vi /usr/local/hbase/conf/hbase-site.xml<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">修改hbase.rootdir，指定HBase数据在HDFS上的存储路径；将属性hbase.cluter.distributed设置为true。假设当前Hadoop集群运行在伪分布式模式下，在本机上运行，且NameNode运行在9000端口。</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">&lt;configuration&gt;<br>        &lt;property&gt;<br>                &lt;name&gt;hbase.rootdir&lt;/name&gt;<br>                &lt;value&gt;hdfs://localhost:9000/hbase&lt;/value&gt;<br>        &lt;/property&gt;<br>        &lt;property&gt;<br>                &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;<br>                &lt;value&gt;true&lt;/value&gt;<br>        &lt;/property&gt;<br>&lt;/configuration&gt;<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">hbase.rootdir指定HBase的存储目录；hbase.cluster.distributed设置集群处于分布式模式.截图如下：<img src="http://dblab.xmu.edu.cn/blog/wp-content/uploads/2016/01/%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AEhbase-site.xml_.png" alt="配置hbase-site.xml" style="border:0px;vertical-align:middle;margin-left:auto;"></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">3. 接下来测试运行HBase。第一步：首先登陆ssh，之前设置了无密码登陆，因此这里不需要密码；再切换目录至/usr/local/hadoop ；再启动hadoop，如果已经启动hadoop请跳过此步骤。命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">ssh localhost<br>cd /usr/local/hadoop<br>./sbin/start-dfs.sh<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">输入命令jps，能看到NameNode,DataNode和SecondaryNameNode都已经成功启动，表示hadoop启动成功，截图如下：<img src="http://dblab.xmu.edu.cn/blog/wp-content/uploads/2016/01/hadoop-jps.png" alt="hadoop jps" style="border:0px;vertical-align:middle;margin-left:auto;"></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">第二步：切换目录至/usr/local/hbase;再启动HBase.命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">cd /usr/local/hbase<br>bin/start-hbase.sh<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">启动成功，输入命令jps，看到以下界面说明hbase启动成功<img src="http://dblab.xmu.edu.cn/blog/wp-content/uploads/2016/01/hbase-jps.png" alt="hbase jps" style="border:0px;vertical-align:middle;margin-left:auto;"></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">进入shell界面：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">bin/hbase shell<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">截图如下：<img src="http://dblab.xmu.edu.cn/blog/wp-content/uploads/2016/01/hbase-shell.png" alt="hbase shell" title="" style="border:0px;vertical-align:middle;margin-left:auto;"></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">4.停止HBase运行,命令如下：</p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">bin/stop-hbase.sh<br></p><p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:#FF0000;">注意：如果在操作HBase的过程中发生错误，可以通过{HBASE_HOME}目录（/usr/local/hbase）下的logs子目录中的日志文件查看错误原因。</span><br><span style="color:#FF0000;">这里启动关闭Hadoop和HBase的顺序一定是：<br>启动Hadoop—&gt;启动HBase—&gt;关闭HBase—&gt;关闭Hadoop</span></p>            </div>
                </div>