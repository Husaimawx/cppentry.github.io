---
layout:     post
title:      eclipse远程hbase 无法连接 org.apache.hadoop.hbase.MasterNotRunningException
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<p><span style="font-size:18px;"><strong><span style="color:#ff0000;">1、问题描述：</span>使用eclipse通过hbase api访问hbase错，实验环境为eclipse安装在windows10下，hbase安装在虚拟机CentOS7下，其中Centos7
<span style="color:#ff6666;">hbase IP地址为192.168.137.11</span>  org.apache.hadoop.hbase.MasterNotRunningException</strong></span></p>
<p><span style="font-size:18px;"><strong><br></strong></span></p>
<p><span style="font-size:18px;"><strong><span style="color:#ff0000;">2、分析思路：1）</span>通过jps查看Hbase H<span style="font-size:18px;">regionserver</span>都已经启动了,排除没启动原因</strong></span></p>
<p><span style="font-size:18px;"><strong>2）查看/etc/hosts 发现 127.0.0.1 对应的域名为localhost 已经注释掉了，排除域名解析原因。</strong></span></p>
<p><span style="font-family:'Arial Black';font-size:18px;color:#009900;"><strong>#127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4<br>
#::1         localhost localhost.localdomain localhost6 localhost6.localdomain6<br></strong></span></p>
<p><span style="font-family:'Arial Black';font-size:18px;color:#ff0000;"><strong>192.168.137.11  bigdata</strong></span></p>
<p><span style="font-size:18px;"><strong> 3）然后查看Hbase和H<span style="font-size:18px;">regionserve</span>r日志（hbase/logs下）发现regionserver日志监听地址为127.0.0.1定位了<span style="color:#ff0000;">出错原因</span>：这里是<span style="font-size:18px;"><span style="color:#ff6666;">192.168.137.11
 对应的域名 bigdata 才正确</span></span></strong></span></p>
<p><span style="font-size:18px;"><strong><img src="https://img-blog.csdn.net/20160802205207372?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></strong></span></p>
<p><span style="font-size:18px;"><strong>       <img src="https://img-blog.csdn.net/20160802205157257?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></strong></span></p>
<p><span style="font-size:18px;"><strong>3、解决方案：CentOS7 图形界面设置IP时勾选了 如下图红圈所示：</strong></span></p>
<p><span style="font-size:18px;"><strong>这会是hbase启动时读取IP时，会使用127.0.0.1作为regisionserver的监听地址。因此使用CENTOS7 图形界面配置网络上一定不要改选此项。</strong></span></p>
<p><span style="font-size:18px;"><strong><img src="https://img-blog.csdn.net/20160802210209959?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></strong></span></p>
<p><span style="font-size:18px;color:#ff0000;"><strong>4、详细错误：</strong></span></p>
<p><span style="font-size:18px;"><strong>org.apache.hadoop.hbase.MasterNotRunningException: com.google.protobuf.ServiceException: java.net.ConnectException: Connection refused: no further information<br><span></span>at org.apache.hadoop.hbase.client.RpcRetryingCaller.callWithRetries(RpcRetryingCaller.java:157)<br><span></span>at org.apache.hadoop.hbase.client.HBaseAdmin.executeCallable(HBaseAdmin.java:4297)<br><span></span>at org.apache.hadoop.hbase.client.HBaseAdmin.executeCallable(HBaseAdmin.java:4289)<br><span></span>at org.apache.hadoop.hbase.client.HBaseAdmin.listTableNames(HBaseAdmin.java:518)<br><span></span>at org.apache.hadoop.hbase.client.HBaseAdmin.listTableNames(HBaseAdmin.java:502)<br><span></span>at upc.hbase.curd.ShowAllTable.listTables(ShowAllTable.java:22)<br><span></span>at upc.hbase.test.ShowAllTableName.main(ShowAllTableName.java:12)<br><span style="color:#ff0000;">Caused by: org.apache.hadoop.hbase.MasterNotRunningException:</span> com.google.protobuf.ServiceException: java.net.ConnectException: Connection refused: no further information<br><span></span>at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation$StubMaker.makeStub(ConnectionManager.java:1561)<br><span></span>at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation$MasterServiceStubMaker.makeStub(ConnectionManager.java:1581)<br><span></span>at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation.getKeepAliveMasterService(ConnectionManager.java:1738)<br><span></span>at org.apache.hadoop.hbase.client.MasterCallable.prepare(MasterCallable.java:38)<br><span></span>at org.apache.hadoop.hbase.client.RpcRetryingCaller.callWithRetries(RpcRetryingCaller.java:134)<br><span></span>... 6 more<br>
Caused by: com.google.protobuf.ServiceException: java.net.ConnectException: Connection refused: no further information<br><span></span>at org.apache.hadoop.hbase.ipc.AbstractRpcClient.callBlockingMethod(AbstractRpcClient.java:240)<br><span></span>at org.apache.hadoop.hbase.ipc.AbstractRpcClient$BlockingRpcChannelImplementation.callBlockingMethod(AbstractRpcClient.java:336)<br><span></span>at org.apache.hadoop.hbase.protobuf.generated.MasterProtos$MasterService$BlockingStub.isMasterRunning(MasterProtos.java:58383)<br><span></span>at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation$MasterServiceStubMaker.isMasterRunning(ConnectionManager.java:1592)<br><span></span>at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation$StubMaker.makeStubNoRetries(ConnectionManager.java:1530)<br><span></span>at org.apache.hadoop.hbase.client.ConnectionManager$HConnectionImplementation$StubMaker.makeStub(ConnectionManager.java:1552)<br><span></span>... 10 more<br>
Caused by: java.net.ConnectException: Connection refused: no further information<br><span></span>at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)<br><span></span>at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:717)<br><span></span>at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:206)<br><span></span>at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:529)<br><span></span>at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:493)<br><span></span>at org.apache.hadoop.hbase.ipc.RpcClientImpl$Connection.setupConnection(RpcClientImpl.java:416)<br><span></span>at org.apache.hadoop.hbase.ipc.RpcClientImpl$Connection.setupIOstreams(RpcClientImpl.java:722)<br><span></span>at org.apache.hadoop.hbase.ipc.RpcClientImpl$Connection.writeRequest(RpcClientImpl.java:906)<br><span></span>at org.apache.hadoop.hbase.ipc.RpcClientImpl$Connection.tracedWriteRequest(RpcClientImpl.java:873)<br><span></span>at org.apache.hadoop.hbase.ipc.RpcClientImpl.call(RpcClientImpl.java:1241)<br><span></span>at org.apache.hadoop.hbase.ipc.AbstractRpcClient.callBlockingMethod(AbstractRpcClient.java:227)<br><span></span>... 15 more</strong></span></p>
            </div>
                </div>