---
layout:     post
title:      Flume安装部署
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <h1>一、 <strong>Flume<span style="font-family:'黑体';">安装部署</span></strong></h1><p>l Flume的安装非常简单</p><p>上传安装包到数据源所在节点上</p><p>然后解压  tar -zxvf apache-flume-1.6.0-bin.tar.gz</p><p>然后进入flume的目录，修改conf下的flume-env.sh，在里面配置JAVA_HOME</p><p>l 根据数据采集需求<strong>配置采集方案</strong>，描述在配置文件中(文件名可任意自定义)</p><p>l <strong>指定采集方案配置文件</strong>，在相应的节点上启动flume agent</p><p> </p><p>先用一个最简单的例子来测试一下程序环境是否正常</p><p>1、<strong>先在<span style="font-family:Calibri;">flume</span><span style="font-family:'宋体';">的</span><span style="font-family:Calibri;">conf</span><span style="font-family:'宋体';">目录下新建一个文件</span></strong></p><p>vi   netcat-logger.conf</p><table><tbody><tr><td valign="top"><p># <span style="font-family:'宋体';">定义这个</span><span style="font-family:Calibri;">agent</span><span style="font-family:'宋体';">中各组件的名字</span></p><p>a1.sources = r1</p><p>a1.sinks = k1</p><p>a1.channels = c1</p><p> </p><p># <span style="font-family:'宋体';">描述和配置</span><span style="font-family:Calibri;">source</span><span style="font-family:'宋体';">组件：</span><span style="font-family:Calibri;">r1</span></p><p>a1.sources.r1.type = netcat</p><p>a1.sources.r1.bind = localhost</p><p>a1.sources.r1.port = 44444</p><p> </p><p># <span style="font-family:'宋体';">描述和配置</span><span style="font-family:Calibri;">sink</span><span style="font-family:'宋体';">组件：</span><span style="font-family:Calibri;">k1</span></p><p>a1.sinks.k1.type = logger</p><p> </p><p># <span style="font-family:'宋体';">描述和配置</span><span style="font-family:Calibri;">channel</span><span style="font-family:'宋体';">组件，此处使用是内存缓存的方式</span></p><p>a1.channels.c1.type = memory</p><p>a1.channels.c1.capacity = 1000</p><p>a1.channels.c1.transactionCapacity = 100</p><p> </p><p># <span style="font-family:'宋体';">描述和配置</span><span style="font-family:Calibri;">source  channel   sink</span><span style="font-family:'宋体';">之间的连接关系</span></p><p>a1.sources.r1.channels = c1</p><p>a1.sinks.k1.channel = c1</p></td></tr></tbody></table><p><strong> </strong></p><p>2、<strong>启动<span style="font-family:Calibri;">agent</span><span style="font-family:'宋体';">去采集数据</span></strong></p><table><tbody><tr><td valign="top"><p>bin/flume-ng agent -c conf -f conf/netcat-logger.conf -n a1  -Dflume.root.logger=INFO,console</p></td></tr></tbody></table><p>-c conf   指定flume自身的配置文件所在目录</p><p>-f conf/netcat-logger.con  指定我们所描述的采集方案</p><p>-name a1  指定我们这个agent的名字</p><p>3、<strong>测试</strong></p><p>先要往agent采集监听的端口上发送数据，让agent有数据可采。</p><p>随便在一个能跟agent节点联网的机器上：</p><p>telnet anget-hostname  port   （telnet localhost 44444）</p>            </div>
                </div>