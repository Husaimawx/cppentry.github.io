---
layout:     post
title:      eclipse 远程Debug Hbase
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">我们学习任何一项技术，要想深入研究，都需要对源码进行debug，在学习HBase的过程更是避免不了debug，下面说明怎么样配置才能让eclipse远程调试Hbase。</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">进入hbase 的bin目录下，用vi编辑hbase文件。hbase的shell脚本。也是hbase启动的核心脚本。找到下面这一部分。在结尾部分。</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">unset IFS</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);"># figure out which class to run</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">if [ "$COMMAND" = "shell" ] ; then</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  CLASS="org.jruby.Main ${HBASE_HOME}/bin/hirb.rb"</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">elif [ "$COMMAND" = "master" ] ; then</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  CLASS='org.apache.hadoop.hbase.master.HMaster'</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  if [ "$1" != "stop" ] ; then</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">    HBASE_OPTS="$HBASE_OPTS $HBASE_MASTER_OPTS </span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  fi</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">elif [ "$COMMAND" = "regionserver" ] ; then</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  CLASS='org.apache.hadoop.hbase.regionserver.HRegionServer'</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  if [ "$1" != "stop" ] ; then</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">    HBASE_OPTS="$HBASE_OPTS $HBASE_REGIONSERVER_OPTS"</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  fi</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">elif [ "$COMMAND" = "thrift" ] ; then</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  CLASS='org.apache.hadoop.hbase.thrift.ThriftServer'</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  if [ "$1" != "stop" ] ; then</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">    HBASE_OPTS="$HBASE_OPTS $HBASE_THRIFT_OPTS"</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  fi</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">elif [ "$COMMAND" = "rest" ] ; then（后没还有，这里只截了一部分）</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">在COMMAND" = "master"的模块中给HBASE_OPTS 加 上" -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=10444"
 这个JPDA参数。</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">加完后是这样的：</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">elif [ "$COMMAND" = "master" ] ; then</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  CLASS='org.apache.hadoop.hbase.master.HMaster'</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  if [ "$1" != "stop" ] ; then</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><strong><span style="font-size:18px;"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;line-height:25px;text-align:left;background-color:rgb(204,206,208);">    </span><span style="color:rgb(255,0,0);line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;text-align:left;background-color:rgb(204,206,208);">HBASE_OPTS="$HBASE_OPTS
 $HBASE_MASTER_OPTS -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=10444"</span></span></strong><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">  fi</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">保存 hbase文件，重新启动hbase，有朋友可能会问，怎么起动这个debug生效。还是和原来一样启动，</span><br style="line-height:25px;font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;text-align:left;background-color:rgb(204,206,208);"><p><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">命令为：./bin/start-hbase.sh 启动成功后，hbase会打印日志，告诉你debug的端口为10444，说明debug配置成功。</span></p>
<p style="text-align:left;"><span style="font-family:Arial, Helvetica, simsun, u5b8bu4f53;"><span style="font-size:14px;line-height:25px;">原文地址：<span style="color:rgb(255,0,0);font-family:Arial, Helvetica, simsun, u5b8bu4f53;font-size:14px;line-height:25px;text-align:left;background-color:rgb(204,206,208);">http://ronxin999.blog.163.com/blog/static/422179202012510858349/</span></span></span></p>
            </div>
                </div>