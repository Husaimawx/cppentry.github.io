---
layout:     post
title:      HBase备份之导入导出
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<div class="article_title" style="font-family:'microsoft yahei';">
<br></div>
<div id="article_content" class="article_content">
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
我们在上一篇文章《<a href="http://blog.csdn.net/iam333/article/details/38264411" rel="nofollow" style="text-decoration:none;color:rgb(12,137,207);">HBase复制</a>》中讲述了如何建立主/从集群，实现数据的实时备份。但是，HBase复制只对设置好复制以后的数据生效，也即，配置好复制之后插入HBase主集群的数据才能同步复制到HBase从集群中，而对之前的历史数据，采用HBase复制这种办法是无能为力的。本文介绍如何使用HBase的导入导出功能来实现历史数据的备份。</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
1）将HBase表数据导出到hdfs的一个指定目录中，具体命令如下：</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<div class="dp-highlighter bg_plain" style="color:rgb(85,85,85);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;line-height:35px;border:1px dashed rgb(204,204,204);overflow:hidden;background-color:rgb(245,245,245);">
<div class="bar" style="background-color:rgb(221,221,221);">
<div class="tools" style="font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;">
<strong>[plain]</strong> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="ViewSource" title="view plain" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">view
 plain</a><span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="CopyToClipboard" title="copy" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">copy</a></span>
<div style="width:27px;z-index:99;">
</div>
<span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="PrintSource" title="print" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">print</a></span><a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="About" title="?" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">?</a></div>
</div>
<ol start="1" style="border:none;color:rgb(92,92,92);"><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ cd $HBASE_HOME/  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ bin/hbase org.apache.hadoop.hbase.mapreduce.Export test_table /data/test_table  </span></li></ol></div>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
其中，$HBASE_HOME为HBase主目录，test_table为要导出的表名，/data/test_table为hdfs中的目录地址。</p>
<span style="font-family:'microsoft yahei';color:#555555;"><span style="font-size:15px;line-height:35px;">执行结果太长，这里截取最后一部分，如下所示：</span></span>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<div class="dp-highlighter bg_plain" style="color:rgb(85,85,85);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;line-height:35px;border:1px dashed rgb(204,204,204);overflow:hidden;background-color:rgb(245,245,245);">
<div class="bar" style="background-color:rgb(221,221,221);">
<div class="tools" style="font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;">
<strong>[plain]</strong> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="ViewSource" title="view plain" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">view
 plain</a><span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="CopyToClipboard" title="copy" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">copy</a></span>
<div style="width:27px;z-index:99;">
</div>
<span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="PrintSource" title="print" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">print</a></span><a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="About" title="?" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">?</a></div>
</div>
<ol start="1" style="border:none;color:rgb(92,92,92);"><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 16:49:44,484 INFO  [main] mapreduce.Job: Running job: job_1407491918245_0021  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 16:49:51,658 INFO  [main] mapreduce.Job: Job job_1407491918245_0021 running in uber mode : false  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 16:49:51,659 INFO  [main] mapreduce.Job:  map 0% reduce 0%  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 16:49:57,706 INFO  [main] mapreduce.Job:  map 100% reduce 0%  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 16:49:57,715 INFO  [main] mapreduce.Job: Job job_1407491918245_0021 completed successfully  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 16:49:57,789 INFO  [main] mapreduce.Job: Counters: 37  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    File System Counters  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of bytes read=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of bytes written=118223  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of read operations=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of large read operations=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of write operations=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of bytes read=84  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of bytes written=243  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of read operations=4  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of large read operations=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of write operations=2  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    Job Counters   </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Launched map tasks=1  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Rack-local map tasks=1  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Total time spent by all maps in occupied slots (ms)=9152  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Total time spent by all reduces in occupied slots (ms)=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    Map-Reduce Framework  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Map input records=3  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Map output records=3  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Input split bytes=84  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Spilled Records=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Failed Shuffles=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Merged Map outputs=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        GC time elapsed (ms)=201  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        CPU time spent (ms)=5210  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Physical memory (bytes) snapshot=377470976  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Virtual memory (bytes) snapshot=1863364608  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Total committed heap usage (bytes)=1029177344  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    HBase Counters  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        BYTES_IN_REMOTE_RESULTS=87  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        BYTES_IN_RESULTS=87  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        MILLIS_BETWEEN_NEXTS=444  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        NOT_SERVING_REGION_EXCEPTION=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        NUM_SCANNER_RESTARTS=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        REGIONS_SCANNED=1  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        REMOTE_RPC_CALLS=3  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        REMOTE_RPC_RETRIES=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        RPC_CALLS=3  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        RPC_RETRIES=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    File Input Format Counters   </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Bytes Read=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    File Output Format Counters   </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Bytes Written=243  </span></li></ol></div>
<span style="font-family:'microsoft yahei';color:#555555;"><span style="font-size:15px;line-height:35px;">查看以下指定的导出目录，命令如下：</span></span>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<div class="dp-highlighter bg_plain" style="color:rgb(85,85,85);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;line-height:35px;border:1px dashed rgb(204,204,204);overflow:hidden;background-color:rgb(245,245,245);">
<div class="bar" style="background-color:rgb(221,221,221);">
<div class="tools" style="font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;">
<strong>[plain]</strong> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="ViewSource" title="view plain" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">view
 plain</a><span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="CopyToClipboard" title="copy" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">copy</a></span>
<div style="width:27px;z-index:99;">
</div>
<span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="PrintSource" title="print" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">print</a></span><a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="About" title="?" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">?</a></div>
</div>
<ol start="1" style="border:none;color:rgb(92,92,92);"><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ cd $HADOOP_HOME/  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ bin/hadoop fs -ls /data/test_table  </span></li></ol></div>
<span style="font-family:'microsoft yahei';color:#555555;"><span style="font-size:15px;line-height:35px;">其中$HADOOP_HOME为hadoop的主目录。结果如下：</span></span>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<div class="dp-highlighter bg_plain" style="color:rgb(85,85,85);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;line-height:35px;border:1px dashed rgb(204,204,204);overflow:hidden;background-color:rgb(245,245,245);">
<div class="bar" style="background-color:rgb(221,221,221);">
<div class="tools" style="font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;">
<strong>[plain]</strong> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="ViewSource" title="view plain" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">view
 plain</a><span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="CopyToClipboard" title="copy" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">copy</a></span>
<div style="width:27px;z-index:99;">
</div>
<span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="PrintSource" title="print" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">print</a></span><a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="About" title="?" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">?</a></div>
</div>
<ol start="1" style="border:none;color:rgb(92,92,92);"><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">Found 2 items  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">-rw-r--r--   3 hbase supergroup          0 2014-08-11 16:49 /data/test_table/_SUCCESS  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">-rw-r--r--   3 hbase supergroup        243 2014-08-11 16:49 /data/test_table/part-m-00000  </span></li></ol></div>
<span style="font-family:'microsoft yahei';color:#555555;"><span style="font-size:15px;line-height:35px;">执行以下hbase shell命令，查看以下test_table表中的数据：</span></span>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<div class="dp-highlighter bg_plain" style="color:rgb(85,85,85);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;line-height:35px;border:1px dashed rgb(204,204,204);overflow:hidden;background-color:rgb(245,245,245);">
<div class="bar" style="background-color:rgb(221,221,221);">
<div class="tools" style="font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;">
<strong>[plain]</strong> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="ViewSource" title="view plain" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">view
 plain</a><span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="CopyToClipboard" title="copy" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">copy</a></span>
<div style="width:27px;z-index:99;">
</div>
<span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="PrintSource" title="print" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">print</a></span><a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="About" title="?" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">?</a></div>
</div>
<ol start="1" style="border:none;color:rgb(92,92,92);"><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ cd $HBASE_HOME/  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ bin/hbase shell  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 17:05:52,589 INFO  [main] Configuration.deprecation: hadoop.native.lib is deprecated. Instead, use io.native.lib.available  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">HBase Shell; enter 'help&lt;RETURN&gt;' for list of supported commands.  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">Type "exit&lt;RETURN&gt;" to leave the HBase Shell  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">Version 0.98.2-hadoop2, r1591526, Wed Apr 30 20:17:33 PDT 2014  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">hbase(main):001:0&gt; describe 'test_table'  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">DESCRIPTION                                                                                                                               ENABLED                                                                      </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;"> 'test_table', {NAME =&gt; 'cf', DATA_BLOCK_ENCODING =&gt; 'NONE', BLOOMFILTER =&gt; 'ROW', REPLICATION_SCOPE =&gt; '1', COMPRESSION =&gt; 'NONE', VERSIONS =&gt; true                                                                        </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">  '1', TTL =&gt; '2147483647', MIN_VERSIONS =&gt; '0', KEEP_DELETED_CELLS =&gt; 'false', BLOCKSIZE =&gt; '65536', IN_MEMORY =&gt; 'false', BLOCKCACHE =&gt;                                                                              </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">  'true'}                                                                                                                                                                                                              </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">1 row(s) in 1.3400 seconds  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">hbase(main):002:0&gt; scan 'test_table'  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">ROW                                                    COLUMN+CELL                                                                                                                                                     </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;"> r1                                                    column=cf:q1, timestamp=1406788229440, value=va1                                                                                                                </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;"> r2                                                    column=cf:q1, timestamp=1406788265646, value=va2                                                                                                                </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;"> r3                                                    column=cf:q1, timestamp=1406788474301, value=va3                                                                                                                </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">3 row(s) in 0.0560 seconds  </span></li></ol></div>
<span style="font-family:'microsoft yahei';color:#555555;"><span style="font-size:15px;line-height:35px;">至此，HBase表数据导出结束。接下来开始导入工作。</span></span>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
2）将导出到hdfs中的数据导入到hbase创建好的表中。注意，该表可以和之前的表不同名，但模式一定要相同。我们领取一个名字，使用test_copy这个表名。创建表的命令如下：</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<div class="dp-highlighter bg_plain" style="color:rgb(85,85,85);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;line-height:35px;border:1px dashed rgb(204,204,204);overflow:hidden;background-color:rgb(245,245,245);">
<div class="bar" style="background-color:rgb(221,221,221);">
<div class="tools" style="font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;">
<strong>[plain]</strong> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="ViewSource" title="view plain" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">view
 plain</a><span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="CopyToClipboard" title="copy" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">copy</a></span>
<div style="width:27px;z-index:99;">
</div>
<span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="PrintSource" title="print" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">print</a></span><a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="About" title="?" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">?</a></div>
</div>
<ol start="1" style="border:none;color:rgb(92,92,92);"><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ cd $HBASE_HOME/  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ bin/hbase shell  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 17:05:52,589 INFO  [main] Configuration.deprecation: hadoop.native.lib is deprecated. Instead, use io.native.lib.available  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">HBase Shell; enter 'help&lt;RETURN&gt;' for list of supported commands.  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">Type "exit&lt;RETURN&gt;" to leave the HBase Shell  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">Version 0.98.2-hadoop2, r1591526, Wed Apr 30 20:17:33 PDT 2014  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">hbase(main):001:0&gt; create 'test_copy', 'cf'  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">0 row(s) in 1.1980 seconds  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">=&gt; Hbase::Table - test_copy  </span></li></ol></div>
<span style="font-family:'microsoft yahei';color:#555555;"><span style="font-size:15px;line-height:35px;">接下来，执行导入命令。具体的命令如下：</span></span>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<div class="dp-highlighter bg_plain" style="color:rgb(85,85,85);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;line-height:35px;border:1px dashed rgb(204,204,204);overflow:hidden;background-color:rgb(245,245,245);">
<div class="bar" style="background-color:rgb(221,221,221);">
<div class="tools" style="font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;">
<strong>[plain]</strong> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="ViewSource" title="view plain" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">view
 plain</a><span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="CopyToClipboard" title="copy" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">copy</a></span>
<div style="width:27px;z-index:99;">
</div>
<span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="PrintSource" title="print" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">print</a></span><a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="About" title="?" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">?</a></div>
</div>
<ol start="1" style="border:none;color:rgb(92,92,92);"><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ cd $HBASE_HOME/  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ bin/hbase org.apache.hadoop.hbase.mapreduce.Import test_copy hdfs://l-master.data/data/test_table  </span></li></ol></div>
<span style="font-family:'microsoft yahei';color:#555555;"><span style="font-size:15px;line-height:35px;">其中，test_copy为我们想要导入的表名。而hdfs://l-master.data/data/test_table为master集群的hdfs中，我们之前将test_table表导出hdfs的全路径。</span></span>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
导入命令执行的结果如下，因为结果很长，所以取最后一部分：</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<div class="dp-highlighter bg_plain" style="color:rgb(85,85,85);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;line-height:35px;border:1px dashed rgb(204,204,204);overflow:hidden;background-color:rgb(245,245,245);">
<div class="bar" style="background-color:rgb(221,221,221);">
<div class="tools" style="font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;">
<strong>[plain]</strong> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="ViewSource" title="view plain" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">view
 plain</a><span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="CopyToClipboard" title="copy" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">copy</a></span>
<div style="width:27px;z-index:99;">
</div>
<span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="PrintSource" title="print" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">print</a></span><a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="About" title="?" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">?</a></div>
</div>
<ol start="1" style="border:none;color:rgb(92,92,92);"><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 17:13:08,706 INFO  [main] mapreduce.Job:  map 100% reduce 0%  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 17:13:08,710 INFO  [main] mapreduce.Job: Job job_1407728839061_0014 completed successfully  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 17:13:08,715 INFO  [main] mapreduce.Job: Counters: 27  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    File System Counters  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of bytes read=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of bytes written=117256  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of read operations=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of large read operations=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        FILE: Number of write operations=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of bytes read=356  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of bytes written=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of read operations=3  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of large read operations=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        HDFS: Number of write operations=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    Job Counters   </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Launched map tasks=1  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Rack-local map tasks=1  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Total time spent by all maps in occupied slots (ms)=6510  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Total time spent by all reduces in occupied slots (ms)=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    Map-Reduce Framework  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Map input records=3  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Map output records=3  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Input split bytes=113  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Spilled Records=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Failed Shuffles=0  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Merged Map outputs=0  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        GC time elapsed (ms)=21  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        CPU time spent (ms)=1110  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Physical memory (bytes) snapshot=379494400  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Virtual memory (bytes) snapshot=1855762432  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Total committed heap usage (bytes)=1029177344  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    File Input Format Counters   </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Bytes Read=243  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">    File Output Format Counters   </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">        Bytes Written=0  </span></li></ol></div>
<span style="font-family:'microsoft yahei';color:#555555;"><span style="font-size:15px;line-height:35px;">接下来，我们看看从集群test_copy表中的数据是否和主集群test_table表的数据一致，执行hbase shell命令：</span></span>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;">
</p>
<div class="dp-highlighter bg_plain" style="color:rgb(85,85,85);font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;line-height:35px;border:1px dashed rgb(204,204,204);overflow:hidden;background-color:rgb(245,245,245);">
<div class="bar" style="background-color:rgb(221,221,221);">
<div class="tools" style="font-size:9px;line-height:normal;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:#C0C0C0;">
<strong>[plain]</strong> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="ViewSource" title="view plain" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">view
 plain</a><span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="CopyToClipboard" title="copy" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">copy</a></span>
<div style="width:27px;z-index:99;">
</div>
<span> <a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="PrintSource" title="print" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">print</a></span><a href="http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral#" rel="nofollow" class="About" title="?" style="text-decoration:none;border:none;font-size:9px;color:rgb(12,137,207);background-color:inherit;">?</a></div>
</div>
<ol start="1" style="border:none;color:rgb(92,92,92);"><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ cd $HBASE_HOME/  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">$ bin/hbase shell  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">2014-08-11 17:15:52,117 INFO  [main] Configuration.deprecation: hadoop.native.lib is deprecated. Instead, use io.native.lib.available  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">HBase Shell; enter 'help&lt;RETURN&gt;' for list of supported commands.  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">Type "exit&lt;RETURN&gt;" to leave the HBase Shell  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">Version 0.98.2-hadoop2, r1591526, Wed Apr 30 20:17:33 PDT 2014  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">  </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">hbase(main):001:0&gt; scan 'test_copy'  </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">ROW                                                    COLUMN+CELL                                                                                                                                                     </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;"> r1                                                    column=cf:q1, timestamp=1406788229440, value=va1                                                                                                                </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;"> r2                                                    column=cf:q1, timestamp=1406788265646, value=va2                                                                                                                </span></li><li style="border:none;list-style:outside;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;"> r3                                                    column=cf:q1, timestamp=1406788474301, value=va3                                                                                                                </span></li><li class="alt" style="border:none;list-style:outside;color:inherit;line-height:13.2px;">
<span style="border:none;color:#000000;background-color:inherit;">3 row(s) in 0.3640 seconds  </span></li></ol></div>
<span style="font-family:'microsoft yahei';color:#555555;"><span style="font-size:15px;line-height:35px;">对照后，就可以发现，两个表的数据是完全一致的。</span></span><br><br><span style="font-family:'微软雅黑';color:#000099;"><span style="font-size:14px;line-height:26px;"><strong>原文地址：http://blog.csdn.net/iam333/article/details/38495617?utm_source=tuicool&amp;utm_medium=referral</strong></span></span></div>
            </div>
                </div>