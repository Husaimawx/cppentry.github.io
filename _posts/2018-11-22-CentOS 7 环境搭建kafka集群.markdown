---
layout:     post
title:      CentOS 7 环境搭建kafka集群
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <span style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"> Kafka是一个MQ服务，流行的MQ服务器有三个，分别是ActiveMQ，RabbbitMQ和Kafka</span><br style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"><br style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"><span style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);">目录说明：</span><br style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"><span style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);">/home/fuqinqin/packages : 安装包存放目录</span><br style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"><span style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);">/home/fuqinqin/kafka ： kafka安装目录</span><br style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"><br style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"><span style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);">1 . 下载安装包</span><br style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"><span style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);">进入packages目录，下载安装包</span><br style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"><span style="color:rgb(0,0,0);font-family:punctuation, '微软雅黑', Tohoma;font-size:14px;background-color:rgb(255,255,255);"><span><span style="color:rgb(88,90,194);"><span style="color:rgb(0,0,0);">wget</span> <span style="color:rgb(0,0,0);"><a href="http://mirrors.hust.edu.cn/apache/kafka/1.0.1/kafka_2.11-1.0.1.tgz" rel="nofollow" style="color:rgb(38,112,154);">http://mirrors.hust.edu.cn/apache/kafka/1.0.1/kafka_2.11-1.0.1.tgz</a><br></span></span>2. 解压<br>tar -zxvf ./kafka_2.12-1.0.1.tgz -C ../kafka<img alt="图片" src="http://a2.qpic.cn/psb?/81991249-661e-4a01-af7d-b2cac3d1e73e/GTtpz5BVdPay*bb2*imSKTFhRb*aNtBs4rEBC9H1918!/b/dEUBAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=VgM2AFYDNgADEDU!&amp;su=074062321&amp;tm=1523113200&amp;sce=0-12-12&amp;rf=2-9" style="border-width:0px;border-style:none;vertical-align:top;"><br><span>3.  在kafka目录下新建kafkaLogs文件夹，存放日志<br></span></span><span>mkdir kafkaLogs</span><br><br><span>4. 进入根目录下的/connfig目录，编辑 server.properties 文件<br></span>改动1：broker.id 节点身份标志，从0开始的自然数<br>改动2：放开listeners=PLAINTEXT://192.168.227.130:9092，修改成节点的ip，端口采用默认值即可<br>改动3：log.dirs。刚才新建的kafkaLogs文件夹的绝对路径<br>改动4：num.partitions。topic主题的分区数量，默认是1个，改成2个<br>改动5：新增三个新属性：<br>        message.max.byte=512000</span><div>        # 副本数目，2个比较保险</div><div>        default.replication.factor=2</div><div>        replica.fetch.max.byte=512000<br><span>改动6：</span>zookeeper.connect 。zookeeper集群环境的显示申明，用于协调kafka分布式环境的一致性工作。<br><span></span><div>zookeeper.connect=192.168.227.130:2181,192.168.227.133:2181,192.168.227.135:2181<br><span>设置各个节点的ip，端口视搭建zookeeper集群的情况而定，如果zookeeper的端口改变，这里也需要改变，一般采用默认端口 </span></div><br></div>至此，配置文件配置完毕！<br><br>5. 在其余两台的节点上做相同工作。<br>6. 启动服务<br>进入bin目录，执行： ./kafka-server-start.sh -daemon ../config/server.properties<br>-daemon : 后台运行<br>./config/server.properties ： 指定的配置文件<br>7. 创建消息的生产者和消费者验证集群是否搭建成功<br>官网文档：<a href="http://kafka.apache.org/quickstart" rel="nofollow" style="color:rgb(38,112,154);">http://kafka.apache.org/quickstart</a><br>8. 通过 jps 命令也可辅助查看进程是否启动成功<br><br>至此，kafka的集群已经搭建完毕！！！            </div>
                </div>