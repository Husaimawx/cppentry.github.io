---
layout:     post
title:      hadoop2.2.0安装详解
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<span></span><strong><span style="font-family:SimSun;font-size:12pt;">关</span><span style="font-size:12pt;">于<span>Hadoop2.2.0</span>版本的改善</span></strong><br><ul type="disc"><li style="text-align:left;"><span style="font-size:12pt;">①</span><span style="font-size:12pt;">新的<span> Hadoop MapReduce</span>框架<span> YARN</span></span></li><li style="text-align:left;"><span style="font-size:12pt;">②HDFS </span><span style="font-size:12pt;">高可用性<span></span></span></li><li style="text-align:left;"><span style="font-size:12pt;">③HDFS Federation</span><span style="font-size:12pt;">（<span>HDFS</span></span><span style="font-family:SimSun;font-size:12pt;">联</span><span style="font-size:12pt;">盟）：使得<span> HDFS</span>支持多个命名空</span><span style="font-family:SimSun;font-size:12pt;">间</span><span style="font-size:12pt;">，并且允</span><span style="font-family:SimSun;font-size:12pt;">许</span><span style="font-size:12pt;">在<span>
 HDFS</span>中同</span><span style="font-family:SimSun;font-size:12pt;">时</span><span style="font-size:12pt;">存在多个<span> Name Node</span></span></li><li style="text-align:left;"><span style="font-size:12pt;">④HDFS </span><span style="font-size:12pt;">快照<span></span></span></li><li style="text-align:left;"><span style="font-size:12pt;">⑤NFSv3 </span><span style="font-size:12pt;">可</span><span style="font-family:SimSun;font-size:12pt;">访问</span><span style="font-size:12pt;"> HDFS</span><span style="font-size:12pt;">中的数据</span><span style="font-size:12pt;"></span></li><li style="text-align:left;"><span style="font-size:12pt;">⑥</span><span style="font-size:12pt;">支持在<span> Windows</span>平台上运行<span> Hadoop</span></span></li><li style="text-align:left;"><span style="font-size:12pt;">⑦</span><span style="font-size:12pt;">兼容基于<span> Hadoop 1.x</span>构建的<span> MapReduce
</span></span><span style="font-family:SimSun;font-size:12pt;">应</span><span style="font-size:12pt;">用<span></span></span></li><li style="text-align:left;"><span style="font-size:12pt;">⑧</span><span style="font-size:12pt;">大量</span><span style="font-family:SimSun;font-size:12pt;">针对</span><span style="font-size:12pt;">生</span><span style="font-family:SimSun;font-size:12pt;">态</span><span style="font-size:12pt;">系</span><span style="font-family:SimSun;font-size:12pt;">统</span><span style="font-size:12pt;">中其他</span><span style="font-family:SimSun;font-size:12pt;">项</span><span style="font-size:12pt;">目的集成</span><span style="font-family:SimSun;font-size:12pt;">测试</span><span style="font-size:12pt;"></span></li></ul><p align="left"><strong><span style="font-family:SimSun;font-size:12pt;">关</span><span style="font-size:12pt;">于</span><span style="font-size:12pt;">Hadoop2.2.0</span><span style="font-size:12pt;">升</span><span style="font-family:SimSun;font-size:12pt;">级</span><span style="font-size:12pt;">的注意事</span><span style="font-family:SimSun;font-size:12pt;">项</span></strong><span style="font-size:12pt;"></span></p>
<ul type="disc"><li style="text-align:left;"><span style="font-size:12pt;">①HDFS </span><span style="font-size:12pt;">社区建</span><span style="font-family:SimSun;font-size:12pt;">议</span><span style="font-size:12pt;">将</span><span style="font-size:12pt;"> symlinks</span><span style="font-size:12pt;">功能从</span><span style="font-size:12pt;">
 2.3</span><span style="font-size:12pt;">版本中移除，目前</span><span style="font-family:SimSun;font-size:12pt;">该</span><span style="font-size:12pt;">功能已停用</span><span style="font-size:12pt;"></span></li><li style="text-align:left;"><span style="font-size:12pt;">②</span><span style="font-size:12pt;">在新的<span> YARN/MapReduce</span>中，用</span><span style="font-family:SimSun;font-size:12pt;">户</span><span style="font-size:12pt;">需要更改<span> ShuffleHandler</span>服</span><span style="font-family:SimSun;font-size:12pt;">务</span><span style="font-size:12pt;">名称<span>——</span>需要将<span>
 mapreduce.shuffle</span>改</span><span style="font-family:SimSun;font-size:12pt;">为</span><span style="font-size:12pt;"> mapreduce_shuffle</span></li></ul><p align="left"><strong><span style="font-family:SimSun;font-size:12pt;">关</span><span style="font-size:12pt;">于<span>YARN</span>的介</span><span style="font-family:SimSun;font-size:12pt;">绍</span></strong><span style="font-size:12pt;"></span></p>
<ul type="disc"><li style="text-align:left;"><span style="font-size:12pt;">①</span><span style="font-family:SimSun;font-size:12pt;">这</span><span style="font-size:12pt;">个</span><span style="font-family:SimSun;font-size:12pt;">设计</span><span style="font-size:12pt;">大大减小了<span>
 JobTracker</span>（也就是</span><span style="font-family:SimSun;font-size:12pt;">现</span><span style="font-size:12pt;">在的<span> ResourceManager</span>）的</span><span style="font-family:SimSun;font-size:12pt;">资</span><span style="font-size:12pt;">源消耗，并且</span><span style="font-family:SimSun;font-size:12pt;">让监测每</span><span style="font-size:12pt;">一个<span>
 Job </span>子任</span><span style="font-family:SimSun;font-size:12pt;">务</span><span style="font-size:12pt;"> (tasks)</span><span style="font-size:12pt;">状</span><span style="font-family:SimSun;font-size:12pt;">态</span><span style="font-size:12pt;">的程序分布式化了，更安全、更</span><span style="font-family:SimSun;font-size:12pt;">优</span><span style="font-size:12pt;">美。<span></span></span></li><li style="text-align:left;"><span style="font-size:12pt;">②</span><span style="font-size:12pt;">在新的<span> Yarn</span>中，<span>ApplicationMaster
</span>是一个可</span><span style="font-family:SimSun;font-size:12pt;">变</span><span style="font-size:12pt;">更的部分，用</span><span style="font-family:SimSun;font-size:12pt;">户</span><span style="font-size:12pt;">可以</span><span style="font-family:SimSun;font-size:12pt;">对</span><span style="font-size:12pt;">不同的</span><span style="font-family:SimSun;font-size:12pt;">编</span><span style="font-size:12pt;">程模型写自己的<span>AppMst</span>，</span><span style="font-family:SimSun;font-size:12pt;">让</span><span style="font-size:12pt;">更多</span><span style="font-family:SimSun;font-size:12pt;">类</span><span style="font-size:12pt;">型的</span><span style="font-family:SimSun;font-size:12pt;">编</span><span style="font-size:12pt;">程模型能</span><span style="font-family:SimSun;font-size:12pt;">够</span><span style="font-size:12pt;">跑在<span>
 Hadoop </span>集群中<span></span></span></li><li style="text-align:left;"><span style="font-size:12pt;">③</span><span style="font-family:SimSun;font-size:12pt;">对</span><span style="font-size:12pt;">于</span><span style="font-family:SimSun;font-size:12pt;">资</span><span style="font-size:12pt;">源的表示以内存</span><span style="font-family:SimSun;font-size:12pt;">为单</span><span style="font-size:12pt;">位</span><span style="font-size:12pt;">
 ( </span><span style="font-size:12pt;">在目前版本的</span><span style="font-size:12pt;"> Yarn</span><span style="font-size:12pt;">中，没有考</span><span style="font-family:SimSun;font-size:12pt;">虑</span><span style="font-size:12pt;"> cpu</span><span style="font-size:12pt;">的占用</span><span style="font-size:12pt;">
 )</span><span style="font-size:12pt;">，比之前以剩余</span><span style="font-size:12pt;"> slot</span><span style="font-size:12pt;">数目更合理。</span><span style="font-size:12pt;"></span></li><li style="text-align:left;"><span style="font-size:12pt;">④</span><span style="font-size:12pt;">老的框架中，<span>JobTracker</span>一个很大的</span><span style="font-family:SimSun;font-size:12pt;">负</span><span style="font-size:12pt;">担就是</span><span style="font-family:SimSun;font-size:12pt;">监</span><span style="font-size:12pt;">控<span>
 job</span>下的<span> tasks </span>的运行状况，</span><span style="font-family:SimSun;font-size:12pt;">现</span><span style="font-size:12pt;">在，</span><span style="font-family:SimSun;font-size:12pt;">这</span><span style="font-size:12pt;">个部分就扔</span><span style="font-family:SimSun;font-size:12pt;">给</span><span style="font-size:12pt;">
 ApplicationMaster </span><span style="font-size:12pt;">做了，而<span> ResourceManager</span>中有一个模</span><span style="font-family:SimSun;font-size:12pt;">块</span><span style="font-size:12pt;">叫做<span> ApplicationsMasters(</span>注意不是<span> ApplicationMaster)</span>，它是</span><span style="font-family:SimSun;font-size:12pt;">监测</span><span style="font-size:12pt;"><span>ApplicationMaster
</span>的运行状况，如果出</span><span style="font-family:SimSun;font-size:12pt;">问题</span><span style="font-size:12pt;">，会将其在其他机器上重启。<span></span></span></li><li style="text-align:left;"><span style="font-size:12pt;">⑤Container </span><span style="font-size:12pt;">是<span> Yarn</span></span><span style="font-family:SimSun;font-size:12pt;">为</span><span style="font-size:12pt;">了将来作</span><span style="font-family:SimSun;font-size:12pt;">资</span><span style="font-size:12pt;">源隔离而提出的一个框架。</span><span style="font-family:SimSun;font-size:12pt;">这</span><span style="font-size:12pt;">一点</span><span style="font-family:SimSun;font-size:12pt;">应该</span><span style="font-size:12pt;">借</span><span style="font-family:SimSun;font-size:12pt;">鉴</span><span style="font-size:12pt;">了<span>
 Mesos </span>的工作，目前是一个框架，</span><span style="font-family:SimSun;font-size:12pt;">仅仅</span><span style="font-size:12pt;">提供<span> java</span>虚</span><span style="font-family:SimSun;font-size:12pt;">拟</span><span style="font-size:12pt;">机内存的隔离<span> ,hadoop</span></span><span style="font-family:SimSun;font-size:12pt;">团队</span><span style="font-size:12pt;">的</span><span style="font-family:SimSun;font-size:12pt;">设计</span><span style="font-size:12pt;">思路</span><span style="font-family:SimSun;font-size:12pt;">应该</span><span style="font-size:12pt;">后</span><span style="font-family:SimSun;font-size:12pt;">续</span><span style="font-size:12pt;">能支持更多的</span><span style="font-family:SimSun;font-size:12pt;">资</span><span style="font-size:12pt;">源</span><span style="font-family:SimSun;font-size:12pt;">调</span><span style="font-size:12pt;">度和控制<span>
 , </span>既然</span><span style="font-family:SimSun;font-size:12pt;">资</span><span style="font-size:12pt;">源表示成内存量，那就没有了之前的<span> map slot/reduce slot</span>分</span><span style="font-family:SimSun;font-size:12pt;">开</span><span style="font-size:12pt;">造成集群</span><span style="font-family:SimSun;font-size:12pt;">资</span><span style="font-size:12pt;">源</span><span style="font-family:SimSun;font-size:12pt;">闲</span><span style="font-size:12pt;">置的</span><span style="font-family:SimSun;font-size:12pt;">尴</span><span style="font-size:12pt;">尬情况。<span></span></span></li></ul><p align="left"><span style="font-size:12pt;"> </span></p>
<p align="left"><strong><span style="font-size:12pt;">Hadoop2.2.0</span><span style="font-size:12pt;">部署安装</span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">准</span><span style="font-family:SimSun;font-size:12pt;">备</span><span style="font-size:12pt;">工作</span><span style="font-size:12pt;"> :</span><span style="font-family:SimSun;font-size:12pt;">关</span><span style="font-size:12pt;">于防火</span><span style="font-family:SimSun;font-size:12pt;">墙</span><span style="font-size:12pt;">、</span><span style="font-size:12pt;">SSH</span><span style="font-size:12pt;">通信、</span><span style="font-size:12pt;">JDK</span><span style="font-size:12pt;">的安装、</span><span style="font-size:12pt;">hosts</span><span style="font-size:12pt;">配置、文件的上</span><span style="font-family:SimSun;font-size:12pt;">传</span><span style="font-size:12pt;">等等就不一一介</span><span style="font-family:SimSun;font-size:12pt;">绍</span><span style="font-size:12pt;">了</span><span style="font-size:12pt;">,</span><span style="font-size:12pt;">直切主</span><span style="font-family:SimSun;font-size:12pt;">题</span><span style="font-size:12pt;">.</span></p>
<p align="left"><span style="font-size:12pt;">安装</span><span style="font-family:SimSun;font-size:12pt;">环</span><span style="font-size:12pt;">境：</span><span style="font-size:12pt;">Red Hat 6</span></p>
<p align="left"><span style="font-family:SimSun;font-size:12pt;">单</span><span style="font-size:12pt;">机模式：</span><span style="font-size:12pt;">192.168.5.130  v</span></p>
<p align="left"><strong><span style="font-size:12pt;">注：网上大多数教程都是扯</span><span style="font-family:SimSun;font-size:12pt;">犊</span><span style="font-size:12pt;">子，乱七八糟，希望本文</span><span style="font-family:SimSun;font-size:12pt;">对</span><span style="font-size:12pt;">大家有所帮助，运行起来</span><span style="font-size:12pt;">Hadoop2.2</span><span style="font-size:12pt;">从</span><span style="font-family:SimSun;font-size:12pt;">单</span><span style="font-size:12pt;">机做起</span><span style="font-size:12pt;">~~~</span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><strong><span style="font-size:12pt;">①</span><span style="font-size:12pt;">上</span><span style="font-family:SimSun;font-size:12pt;">传</span><span style="font-size:12pt;">Hadoop2.2.0</span><span style="font-size:12pt;">到<span>/usr/local</span>目</span><span style="font-family:SimSun;font-size:12pt;">录</span><span style="font-size:12pt;">下<span>,</span>并解</span><span style="font-family:SimSun;font-size:12pt;">压</span><span style="font-size:12pt;">、重命名</span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><strong><span style="font-size:12pt;">目</span><span style="font-family:SimSun;font-size:12pt;">录结</span><span style="font-size:12pt;">构如下：</span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">[root@v hadoop2]# ls bin  include libexec      NOTICE.txt  sbin etc lib      LICENSE.txt  README.txt  share</span></p>
<p align="left"><strong><span style="font-size:12pt;">其配置文件</span><span style="font-family:SimSun;font-size:12pt;">结</span><span style="font-size:12pt;">构如下：</span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">[root@v hadoop2]# cd etc/hadoop/ [root@v hadoop]# lscapacity-scheduler.xml      httpfs-site.xmlconfiguration.xsl          log4j.properties container-executor.cfg     mapred-env.cmdcore-site.xml              mapred-env.shhadoop-env.cmd             mapred-queues.xml.templatehadoop-env.sh              mapred-site.xml.template
 hadoop-metrics2.properties  slaveshadoop-metrics.properties   ssl-client.xml.examplehadoop-policy.xml          ssl-server.xml.example hdfs-site.xml              yarn-env.cmdhttpfs-env.sh              yarn-env.sh httpfs-log4j.properties     yarn-site.xmlhttpfs-signature.secret</span></p>
<p align="left"><strong><span style="font-size:12pt;">②</span><span style="font-size:12pt;">配置<span>JAVA_HOME</span></span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">Yarn </span><span style="font-size:12pt;">框架中由于启</span><span style="font-family:SimSun;font-size:12pt;">动</span><span style="font-size:12pt;">HDFS</span><span style="font-size:12pt;">分布式文件系</span><span style="font-family:SimSun;font-size:12pt;">统</span><span style="font-size:12pt;">和启</span><span style="font-family:SimSun;font-size:12pt;">动</span><span style="font-size:12pt;">
 MapReduce</span><span style="font-size:12pt;">框架分离，<span>JAVA_HOME </span>需要在<span> hadoop-env.sh</span>和<span> Yarn-env.sh
</span>中分</span><span style="font-family:SimSun;font-size:12pt;">别</span><span style="font-size:12pt;">配置<span></span></span></p>
<p align="left"><span style="font-size:12pt;">[root@v hadoop]# vi hadoop-env.sh</span></p>
<p align="left"><span style="font-size:12pt;"># export JAVA_HOME=${JAVA_HOME}</span><span style="font-size:12pt;">【默</span><span style="font-family:SimSun;font-size:12pt;">认</span><span style="font-size:12pt;">,</span><span style="font-size:12pt;">蛋疼<span> </span>却不</span><span style="font-family:SimSun;font-size:12pt;">认</span><span style="font-size:12pt;">,</span><span style="font-size:12pt;">需要修改】<span></span></span></p>
<p align="left"><span style="font-size:12pt;">export JAVA_HOME=/usr/local/jdk</span></p>
<p align="left"><span style="font-size:12pt;">[root@v hadoop]# vi yarn-env.sh</span></p>
<p align="left"><span style="font-size:12pt;"># some Java parameters export JAVA_HOME=/usr/local/jdk</span><span style="font-size:12pt;">【需要手</span><span style="font-family:SimSun;font-size:12pt;">动</span><span style="font-size:12pt;">修改】<span></span></span></p>
<p align="left"><strong><span style="font-size:12pt;">③</span><span style="font-size:12pt;">配置</span><span style="font-family:SimSun;font-size:12pt;">环</span><span style="font-size:12pt;">境</span><span style="font-family:SimSun;font-size:12pt;">变</span><span style="font-size:12pt;">量</span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">export HADOOP_HOME=/usr/local/hadoop2 exportPATH=.:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$JAVA_HOME/bin:$PATH</span></p>
<p align="left"><span style="font-size:12pt;">然后</span><span style="font-family:SimSun;font-size:12pt;">执</span><span style="font-size:12pt;">行命令：<span>source/etc/profile</span></span></p>
<p align="left"><strong><span style="font-size:12pt;">④</span><span style="font-size:12pt;">配置<span>HADOOP_LOG_DIR</span></span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">老框架在<span> LOG, conf, tmp </span>目</span><span style="font-family:SimSun;font-size:12pt;">录</span><span style="font-size:12pt;">等均默</span><span style="font-family:SimSun;font-size:12pt;">认为</span><span style="font-size:12pt;">脚本启</span><span style="font-family:SimSun;font-size:12pt;">动</span><span style="font-size:12pt;">的当前目</span><span style="font-family:SimSun;font-size:12pt;">录</span><span style="font-size:12pt;">下的<span>
 log, conf, tmp </span>子目</span><span style="font-family:SimSun;font-size:12pt;">录</span><span style="font-size:12pt;">,</span><span style="font-size:12pt;">无需配置 但<span>Yarn</span>新框架中<span>Log
</span>默</span><span style="font-family:SimSun;font-size:12pt;">认创</span><span style="font-size:12pt;">建在<span> Hadoop</span>用</span><span style="font-family:SimSun;font-size:12pt;">户</span><span style="font-size:12pt;">的<span> home</span>目</span><span style="font-family:SimSun;font-size:12pt;">录</span><span style="font-size:12pt;">下的<span>
 log</span>子目</span><span style="font-family:SimSun;font-size:12pt;">录</span><span style="font-size:12pt;">，因此最好在<span>${hadoop_home_dir}/etc/hadoop/hadoop-env.sh</span>配置<span> HADOOP_LOG_DIR</span>，否</span><span style="font-family:SimSun;font-size:12pt;">则</span><span style="font-size:12pt;">有可能会因</span><span style="font-family:SimSun;font-size:12pt;">为</span><span style="font-size:12pt;">你启</span><span style="font-family:SimSun;font-size:12pt;">动</span><span style="font-size:12pt;">hadoop</span><span style="font-size:12pt;">的用</span><span style="font-family:SimSun;font-size:12pt;">户</span><span style="font-size:12pt;">的<span>
 .bashrc</span>或者<span>.bash_profile </span>中指定了其他的<span> PATH </span></span><span style="font-family:SimSun;font-size:12pt;">变</span><span style="font-size:12pt;">量而造成日志位置混乱，而</span><span style="font-family:SimSun;font-size:12pt;">该</span><span style="font-size:12pt;">位置没有</span><span style="font-family:SimSun;font-size:12pt;">访问权</span><span style="font-size:12pt;">限的</span><span style="font-family:SimSun;font-size:12pt;">话</span><span style="font-size:12pt;">启</span><span style="font-family:SimSun;font-size:12pt;">动过</span><span style="font-size:12pt;">程中会</span><span style="font-family:SimSun;font-size:12pt;">报错</span><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;"># Where log files are stored.  $HADOOP_HOME/logs bydefault.<strong>export HADOOP_LOG_DIR=/usr/local/hadoop2/logs</strong></span></p>
<p align="left"><strong><span style="font-size:12pt;">⑤</span><span style="font-size:12pt;">配置<span>core-site.xml</span></span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">&lt;configuration&gt; &lt; property&gt; &lt;name&gt;fs.default.name&lt;/name&gt; &lt; value&gt;hdfs://v:9000&lt;/value&gt;&lt; /property&gt; &lt; property&gt; &lt; name&gt;hadoop.tmp.dir&lt;/name&gt;&lt; value&gt;/usr/local/hadoop2/tmp&lt;/value&gt; &lt; /property&gt; &lt;/configuration&gt;</span></p>
<p align="left"><strong><span style="font-size:12pt;">⑥</span><span style="font-size:12pt;">配置<span>hdfs-site.xml</span></span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">&lt;configuration&gt; &lt; property&gt; &lt;name&gt;dfs.default.name&lt;/name&gt; &lt;value&gt;/usr/local/hadoop2/tmp&lt;/value&gt; &lt; /property&gt; &lt;property&gt; &lt; name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;1&lt;/value&gt; &lt; /property&gt; &lt; property&gt; &lt;name&gt;dfs.permissions&lt;/name&gt;
 &lt; value&gt;false&lt;/value&gt; &lt;/property&gt; &lt; /configuration&gt;</span></p>
<p align="left"><strong><span style="font-size:12pt;">⑦</span><span style="font-size:12pt;">重命名<span> mapred-site.xml.template</span></span><span style="font-family:SimSun;font-size:12pt;">为</span><span style="font-size:12pt;">mapred-site.xml</span><span style="font-size:12pt;">并配置</span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">&lt;configuration&gt; &lt; property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt; value&gt;Yarn&lt;/value&gt;&lt; /property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;/configuration&gt;</span></p>
<p align="left"><span style="font-size:12pt;">【注意】：此</span><span style="font-family:SimSun;font-size:12pt;">处</span><span style="font-size:12pt;">无需配置<span>mapred.job.tracker,</span>因</span><span style="font-family:SimSun;font-size:12pt;">为</span><span style="font-size:12pt;">JobTracker</span><span style="font-size:12pt;">已</span><span style="font-family:SimSun;font-size:12pt;">经变</span><span style="font-size:12pt;">成客</span><span style="font-family:SimSun;font-size:12pt;">户</span><span style="font-size:12pt;">端的一个</span><span style="font-family:SimSun;font-size:12pt;">库</span><span style="font-size:12pt;">,</span><span style="font-size:12pt;">它可能被随机</span><span style="font-family:SimSun;font-size:12pt;">调</span><span style="font-size:12pt;">度到任意一个<span>slave</span>上面<span>,</span>也就是</span><span style="font-family:SimSun;font-size:12pt;">说</span><span style="font-size:12pt;">
 它的位置是</span><span style="font-family:SimSun;font-size:12pt;">动态</span><span style="font-size:12pt;">生成的<span>.</span></span></p>
<p align="left"><span style="font-family:SimSun;font-size:12pt;">该</span><span style="font-size:12pt;">配置文件中<span>mapreduce.framework.name</span>必</span><span style="font-family:SimSun;font-size:12pt;">须</span><span style="font-size:12pt;">指定采用的框架名称<span>,</span>默</span><span style="font-family:SimSun;font-size:12pt;">认</span><span style="font-size:12pt;">是将作</span><span style="font-family:SimSun;font-size:12pt;">业</span><span style="font-size:12pt;">提交到<span>MRv1</span>的<span>JobTracker</span>端<span>.</span></span></p>
<p align="left"><strong><span style="font-size:12pt;">⑧</span><span style="font-size:12pt;">配置<span>yarn-site.xml</span></span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">&lt;configuration&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt; &lt;value&gt;v:8990&lt;/value&gt; &lt; description&gt;host is the hostname of theresource manager and port is the port on which the NodeManagers contact theResource
 Manager. &lt; /description&gt; &lt; /property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt; &lt;value&gt;v:8991&lt;/value&gt; &lt; description&gt;host is the hostname of theresourcemanager and port is the port on which the Applications in the clustertalk to
 the Resource Manager. &lt; /description&gt; &lt; /property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt;name&gt;yarn.resourcemanager.scheduler.class&lt;/name&gt; &lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler&lt;/value&gt;&lt; description&gt;In case you do not want to use the defaultscheduler&lt;/description&gt;
 &lt; /property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt; &lt;value&gt;v:8993&lt;/value&gt; &lt; description&gt;the host is the hostname ofthe ResourceManager and the port is the port on which the clients can talk tothe Resource Manager.
 &lt;/description&gt; &lt; /property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt;name&gt;yarn.nodemanager.local-dirs&lt;/name&gt; &lt;value&gt;/usr/local/hadoop2/tmp/node&lt;/value&gt; &lt; description&gt;thelocal directories used by the nodemanager&lt;/description&gt; &lt;/property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt;name&gt;yarn.nodemanager.address&lt;/name&gt; &lt;value&gt;v:8994&lt;/value&gt; &lt; description&gt;the nodemanagers bind to thisport&lt;/description&gt; &lt; /property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt; name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;&lt; value&gt;10240&lt;/value&gt; &lt; description&gt;the amount of memory onthe NodeManager in GB&lt;/description&gt; &lt; /property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt;name&gt;yarn.nodemanager.remote-app-log-dir&lt;/name&gt; &lt;value&gt;/usr/local/hadoop2/tmp/app-logs&lt;/value&gt; &lt; description&gt;directoryon hdfs where the application logs are moved to &lt;/description&gt; &lt;/property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt;name&gt;yarn.nodemanager.log-dirs&lt;/name&gt; &lt;value&gt;/usr/local/hadoop2/tmp/node&lt;/value&gt; &lt; description&gt;thedirectories used by Nodemanagers as log directories&lt;/description&gt; &lt;/property&gt;</span></p>
<p align="left"><span style="font-size:12pt;">&lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt; description&gt;shuffle servicethat needs to be set for Map Reduce to run &lt;/description&gt; &lt;/property&gt; &lt; /configuration&gt;</span></p>
<p align="left"><span style="font-size:12pt;">【注意】：</span><span style="font-family:SimSun;font-size:12pt;">为</span><span style="font-size:12pt;">了运行<span>MapReduce,</span>需要</span><span style="font-family:SimSun;font-size:12pt;">让</span><span style="font-size:12pt;">各个<span>NodeManager</span>在启</span><span style="font-family:SimSun;font-size:12pt;">动时</span><span style="font-size:12pt;">加</span><span style="font-family:SimSun;font-size:12pt;">载</span><span style="font-size:12pt;">shuffleserver,
 shuffle server</span><span style="font-family:SimSun;font-size:12pt;">实际</span><span style="font-size:12pt;">是<span>Jetty/Netty Server, Reduce Task</span>通</span><span style="font-family:SimSun;font-size:12pt;">过该</span><span style="font-size:12pt;">server</span><span style="font-size:12pt;">从各个<span>NodeManager</span>上</span><span style="font-family:SimSun;font-size:12pt;">远</span><span style="font-size:12pt;">程拷</span><span style="font-family:SimSun;font-size:12pt;">贝</span><span style="font-size:12pt;">MapTask</span><span style="font-family:SimSun;font-size:12pt;">产</span><span style="font-size:12pt;">生的中</span><span style="font-family:SimSun;font-size:12pt;">间结</span><span style="font-size:12pt;">果<span>.</span>上面增加的两个配置用于指定<span>shuffle
 server. </span>如果<span>YARN</span>集群有多个</span><span style="font-family:SimSun;font-size:12pt;">节</span><span style="font-size:12pt;">点<span>,</span></span><span style="font-family:SimSun;font-size:12pt;">还</span><span style="font-size:12pt;">需要配置<span>yarn.resourcemanager.address</span>等参数<span></span></span></p>
<p align="left"><strong><span style="font-size:12pt;">⑨</span><span style="font-size:12pt;">修改<span>slaves</span></span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;">localhost</span></p>
<p align="left"><span style="font-size:12pt;"> </span></p>
<p align="left"><strong><span style="font-size:12pt;">到此配置完成</span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;"> </span></p>
<p align="left"><span style="font-size:12pt;">初始化<span>Hadoop</span>：<span> hadoop namenode -format</span></span></p>
<p align="left"><span style="font-size:12pt;">欧了</span><span style="font-size:12pt;">~~~~</span></p>
<p align="left"><strong><span style="font-family:SimSun;font-size:12pt;">进</span><span style="font-size:12pt;">程如下：<br><span><img src="https://img-blog.csdn.net/20141023104844961?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VueXVzdXJhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""> </span></span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><strong><span style="font-size:12pt;">来</span><span style="font-family:SimSun;color:#FF0000;font-size:12pt;">张图</span><span style="font-size:12pt;">，，哈哈</span><span style="font-size:12pt;">,, </span><span style="font-size:12pt;">写的可能有</span><span style="font-family:SimSun;color:#FF0000;font-size:12pt;">细节</span><span style="font-size:12pt;">疏漏，如果大家</span><span style="font-family:SimSun;color:#FF0000;font-size:12pt;">实际</span><span style="font-size:12pt;">配置遇到</span><span style="font-family:SimSun;color:#FF0000;font-size:12pt;">问题欢</span><span style="font-size:12pt;">迎随</span><span style="font-family:SimSun;color:#FF0000;font-size:12pt;">时</span><span style="font-size:12pt;">留言</span><span style="font-family:SimSun;color:#FF0000;font-size:12pt;">给</span><span style="font-size:12pt;">我</span><span style="font-size:12pt;"></span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><br></p>
<p align="left"><span style="font-size:12pt;"><a href="http://www.vterm.cn/wp-content/uploads/2013/10/hadoop2.2jps.jpg" rel="nofollow"> </a></span><span style="font-size:12pt;"></span></p>
<p align="left"><strong><span style="font-size:12pt;">分布式就更</span><span style="font-family:SimSun;color:#3366FF;font-size:12pt;">简单喽</span><span style="font-size:12pt;"> ，改一下</span><span style="font-size:12pt;">slaves</span><span style="font-size:12pt;">就欧啦</span><span style="font-size:12pt;">
 ~~~</span></strong><span style="font-size:12pt;"></span></p>
<p align="left"><span style="font-size:12pt;"> </span></p>
<img src="https://img-blog.csdn.net/20141023104523171?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2VueXVzdXJhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""><br>            </div>
                </div>