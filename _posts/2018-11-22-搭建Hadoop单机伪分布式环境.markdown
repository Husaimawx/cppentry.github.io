---
layout:     post
title:      搭建Hadoop单机伪分布式环境
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/tanjunchen/article/details/79733866				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p align="left"><span style="color:#000000;"> </span><strong><em><span style="color:#000000;">搭建</span><span style="color:#000000;">Hadoop</span><span style="color:#000000;">单机伪分布式环境</span></em></strong></p><p><span style="color:#000000;">本次试用的是ubuntu 16.04</span>作为系统环境</p><p><span style="color:#000000;">使用的是VMware Workstation 12</span>作为虚拟机</p><p><span style="color:#000000;">本次不介绍CentOS</span>和RedHat搭建Hadoop单机伪分布式环境</p><p><span style="color:#000000;">hadoop</span><span style="color:#000000;">使用的</span><span style="color:#000000;">Hadoop 2.6.4</span></p><p><span style="color:#000000;">好的，现在开始我们的hadoop</span>搭建环境之旅！！！</p><p><span style="color:#000000;">第一步：</span></p><p><span style="color:#000000;">打开ubuntu</span>终端  如果没有hadoop用户，我们创建一个hadoop用户</p><p><span style="color:#000000;">       </span><span style="color:#000000;">使用命令 sudo useradd -m hadoop-s /bin/bash</span></p><p><span style="color:#000000;">这里稍微回顾一下：</span></p><p><span style="color:#000000;">用户与组</span></p><p><span style="color:#000000;">用户：多用户</span></p><p><span style="color:#000000;">用户和组   </span>实现资源分配的核心要素</p><p><span style="color:#000000;">组是一组容器   </span>可以添加用户  也可以添加权限</p><p><span style="color:#000000;">用户类型：</span></p><p><span style="color:#000000;">管理员  0 </span></p><p><span style="color:#000000;">系统用户：1--499 </span></p><p><span style="color:#000000;">运行后台的程序（daemon</span>）</p><p><span style="color:#000000;">普通用户：500+</span></p><p><span style="color:#000000;">登录：交互式访问</span></p><p><span style="color:#000000;">组类别：</span></p><p><span style="color:#000000;">管理员组：0</span></p><p><span style="color:#000000;">系统组：1-499</span></p><p><span style="color:#000000;">用户组：500+</span></p><p><span style="color:#000000;">Linux:</span></p><p><span style="color:#000000;">/etc/passwd </span><span style="color:#000000;">：用户的账号信息</span></p><p><span style="color:#000000;">/etc/shadow </span><span style="color:#000000;">：用户的密码与相关账户设定</span></p><p><span style="color:#000000;">/etc/group :</span><span style="color:#000000;">组的账号的信息</span></p><p><span style="color:#000000;">/etc/gshaow:</span><span style="color:#000000;">组的密码信息</span></p><p><span style="color:#000000;">执行完创建用户后 使用sudo cat /etc/group</span></p><p><span style="color:#000000;"><img src="https://img-blog.csdn.net/20180328205522500?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="color:#000000;">使用sudo passwd hadoop </span>为hadoop设置密码</p><p><span style="color:#000000;">Sudo adduser hadoop sudo </span><span style="color:#000000;">为</span><span style="color:#000000;"> hadoop </span><span style="color:#000000;">用户增加管理员权限</span></p><p><span style="color:#000000;">最后使用reboot</span>命令重启ubuntu 然后使用hadoop用户登录</p><p><span style="color:#000000;">第二步：</span></p><p><span style="color:#000000;">Hadoop</span><span style="color:#000000;">用户登录后</span><span style="color:#000000;">更新</span><span style="color:#000000;">update </span><span style="color:#000000;">不然有些软件使用不了</span></p><p><span style="color:#000000;"><img src="https://img-blog.csdn.net/20180328205537264?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="color:#000000;">本人使用的是us</span>的镜像源，有的时候更新比较慢，或者你们的hash有问题，说明软件源找不到资源，你们可以更改软件源  建议使用163的。</p><p><span style="color:#000000;">对于更改软件源，我就不说了，自行解决。</span></p><p><span style="color:#000000;">然后安装vim</span>的文本编辑器   文本编辑器有很多种 nano vi vim(vi的增强版) gedit(图形化界面，建议对于vi或者vim不是很熟悉的使用，但是以后还是要学会vi或者vim的，道理都懂的)。对于刚刚接触linux的我本次使用的gedit，因为后面修改xml配置文件和修改.sh脚本文件方便，加快效率，防止出错。</p><p><span style="color:#000000;">对于系统有了nano  vi  </span>安装vim就是 </p><p><img src="https://img-blog.csdn.net/20180328205554834?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><span style="color:#000000;">因为我已经装了，所以出现以上画面，没有装的应该是有y/n</span>的选项  直接输入y就可以了。</p><p><span style="color:#000000;">第三步：</span></p><p><span style="color:#000000;">安装ssh </span>能够实现远程控制 </p><p><span style="color:#000000;">Ubuntu</span><span style="color:#000000;">默认装了</span><span style="color:#000000;">ssh client  </span><span style="color:#000000;">然后我们可以直接安装服务器</span></p><p><span style="color:#000000;">命令为：</span></p><p><span style="color:#000000;"><img src="https://img-blog.csdn.net/20180328205605303?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="color:#000000;">我的已经安装完毕，出现以上的画面</span></p><p><span style="color:#000000;">其中远程控制工具有很多中  Xshell   secureCRT</span></p><p><span style="color:#000000;">我输入ifconfig </span>查看ip</p><p><img src="https://img-blog.csdn.net/20180328205613165?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><span style="color:#000000;">我使用Xshell5</span>连接ubuntu</p><p><img src="https://img-blog.csdn.net/20180328205623219?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><span style="color:#000000;">第四步：</span></p><p><span style="color:#000000;">安装java  jdk  jre</span></p><p><span style="color:#000000;"><img src="https://img-blog.csdn.net/20180328205638533?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="color:#000000;">安装好 OpenJDK </span>后，需要找到相应的安装路径，这个路径是用于配置 JAVA_HOME 环境变量的。</p><p><span style="color:#000000;">使用sudo gedit ~/.bashrc </span>编辑，建立环境变量。</p><p><img src="https://img-blog.csdn.net/20180328205650495?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><span style="color:#000000;">export JAVA_HOME=JDK</span><span style="color:#000000;">安装路径</span></p><p><span style="color:#000000;">其中，然后必须使用source  ~/.bashrc  </span>命令使变量生效。</p><p><img src="https://img-blog.csdn.net/20180328205657667?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><span style="color:#000000;">最后使用上述命令检验我们安装的java</span>环境变量是否有效。如果有效，我们继续下一步。否则，请配置好java的环境。不然，无法进行下一步。</p><p><span style="color:#000000;">第五步：</span></p><p><span style="color:#000000;">安装hadoop</span></p><p><span style="color:#000000;">我使用的是hadoop-2.6.4.tar.gz</span></p><p><span style="color:#000000;"><img src="https://img-blog.csdn.net/20180328205705396?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="color:#000000;">我放在桌面上。我是从window</span>下好的，然后拖进ubuntu的，这个功能的实现，必须开机然后重新安装vmware tools才能使用  (可以建立一个共享的文件夹可以使用ftp文件传送等等多种方式)</p><p><span style="color:#000000;">我建议直接在ubuntu</span>中联网下载，然后在下载中找到那个文件。测试能否连接外网，使用ping <span style="color:#000000;"><a href="http://www.baidu.com/" rel="nofollow"><span style="color:#0000FF;">www.baidu.com</span></a></span><span style="color:#000000;"> </span><span style="color:#000000;">等方式。</span></p><p><span style="color:#000000;"><img src="https://img-blog.csdn.net/20180328205726780?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="color:#000000;">然后，接下来安装hadoop ,</span>我的安装包放在Desktop,建议安装在于与java一样的环境,我的是在/usr/local</p><p><img src="https://img-blog.csdn.net/20180328205737233?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><img src="https://img-blog.csdn.net/20180328205754779?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><span style="color:#000000;">修改权限</span></p><p><span style="color:#000000;">Sudo chown -R hadoop ./hadoop</span></p><p><span style="color:#000000;">使用以下的命令检验hadoop</span>的版本</p><p><img src="https://img-blog.csdn.net/20180328205807549?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><span style="color:#000000;">一下稍微写了一下有关权限的介绍：</span></p><p><span style="color:#000000;">Chown</span><span style="color:#000000;">：改变文件属主</span><span style="color:#000000;">  </span><span style="color:#000000;">只有管理员才有这个权限</span></p><p><span style="color:#000000;">Chown USERNAMEfile,...  -R  </span><span style="color:#000000;">递归修改目录及其子文件的内部的文件的属主</span></p><p><span style="color:#000000;">--reference =/path/to/somefile file,...</span></p><p><span style="color:#000000;">#chgrp  GRPNAMEfile...    -R    --reference=/path/to/somefile file,...</span></p><p><span style="color:#000000;">Chown USERNAME:GROUP file....</span></p><p><span style="color:#000000;">Chown USERANME.GROUP file....</span></p><p><span style="color:#000000;">Chmod :</span><span style="color:#000000;">修改用户的权限</span></p><p><span style="color:#000000;">修改三类用户的权限</span></p><p><span style="color:#000000;">Chmod  more  file....</span></p><p><span style="color:#000000;">-R</span></p><p><span style="color:#000000;">--reference =/path/to/somefile file,...</span></p><p><span style="color:#000000;">Rwxr-x---</span></p><p><span style="color:#000000;">修改某些用户或者某些类用户的权限</span></p><p><span style="color:#000000;">U  g  o  a</span></p><p><span style="color:#000000;">Chmod </span><span style="color:#000000;">用户类型</span><span style="color:#000000;"> =MORE file....</span></p><p><span style="color:#000000;">修改某类的用户某位或者某些位权限</span></p><p><span style="color:#000000;">U   g   o  a</span></p><p><span style="color:#000000;">Chmod </span><span style="color:#000000;">用户类型</span><span style="color:#000000;"> +(-)MORE file....</span></p><p><span style="color:#000000;">第六步：</span></p><p><span style="color:#000000;">Hadoop</span><span style="color:#000000;">默认为非分布式的，即</span><span style="color:#000000;">java</span><span style="color:#000000;">单进程。接下来，我们进行伪分布式的配置</span></p><p><span style="color:#000000;">Hadoop </span><span style="color:#000000;">的配置文件位于</span><span style="color:#000000;">/usr/local/hadoop/etc/hadoop/  </span><span style="color:#000000;">然后我们进入配置文件，进行修改，需要修改的是</span><span style="color:#000000;">core-site.xml</span><span style="color:#000000;">和</span><span style="color:#000000;">hdfs-site.xml  </span><span style="color:#000000;">使用</span><span style="color:#000000;">sudo gedit./etc/hadoop/core-site.xml</span></p><p><span style="color:#000000;"><img src="https://img-blog.csdn.net/20180328205900955?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="color:#000000;">修改的core-site.xml</span>文件为下面的截图：</p><p><img src="https://img-blog.csdn.net/2018032820583954?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><br></p><p><span style="color:#000000;">同理：修改hdfs-site.xml</span>的截图如下：</p><p><span style="color:#000000;"> <img src="https://img-blog.csdn.net/20180328205915618?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></span></p><p><span style="color:#000000;">第七步：开启hadoop</span></p><p><span style="color:#000000;">./bin/hdfs namenode -format </span><span style="color:#000000;">格式化</span><span style="color:#000000;">namenode </span><span style="color:#000000;">记得必须在你安装的</span><span style="color:#000000;">hadoop</span><span style="color:#000000;">下的</span><span style="color:#000000;">bin</span><span style="color:#000000;">中使用</span></p><p><span style="color:#000000;"> <img src="https://img-blog.csdn.net/20180328205925702?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></span></p><p><span style="color:#000000;"> <img src="https://img-blog.csdn.net/20180328205931747?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></span></p><p><span style="color:#000000;">途中的0</span>表示你已经成功了很多了，来继续我们的下面的操作。我们已经快要成功了，走起！！！  如果出错，然后查看有什么错误。</p><p><span style="color:#000000;">./sbin/start-dfs.sh </span><span style="color:#000000;">开启</span><span style="color:#000000;"> NameNode </span><span style="color:#000000;">和</span><span style="color:#000000;"> DataNode </span><span style="color:#000000;">守护进程。</span><span style="color:#000000;">第一次，会出现警告，</span><span style="color:#000000;">yes</span><span style="color:#000000;">即可。</span></p><p><span style="color:#000000;">Jps</span><span style="color:#000000;">查看是否打开成功。</span></p><p><span style="color:#000000;"><img src="https://img-blog.csdn.net/20180328205942477?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="color:#000000;">可能失败的话，删除 log  tmp   </span>使用rm -r ./删除的文件    格式</p><p><span style="color:#000000;">第八步：成功启动后，可以访问 Web </span>界面 查看相关信息</p><p><span style="color:#000000;"> <img src="https://img-blog.csdn.net/20180328205948825?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></span></p><p><span style="color:#000000;"><img src="https://img-blog.csdn.net/20180328205959679?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Rhbmp1bmNoZW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="color:#000000;">红色的使用你的ip</span>地址  然后端口号为50070查看信息</p><p><span style="color:#000000;">这样已经成功了。哈哈，哈哈，爽吧！！！</span></p><p><span style="color:#000000;">第九步：</span></p><p><span style="color:#000000;">添加path</span>路径：</p><p><span style="color:#000000;">因为上述操作都要到安装好了的hadoop</span>下操作，比较麻烦，我们使用path环境变量，使我们在任意的目录可以，开启我们的服务。</p><p><span style="color:#000000;">修改~/.bashrc</span>文件 与修改JAVA_HOME设置类似</p><p><span style="color:#000000;">，亲，最后记得操作source ~/.bashrc </span>使设置生效。<br><br></p><p><span style="color:#000000;"> </span></p><p> </p><br>            </div>
                </div>