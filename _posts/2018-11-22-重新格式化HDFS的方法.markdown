---
layout:     post
title:      重新格式化HDFS的方法
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
<span style="font-size:18px;">重新格式化hdfs系统的方法：</span></p>
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
<span style="font-size:18px;">（1）查看hdfs-ste.xml：</span></p>
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
<span style="font-size:18px;"><span></span></span></p>
<ol start="1" class="dp-xml" style="border:none;color:rgb(92,92,92);font-family:Consolas, 'Courier New', Courier, mono, serif;"><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:inherit;line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;"><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">span</span><span style="border:none;background-color:inherit;"> </span><span class="attribute" style="border:none;color:#FF0000;background-color:inherit;">style</span><span style="border:none;background-color:inherit;">=</span><span class="attribute-value" style="border:none;color:#0000FF;background-color:inherit;">"font-size:18px;"</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">property</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:rgb(85,85,85);line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;">  <span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">name</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">dfs.namenode.name.dir</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">name</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:inherit;line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;">  <span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">value</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">/home/hadoop/hdfs/name</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">value</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:rgb(85,85,85);line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;">  <span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">description</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">namenode上存储hdfs名字空间元数据</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">description</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:inherit;line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;"> <span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">property</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:rgb(85,85,85);line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;">   </span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:inherit;line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;"> <span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">property</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:rgb(85,85,85);line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;">  <span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">name</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;<span style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:18px;background-color:rgb(245,250,226);">dfs.datanode.name.dir</span></span></span><span class="tag" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:18px;background-color:inherit;color:#0000FF;border:none;font-weight:bold;">&lt;/</span><span class="tag-name" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:18px;background-color:inherit;border:none;color:#0000FF;font-weight:bold;">name</span><span class="tag" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:18px;background-color:inherit;color:#0000FF;border:none;font-weight:bold;">&gt;</span><span style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:18px;background-color:inherit;border:none;">  </span><span style="background-color:inherit;color:#000000;border:none;"></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:inherit;line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;">  <span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">value</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">/home/hadoop/hdsf/data</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">value</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:rgb(85,85,85);line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;">  <span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">description</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">datanode上数据块的物理存储位置</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">description</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:inherit;line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;"> <span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">property</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">span</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li></ol><p></p>
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
</p>
<div class="dp-highlighter bg_html" style="font-family:Consolas, 'Courier New', Courier, mono, serif;background-color:rgb(231,229,220);">
<div class="bar"></div>
</div>
<div class="dp-highlighter bg_html" style="font-family:Consolas, 'Courier New', Courier, mono, serif;background-color:rgb(231,229,220);">
<span style="font-family:Arial;font-size:18px;">将</span><span style="font-family:Arial;font-size:18px;"> dfs.name.dir所指定的目录删除、</span><span style="font-family:Arial;font-size:18px;">dfs.data.dir<span style="color:rgb(51,51,51);line-height:26px;">所指定的</span>目录删除</span>
<p style="font-family:Arial;font-size:14px;">
</p>
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
<span style="font-size:18px;">（2）查看core-site.xml：</span></p>
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
<span style="font-size:18px;"></span></p>
<div class="dp-highlighter bg_html" style="font-family:Consolas, 'Courier New', Courier, mono, serif;background-color:rgb(231,229,220);">
<div class="bar"></div>
</div>
<ol start="1" class="dp-xml" style="border:none;color:rgb(92,92,92);font-family:Consolas, 'Courier New', Courier, mono, serif;"><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:inherit;line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;"><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">property</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:rgb(85,85,85);line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;"><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">name</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">hadoop.tmp.dir</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">name</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:inherit;line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;"><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">value</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">/home/hadoop/hadooptmp</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">value</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:rgb(85,85,85);line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;"><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">description</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">namenode上本地的hadoop临时文件夹</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">description</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;">  </span></span></li><li class="alt" style="border-top:none;border-right:none;border-bottom:none;border-left:3px solid rgb(153,153,153);background-color:rgb(245,250,226);color:inherit;line-height:18px;list-style-position:outside !important;">
<span style="border:none;color:#000000;background-color:inherit;"><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&lt;/</span><span class="tag-name" style="border:none;color:#0000FF;background-color:inherit;font-weight:bold;">property</span><span class="tag" style="color:#0000FF;border:none;background-color:inherit;font-weight:bold;">&gt;</span><span style="border:none;background-color:inherit;"> </span></span></li></ol><div><br></div>
<div>
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
<span style="font-size:18px;">将<a href="http://lib.csdn.net/base/hadoop" rel="nofollow" class="replace_word" title="Hadoop知识库" style="color:rgb(223,52,52);font-weight:bold;">Hadoop</a>.tmp.dir<span style="line-height:26px;">所指定的</span>目录删除。</span></p>
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
<span style="font-size:18px;">（3）</span><span style="font-size:18px;">重新执行命令：hadoop namenode -format</span></p>
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
<span style="font-size:18px;">格式化完毕。</span></p>
<p style="font-family:Arial;font-size:14px;color:rgb(51,51,51);line-height:26px;">
<span style="font-size:18px;">注意：原来的数据全部被清空了。产生了一个新的hdfs。</span></p>
<br></div>
<div>如果格式化报错,<a href="http://blog.csdn.net/u011762604/article/details/72897000" rel="nofollow" style="list-style:none;color:rgb(59,89,152);font-family:Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif;">java.net.UnknownHostException</a>可以根据这篇文章处理:http://blog.csdn.net/u011762604/article/details/72897000<span style="font-family:Consolas, 'Courier New', Courier, mono, serif;background-color:rgb(231,229,220);">.</span></div>
</div>
            </div>
                </div>