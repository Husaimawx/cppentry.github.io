---
layout:     post
title:      Hive概述纲要、环境配置以及HQL使用
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/qq_32297447/article/details/79441686				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><div style="text-align:left;line-height:1.75;font-size:14px;"><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>hive概述</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>Hive产生背景</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>Hive是什么</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>为什么要使用Hive</strong></span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>hive的数据结构</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>hive的基本操作</strong></span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>hive的数据类型</strong></span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>hive 元数据</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>Hive的体系架构	</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>Hive部署架构</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>Hive与RDBMS的关系、区别</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>Hive的优缺点</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>Hive适用场景</strong></span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>hive存储文件格式和压缩</strong></span></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(223,64,42);"><strong>Hive环境搭建</strong></span></div><div style="line-height:1.75;font-size:14px;"><br></div><div style="line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>hive概述</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">hive是大数据仓库软件，它提供了sql的方式简化大数据mapreduce的数据读取写入统计。并提供了多种使用途径，如cli jdbc odbc thrift webui.</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>Hive产生背景</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">MapReduce编程的不便性</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">传统Rdbms人员的需要</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>Hive是什么</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">由Facebook开源，最初用于解决海量结构化的日志数据统计问题</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">构建在Hadoop之上的数据仓库</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">Hive定义了一种类SQL查询语言：HQL（类似SQL，但不完全相同）</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">通常用于进行离线数据处理（采用MapReduec）</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">可以认为是一个HQL=&gt;MR的语言翻译器</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">底层支持多种不同的执行引擎</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">支持多种不同的压缩格式、存储格式以及自定义函数</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>为什么要使用Hive</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">简单，容易上手（提供类似SQL查询语言HQL）</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">为超大数据集设计的计算、扩展能力（MR作为计算引擎，HDFS作为存储系统）</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">统一的元数据管理（可与Pig、Presto、Impala、SparkSQL等共享元数据）</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>hive的数据结构</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">hive没有自己专门的存储格式，没有索引（0.7添加了索引），用户可以选择任意的存储格式如自己定义分隔符的textfile,也能直接识别其它格式的文件如 sequenceFile  ORCFile  parquet</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">数据模型为：表（内，外） 分区  桶</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);"><strong>hive的基本操作：</strong></span><span style="font-size:16px;color:rgb(57,57,57);">ddl、dml、sql</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);"><strong>hive的数据类型</strong></span></div><div style="margin-left:28px;line-height:1.66667;text-align:left;font-size:14px;"><span style="font-size:15px;color:rgb(51,51,68);background-color:rgb(255,255,255);">列类型：</span><span style="font-size:16px;color:rgb(85,85,85);background-color:rgb(255,255,255);">整型、字符串类型、时间戳、日期、小数点、联合类型</span></div><div style="margin-left:28px;line-height:1.66667;text-align:left;font-size:14px;"><span style="font-size:15px;color:rgb(51,51,68);background-color:rgb(255,255,255);">文字：浮点类型、十进制类型</span></div><div style="margin-left:28px;line-height:1.66667;text-align:left;font-size:14px;"><span style="font-size:15px;color:rgb(51,51,68);background-color:rgb(255,255,255);">Null 值：特殊值</span></div><div style="margin-left:28px;line-height:1.66667;text-align:left;font-size:14px;"><span style="font-size:15px;color:rgb(51,51,68);background-color:rgb(255,255,255);">复杂类型：数组、映射、结构体</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>hive 元数据</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">Hive将元数据存储在RDBMS 中，一般常用的有MYSQL和DERBY。 </span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">hive元数据对应的表约有20个，其中和表结构信息有关的有9张，其余的10多张或为空，或只有简单的几条记录，以下是部分主要表的简要说明</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><br></div><div><table style="table-layout:fixed;width:0px;"><colgroup><col style="width:182px;"><col style="width:267px;"><col style="width:151px;"></colgroup><tbody><tr><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(239,243,245);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">表名</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(239,243,245);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">说明</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(239,243,245);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">关联键</span></div></td></tr><tr><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">TBLS</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">所有hive表的基本信息</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">TBL_ID,SD_ID</span></div></td></tr><tr><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">TABLE_PARAM</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">表级属性，如是否外部表，表注释等</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">TBL_ID</span></div></td></tr><tr><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">COLUMNS</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">Hive表字段信息(字段注释，字段名，字段类型，字段序号)</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">SD_ID</span></div></td></tr><tr><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">SDS</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">所有hive表、表分区所对应的hdfs数据目录和数据格式</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">SD_ID,SERDE_ID</span></div></td></tr><tr><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">SERDE_PARAM</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">序列化反序列化信息，如行分隔符、列分隔符、NULL的表示字符等</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">SERDE_ID</span></div></td></tr><tr><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">PARTITIONS</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">Hive表分区信息</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">PART_ID,SD_ID,TBL_ID</span></div></td></tr><tr><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">PARTITION_KEYS</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">Hive分区表分区键</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">TBL_ID</span></div></td></tr><tr><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">PARTITION_KEY_VALS</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">Hive表分区名(键值)</span></div></td><td style="color:rgb(57,57,57);border-color:rgb(167,167,167);vertical-align:middle;background-color:rgb(247,247,247);"><div class="table-cell-line"><span style="font-size:16px;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);background-color:transparent;">PART_ID</span></div></td></tr></tbody></table></div><p></p><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>Hive的体系架构	</strong></span></div></div></div><p><img src="https://img-blog.csdn.net/20180327092622509" alt=""><img src="https://img-blog.csdn.net/20180327092628388" alt=""></p><p></p><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>Hive部署架构</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">测试环境</span></div><p><img src="https://img-blog.csdn.net/20180327092705369" alt=""></p><p></p><div style="text-indent:56px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">生产环境</span></div><p><img src="https://img-blog.csdn.net/20180327092719121" alt=""></p><p></p><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>Hive与RDBMS的关系、区别</strong></span></div><p><img src="https://img-blog.csdn.net/20180327092746523" alt=""></p><p></p><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>hive执行原理</strong></span></div><p><img src="https://img-blog.csdn.net/20180327092817579" alt=""></p><p></p><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">Parser 将HQL解析为抽象语法树</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">Semantic Analyzer 将抽象语法书分析为查询块</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">Logical Plan Generation 将查询块生成为逻辑查询计划</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">Logical Optimizer 优化逻辑查询</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">Physical Plan Generation 生成物理查询计划任务，也就是job</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">Physical Optimizer 优化物理查询</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">Prepare Execution  准备执行</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">Start MapReduce Job 启动job</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>Hive的优缺点</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">优点：容易上手易用</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">缺点：并不能提供低延时或者实时性比较高的需求（各种启动、销毁进程的时间要长）</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>Hive适用场景</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">日志分析</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">海量结构化数据离线分析</span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;"><strong>hive存储文件格式和压缩</strong></span></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(89,89,89);">压缩</span></div><p><img src="https://img-blog.csdn.net/20180327092858928" alt=""></p><p><img src="https://img-blog.csdn.net/20180327092915559" alt=""><br></p><p><img src="https://img-blog.csdn.net/2018032709295020" alt=""><br></p><p><img src="https://img-blog.csdn.net/20180327092959170" alt=""><br></p><p><img src="https://img-blog.csdn.net/20180327093007149" alt=""><br></p><p></p><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:18px;"><strong>Hive环境搭建</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">1、</span><span style="font-size:16px;"><strong>下载地址</strong></span><span style="font-size:16px;">：</span><a href="http://apache.fayea.com/hive/" rel="nofollow"><span style="font-size:16px;color:rgb(0,56,132);"><u>http://apache.fayea.com/hive/</u></span></a><span style="font-size:16px;color:rgb(57,57,57);"> &gt;&gt; </span><span style="font-size:16px;">hive-2.3.2 &gt;&gt; </span><a href="http://apache.fayea.com/hive/hive-2.3.2/apache-hive-2.3.2-bin.tar.gz" rel="nofollow"><span style="font-size:16px;color:rgb(0,56,132);"><u>apache-hive-2.3.2-bin.tar.gz</u></span></a></div><div style="text-indent:112px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">wget  </span><a href="http://apache.fayea.com/hive/hive-2.3.2/apache-hive-2.3.2-bin.tar.gz" rel="nofollow"><span style="font-size:16px;color:rgb(0,56,132);"><u>http://apache.fayea.com/hive/hive-2.3.2/apache-hive-2.3.2-bin.tar.gz</u></span></a></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(57,57,57);">2、</span><span style="font-size:16px;background-color:rgb(255,255,255);"><strong>配置hive-site.xml文件</strong></span></div><div style="text-indent:56px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;background-color:rgb(255,255,255);">进入hive的conf目录下，拷贝文件hive-default.xml.template命名为hive-site.xml</span></div><div style="text-indent:56px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;background-color:rgb(255,255,255);">cp hive-default.xml.template hive-site.xml</span></div><div style="text-indent:84px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;background-color:rgb(255,255,255);">添加如下内容：</span></div><div style="text-align:left;"></div><br><pre><code class="language-plain">&lt;configuration&gt;
  			  &lt;property&gt;//39行
&lt;name&gt;hive.exec.scratchdir&lt;/name&gt;
 	      &lt;value&gt;/home/hadoop/app/hive/tmp/hive&lt;/value&gt;
&lt;description&gt;hive用于存储不同阶段map/reduce的执行计划及存储中间输出结果的目录&lt;/description&gt;
&lt;/property&gt;
&lt;property&gt;//79行
&lt;name&gt;hive.downloaded.resources.dir&lt;/name&gt;
&lt;value&gt;/home/hadoop/app/hive/tmp/${hive.session.id}_resources&lt;/value&gt;
        			   &lt;description&gt;hive下载资源的存储目录&lt;/description&gt;
    			     &lt;/property&gt;
 &lt;property&gt;//1685行
       				     &lt;name&gt;hive.querylog.location&lt;/name&gt;
         	 		     &lt;value&gt;/home/hadoop/app/hive/tmp/hive&lt;/value&gt;
      				     &lt;description&gt;hive结构日志存储目录&lt;/description&gt;
    			      &lt;/property&gt;
   			      &lt;property&gt;//3976行
       				 &lt;name&gt;hive.server2.logging.operation.log.location&lt;/name&gt;
      				 &lt;value&gt;/home/hadoop/app/hive/tmp/hive/operation_logs&lt;/value&gt;
      				 &lt;description&gt;hive的操作日志目录&lt;/description&gt;
			       &lt;/property&gt;
    &lt;property&gt;//84行
        				&lt;name&gt;hive.scratch.dir.permission&lt;/name&gt;
        				&lt;value&gt;700&lt;/value&gt;
        				&lt;description&gt;hive访问hadoop文件权限设置&lt;/description&gt;
   				&lt;/property&gt;
   &lt;property&gt;//529行
        				&lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
        				&lt;value&gt;P@ssw0rd&lt;/value&gt;
        				&lt;description&gt;元数据存储的数据库的密码&lt;/description&gt;
    				&lt;/property&gt;
    &lt;property&gt;//1044行
       					 &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
       					 &lt;value&gt;root&lt;/value&gt;
       					 &lt;description&gt;元数据存储数据库的用户名&lt;/description&gt;
    				&lt;/property&gt;
    &lt;property&gt;//545行
        				&lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
       					&lt;value&gt;jdbc:mysql://localhost:3306/hive_metadata?createDatabaseIfNotExist=true&amp;characterEncoding=utf8&lt;/value&gt;
        				&lt;description&gt;元数据存储的数据库的url&lt;/description&gt;
    				&lt;/property&gt;
   &lt;property&gt;//1020行
        				&lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
        				&lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
       					&lt;description&gt;元数据存储的数据库的驱动&lt;/description&gt;
    				&lt;/property&gt;
    &lt;property&gt;//741行
        				&lt;name&gt;datanucleus.schema.autoCreateAll&lt;/name&gt;
        				&lt;value&gt;true&lt;/value&gt;
       	 				&lt;description&gt;开启自动创建（生产环境中不推荐使用）&lt;/description&gt;
    				&lt;/property&gt;
    &lt;property&gt;//746行
        				&lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;
        				&lt;value&gt;false&lt;/value&gt;
    				&lt;/property&gt;
  				&lt;!------------ 配置hive的事务 start ------------&gt;
   				 &lt;property&gt;//2445行
       					 &lt;name&gt;hive.optimize.sort.dynamic.partition&lt;/name&gt;
      					 &lt;value&gt;false&lt;/value&gt;
    				&lt;/property&gt;
    				&lt;property&gt;//2775行
        				&lt;name&gt;hive.support.concurrency&lt;/name&gt;
        				&lt;value&gt;true&lt;/value&gt;
   				 &lt;/property&gt;
    &lt;property&gt;找不到的话，在任意位置添加上即可
        				&lt;name&gt;hive.enforce.bucketing&lt;/name&gt;
        				&lt;value&gt;true&lt;/value&gt;
    				&lt;/property&gt;
    &lt;property&gt;//250行
        				&lt;name&gt;hive.exec.dynamic.partition.mode&lt;/name&gt;
       					&lt;value&gt;nonstrict&lt;/value&gt;
    				&lt;/property&gt;
    &lt;property&gt;//2870行
        				&lt;name&gt;hive.txn.manager&lt;/name&gt;
        				&lt;value&gt;org.apache.hadoop.hive.ql.lockmgr.DbTxnManager&lt;/value&gt;
    				&lt;/property&gt;
    &lt;property&gt;//2964行
        				&lt;name&gt;hive.compactor.initiator.on&lt;/name&gt;
        				&lt;value&gt;true&lt;/value&gt;
    				&lt;/property&gt;
    &lt;property&gt;//2974行
        				&lt;name&gt;hive.compactor.worker.threads&lt;/name&gt;
        				&lt;value&gt;1&lt;/value&gt;
    				&lt;/property&gt;
    &lt;property&gt;找不到的话，在任意位置添加上即可
        				&lt;name&gt;hive.in.test&lt;/name&gt;
        				&lt;value&gt;true&lt;/value&gt;
   &lt;/property&gt;
    				&lt;!------------ 配置hive的事务 end ------------&gt;
    &lt;property&gt;//1195
        				&lt;name&gt;hive.cli.print.current.db&lt;/name&gt;
        				&lt;value&gt;true&lt;/value&gt;
    				&lt;/property&gt;
			&lt;/configuration&gt;</code></pre><div style="margin-left:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">3、lib下面添加mysql依赖包</span></div><div style="text-align:left;"></div><div style="margin-left:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">4、添加hive配置</span></div><div style="margin-left:28px;text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">#hive</span></div><div style="margin-left:28px;text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">export HIVE_HOME=/home/hadoop/app/hive</span></div><div style="margin-left:28px;text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">export PATH=$ZK_HOME/bin:$PATH</span></div><div style="margin-left:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">5、启动hive</span></div><div style="margin-left:28px;text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">schematool -dbType mysql -initSchema</span></div><div style="margin-left:28px;text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">启动之后可以直接连接hive(输入hive命令即可)</span></div><div style="margin-left:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">6、启动hiveserver2</span></div><div style="margin-left:28px;text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">hiveserver2启动成功后另起一个窗口</span></div><div style="margin-left:28px;text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">输入beeline -u jdbc:hive2://    链接</span></div><div style="margin-left:28px;text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><br></div><div style="margin-left:28px;text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><br></div><div style="text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:22px;"><strong>hive使用(HQL)</strong></span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(67,67,67);background-color:rgb(255,255,255);">创建数据库：create database db;</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(67,67,67);background-color:rgb(255,255,255);">删除数据库：drop database if exists school cascade;</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;color:rgb(67,67,67);background-color:rgb(255,255,255);">创建表：</span><span style="font-size:16px;">create table student(表字段) row format delimited fields terminated by ',';</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">重命名表：alter table 原表名 rename to 新表名;</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">删除表：drop table if exists 表名;</span></div><div style="text-indent:28px;text-align:left;line-height:1.75;font-size:14px;"><span style="font-size:16px;">导入数据：load data local inpath '导入数据的文件路径' into table 表名;</span></div><br>            </div>
                </div>