---
layout:     post
title:      本机idea远程调试flume
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p>https://blog.csdn.net/u012373815/article/details/60601118</p><p></p><div class="article_content clearfix csdn-tracking-statistics" style="padding:0px;margin:0px;"><div class="markdown_views" style="padding:0px;margin:0px;font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;"><p>最近又要自定义开发flume source 插件，每次插件打包后运行，不能再编译器里debug 感觉好苦恼。于是今天就看了一下flume 的远程调试。一看感觉挺简单的。所以就分享一下。</p><p>远程调试flume其实就四步，第一步开启flume的远程调试，第二步拉取flume 源码导入到idea中。第三步在 idea 中配置远程机器的IP 和调试端口号。第四步：将自定义开发插件源码粘贴到源码中，启动flume 进行调试。</p><p>废话不多说粘配置了：</p><h1 style="padding:0px;"><a></a>开启flume远程调试</h1><p>修改flume的启动脚本flume-ng ，找到这段代码</p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs actionscript has-numbering"># <span class="hljs-keyword">set</span> <span class="hljs-keyword">default</span> params
FLUME_CLASSPATH=<span class="hljs-string">""</span>
FLUME_JAVA_LIBRARY_PATH=<span class="hljs-string">""</span>
JAVA_OPTS=<span class="hljs-string">"-Xmx20m"</span>
LD_LIBRARY_PATH=<span class="hljs-string">""</span></code></pre><ul class="pre-numbering"><li style="padding-right:8px;padding-left:8px;color:rgb(153,153,153);">1</li><li style="padding-right:8px;padding-left:8px;color:rgb(153,153,153);">2</li><li style="padding-right:8px;padding-left:8px;color:rgb(153,153,153);">3</li><li style="padding-right:8px;padding-left:8px;color:rgb(153,153,153);">4</li><li style="padding-right:8px;padding-left:8px;color:rgb(153,153,153);">5</li></ul><p>修改 JAVA_OPTS 为</p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="hljs ini has-numbering"><span class="hljs-setting">JAVA_OPTS=<span class="hljs-value"><span class="hljs-string">"-Xmx20m -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=y"</span></span></span></code></pre><ul class="pre-numbering"><li style="padding-right:8px;padding-left:8px;color:rgb(153,153,153);">1</li></ul><p>此时已经打开了flume的远程调试，远程调试端口为 8000</p><h1 style="padding:0px;"><a></a>从Git 中拉取flume源码</h1><p>拉取源码到idea <br><a href="https://github.com/apache/flume" rel="nofollow">https://github.com/apache/flume</a></p><h1 style="padding:0px;"><a></a>添加idea Debug 配置</h1><p>添加配置：</p><p><img src="https://img-blog.csdn.net/20170306222959576?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjM3MzgxNQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" style="margin-top:24px;margin-bottom:24px;"></p><p>添加一个remote 配置</p><p><img src="https://img-blog.csdn.net/20170306223141838?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjM3MzgxNQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" style="margin-top:24px;margin-bottom:24px;"></p><p>配置运行flume 远程主机的ip 和调试端口号：</p><p><img src="https://img-blog.csdn.net/20170306223302059?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjM3MzgxNQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" style="margin-top:24px;margin-bottom:24px;"></p><h1 style="padding:0px;"><a></a>添加自定义源码</h1><p>这个时候就可以把自己写的flume插件的代码粘贴到flume中(随便位置打上断点 )然后启动flume 进行调试。</p><p><img src="https://img-blog.csdn.net/20170306224014753?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjM3MzgxNQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" style="margin-top:24px;margin-bottom:24px;"></p><pre class="prettyprint" style="font-size:14px;line-height:22px;"><code class="has-numbering">当然 开发的flume插件的jar包应该在远端运行flume的机器上，实际运行的flume配置也是远端flume的配置。
</code></pre><ul class="pre-numbering"><li style="padding-right:8px;padding-left:8px;color:rgb(153,153,153);">1</li><li style="padding-right:8px;padding-left:8px;color:rgb(153,153,153);">2</li></ul><p>启动flume ：</p><p><img src="https://img-blog.csdn.net/20170306223654346?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjM3MzgxNQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" style="margin-top:24px;margin-bottom:24px;"></p><p>此时启动idea 的debug 模式就会进入断点。</p><p><img src="https://img-blog.csdn.net/20170306223917100?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMjM3MzgxNQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" style="margin-top:24px;margin-bottom:24px;"></p></div></div><div class="article-bar-bottom" style="padding:0px 0px 16px;margin:36px 0px 0px;border-bottom:1px solid rgb(227,227,227);color:rgb(51,51,51);font-family:'SF Pro Display', Roboto, Noto, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;font-size:14px;"><div class="article-copyright" style="padding:0px;margin:0px;font-size:12px;color:rgb(153,153,153);">版权声明：本文为博主编写文章，未经博主允许转载，转载请注明出处。	https://blog.csdn.net/u012373815/article/details/60601118</div></div><br>            </div>
                </div>