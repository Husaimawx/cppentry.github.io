---
layout:     post
title:      hadoop, hbase, zookeeper集群搭建
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/lykangjia/article/details/9997451				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<span style="border:0px;font-size:13.63636302947998px;vertical-align:baseline;line-height:26px;font-family:Arial;">Hadoop、ZooKeeper和HBase之间应该按照顺序启动和关闭：启动Hadoop—&gt;启动ZooKeeper集群—&gt;启动HBase—&gt;停止HBase—&gt;停止ZooKeeper集群—&gt;停止Hadoop。</span></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<span style="border:0px;font-size:13.63636302947998px;vertical-align:baseline;line-height:26px;font-family:Arial;"></span><span style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;">集群
 管理脚步</span> <a href="http://www.eifr.com/download/hzh-manager.sh" rel="nofollow" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;line-height:normal !important;">hzh-manager.sh</a></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
三台机器，一台master （角色：namenode, hbase master, zookeeper）, 两台slave(s1,s2) （角色：datanode, hbase region server, zookeeper）， </p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
每台机器上设置：</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
在/etc/hosts中设置名字解析:</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
192.168.1.2  master<br style="line-height:normal !important;">
192.168.1.3  s1<br style="line-height:normal !important;">
192.168.1.4  s2</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
三台机器设置用户名hadoop密码hadoop，并且设置三台机器无密码ssh互访</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
下载hadoop-1.0.4.tar.gz，zookeeper-3.4.3.tar.gz， hbase-0.94.0.tar.gz</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
在/opt/下mkdir hadoop，下面所有的安装包都解压到这里</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
********************************</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
hadoop</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
********************************</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
1&gt; 在master机器上解压hadoop-1.0.4.tar.gz，cd conf，修改配置文件：</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
hadoop-env.sh， 设置export JAVA_HOME=/opt/las/current/jdk （你的jdk安装路径）</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
core-site.xml</p>
<div class="dp-highlighter bg_html" style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<div class="bar" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;">
<div class="tools" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">[html]</span> <a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="ViewSource" title="view plain" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">view
 plain</a><a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="CopyToClipboard" title="copy" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">copy</a></div>
</div>
<ol class="dp-xml" start="1" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;"><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="comments" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;!-- Put site-specific property overrides in this file. --&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">configuration</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">          <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">fs.default.name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">          <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">hdfs://master:9000</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">        <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">        <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">          <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">Hadoop.tmp.dir</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">          <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">/tmp/Hadoop-root</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">configuration</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li></ol></div>
<span style="color:rgb(51,51,51);font-size:14px;line-height:25.91666603088379px;">notes: fs.default.name,设置namenode所在主机，端口号是9000</span>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;">
hdfs-site.xml：</p>
<div class="dp-highlighter bg_html" style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<div class="bar" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;">
<div class="tools" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">[html]</span> <a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="ViewSource" title="view plain" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">view
 plain</a><a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="CopyToClipboard" title="copy" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">copy</a></div>
</div>
<ol class="dp-xml" start="1" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;"><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;?</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">xml</span><span style="border:0px;vertical-align:baseline;background-color:transparent;"> </span><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">version</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">"1.0"</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">?&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;?</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">xml-stylesheet</span><span style="border:0px;vertical-align:baseline;background-color:transparent;"> </span><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">type</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">"text/xsl"</span><span style="border:0px;vertical-align:baseline;background-color:transparent;"> </span><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">href</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">"configuration.xsl"</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">?&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="comments" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;!-- Put site-specific property overrides in this file. --&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">configuration</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">          <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">dfs.replication</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">          <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">2</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">configuration</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li></ol></div>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
notes: dfs.replication，设置数据块的复制次数，默认是3，如果slave节点数少于3，则写成相应的1或者2</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;">
mapred-site.xml</p>
<div class="dp-highlighter bg_html" style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<div class="bar" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;">
<div class="tools" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">[html]</span> <a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="ViewSource" title="view plain" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">view
 plain</a><a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="CopyToClipboard" title="copy" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">copy</a></div>
</div>
<ol class="dp-xml" start="1" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;"><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;?</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">xml</span><span style="border:0px;vertical-align:baseline;background-color:transparent;"> </span><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">version</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">"1.0"</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">?&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;?</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">xml-stylesheet</span><span style="border:0px;vertical-align:baseline;background-color:transparent;"> </span><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">type</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">"text/xsl"</span><span style="border:0px;vertical-align:baseline;background-color:transparent;"> </span><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">href</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">"configuration.xsl"</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">?&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="comments" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;!-- Put site-specific property overrides in this file. --&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">configuration</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">          <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">mapred.job.tracker</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">          <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">http://master:9001</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">configuration</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li></ol></div>
<br style="color:rgb(51,51,51);font-size:14px;"><span style="color:rgb(51,51,51);font-size:14px;line-height:25.91666603088379px;">notes: mapred.job.tracker，设置jobtracker所在机器，端口号9001</span>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
2&gt; 修改conf/masters，内容设置为master， 修改conf/slaves，内容设置为：</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
s1</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
s2</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
3&gt; 将解压以后并配置好的hadoop-1.0.4整个文件夹拷贝到两台slave上</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
4&gt; 在master上，运行/bin/start-all.sh 并用jps命令查看如下：</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
[hadoop@master bin]$ /opt/las/current/jdk/bin/jps<br style="line-height:normal !important;">
22735 SecondaryNameNode<br style="line-height:normal !important;">
23068 Jps<br style="line-height:normal !important;">
22825 JobTracker<br style="line-height:normal !important;">
22568 NameNode</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
在s1上查看：</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
[hadoop@s1 logs]$  /opt/las/current/jdk/bin/jps<br style="line-height:normal !important;">
11201 TaskTracker<br style="line-height:normal !important;">
11097 DataNode<br style="line-height:normal !important;">
11319 Jps</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
在s2上查看：</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
[hadoop@s2 bin]$ /opt/las/current/jdk/bin/jps<br style="line-height:normal !important;">
29663 TaskTracker<br style="line-height:normal !important;">
29715 Jps<br style="line-height:normal !important;">
29561 DataNode</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
打开浏览器，输入http://192.168.1.2:50070 可以查看namenode，点击Live Nodes可以查看data node</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
输入http://192.168.1.2:50030查看master Hadoop Map/Reduce Administration</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
192.168.1.2是master的IP</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;">
*********************************************</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
zookeeper:</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
*********************************************</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
1&gt;在master机器上解压zookeeper，cd conf,  cp zoo_sample.cfg zoo.cfg， 默认采用zoo.cfg作为配置文件</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
修改zoo.cfg:</p>
<div class="dp-highlighter bg_html" style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<div class="bar" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;">
<div class="tools" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">[html]</span> <a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="ViewSource" title="view plain" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">view
 plain</a><a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="CopyToClipboard" title="copy" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">copy</a></div>
</div>
<ol class="dp-xml" start="1" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;"><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"># The number of milliseconds of each tick  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">tickTime</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">2000</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"># The number of ticks that the initial  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"># synchronization phase can take  </span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">initLimit</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">10</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"># The number of ticks that can pass between  </span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"># sending a request and getting an acknowledgement  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">syncLimit</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">5</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"># the directory where the snapshot is stored.  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"># do not use /tmp for storage, /tmp here is just  </span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"># example sakes.  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">dataDir</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=/tmp/zookeeper  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"># the port at which the clients will connect  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">clientPort</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">2181</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">server.1</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">s1</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">:2888:3888  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">server.2</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">s2</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">:2888:3888  
  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">server.3</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">master</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">:2888:3888  
  </span></span></li></ol></div>
<br style="color:rgb(51,51,51);font-size:14px;"><span style="color:rgb(51,51,51);font-size:14px;line-height:25.91666603088379px;">2&gt; 将解压并配置好的zookeeper-3.4.3整个文件夹scp到s1与s2</span>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
3&gt; 在dataDir目录/tmp/zookeeper（没有就手动创建）下，创建文件myid，文件的内容为以上对应的server.id中的id</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
如：master内容为3， 同样，s1与s2内容分别为1和2</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
4&gt; 分别在三台机器上启动zookeeper:</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
bin/zkServer.sh start,</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
通过命令./zkServer.sh status查看状态，一个为leader,其他为follower</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
log文件：bin/zookeeper.out</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<span style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;"><span style="border:0px;font-size:12px;vertical-align:baseline;background-color:transparent;">如果三台机器没有都执行
 zkServer.sh start 就在某台上执行 zkServer.sh status 就会报错。这时 </span></span><span style="border:0px;font-size:12px;vertical-align:baseline;line-height:26px;font-family:Arial;"><span style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;">可以忽略，原因是还有节点没有启动zookeeper，全部启动之后，自然就不会出异常了。</span></span></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<div style="border:0px;font-size:13.63636302947998px;vertical-align:baseline;line-height:26px;color:rgb(51,51,51);font-family:Arial;">
</div>
<div style="border:0px;font-size:13.63636302947998px;vertical-align:baseline;line-height:26px;color:rgb(51,51,51);font-family:Arial;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;"><span style="border:0px;font-size:12px;vertical-align:baseline;background-color:transparent;">这时可以执行$
 zkCli.sh -server xxx.xxx.xxx.xxx:2181，检查指定服务器是否成功启动。</span></span></div>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
******************************************************</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
                                     hbase</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
******************************************************</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
1&gt; 在master机器上 解压hbase-0.94.0.tar.gz ，</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
将hbase-0.94.0/lib下面的hadoop-core-1.0.2.jar 删除并替换为已经安装的hadoop-core-1.0.4.jar</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
2&gt; 修改conf/hbase-env.sh 里面JAVA_HOME路径 并设置export HBASE_MANAGES_ZK=false，这样禁止hbase使用自带的zookeeper</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
3&gt; hbase-site.xml:</p>
<div class="dp-highlighter bg_html" style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<div class="bar" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;">
<div class="tools" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">[html]</span> <a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="ViewSource" title="view plain" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">view
 plain</a><a href="http://blog.csdn.net/sundongsdu/article/details/8101287#" rel="nofollow" class="CopyToClipboard" title="copy" style="border:0px;vertical-align:baseline;background-color:transparent;color:rgb(102,102,102);text-decoration:none;">copy</a></div>
</div>
<ol class="dp-xml" start="1" style="border:0px;vertical-align:baseline;background-color:transparent;line-height:normal !important;"><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;?</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">xml</span><span style="border:0px;vertical-align:baseline;background-color:transparent;"> </span><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">version</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">"1.0"</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">?&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;?</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">xml-stylesheet</span><span style="border:0px;vertical-align:baseline;background-color:transparent;"> </span><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">type</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">"text/xsl"</span><span style="border:0px;vertical-align:baseline;background-color:transparent;"> </span><span class="attribute" style="border:0px;vertical-align:baseline;background-color:transparent;">href</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">=</span><span class="attribute-value" style="border:0px;vertical-align:baseline;background-color:transparent;">"configuration.xsl"</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">?&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">configuration</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">    <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">hbase.rootdir</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">    <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">hdfs://master:9000/hbase</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">    <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">hbase.cluster.distributed</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">    <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">true</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">    <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">hbase.zookeeper.quorum</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">name</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">    <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">master,s1,s2</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">value</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li class="alt" style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;">  <span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">property</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li><li style="border:0px;vertical-align:baseline;background-color:transparent;">
<span style="border:0px;vertical-align:baseline;background-color:transparent;"><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&lt;/</span><span class="tag-name" style="border:0px;vertical-align:baseline;background-color:transparent;">configuration</span><span class="tag" style="border:0px;vertical-align:baseline;background-color:transparent;">&gt;</span><span style="border:0px;vertical-align:baseline;background-color:transparent;">  </span></span></li></ol></div>
<br style="color:rgb(51,51,51);font-size:14px;"><span style="color:rgb(51,51,51);font-size:14px;line-height:25.91666603088379px;">4&gt; 修改conf/regionservers，设置为</span>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
s1</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
s2</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
5&gt; 将hbase-0.94修改后的整个文件加拷贝到s1, s2</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
6&gt; 在master机器上运行.bin/start-hbase.sh，将会启动三台机器上的hbase</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
此时在master上运行jps命令：</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
[hadoop@master bin]$ /opt/las/current/jdk/bin/jps<br style="line-height:normal !important;">
22735 SecondaryNameNode<br style="line-height:normal !important;">
24604 Jps<br style="line-height:normal !important;">
23963 QuorumPeerMain<br style="line-height:normal !important;">
24479 HMaster<br style="line-height:normal !important;">
22825 JobTracker<br style="line-height:normal !important;">
22568 NameNode</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
s1上运行jps:</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
[las@3as03-guest1 hadoop]$ /opt/las/current/jdk/bin/jps<br style="line-height:normal !important;">
11953 Jps<br style="line-height:normal !important;">
11611 QuorumPeerMain<br style="line-height:normal !important;">
11201 TaskTracker<br style="line-height:normal !important;">
11097 DataNode<br style="line-height:normal !important;">
11892 HRegionServer</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
s2上运行jps:</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
[las@3as03-guest2 hadoop]$ /opt/las/current/jdk/bin/jps<br style="line-height:normal !important;">
30339 QuorumPeerMain<br style="line-height:normal !important;">
29663 TaskTracker<br style="line-height:normal !important;">
30739 HRegionServer<br style="line-height:normal !important;">
30810 Jps<br style="line-height:normal !important;">
29561 DataNode</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
在浏览器中打开192.168.1.2:60010可以看到hbase master的页面，打开192.168.1.3:60030或者192.168.1.4:60030 可以看到hbase region server的页面</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
如果页面打不开，则可能是hadoop安全模式的问题，可以查看log确定，如果是这个问题，可以通过下面的常见问题关掉。</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
整个系统启动过程为：hdoop, zookeeper, hbase，停止的过程相反</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
*************************</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
常见问题：</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
*************************</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
1&gt; 在master上./start-all.sh以后，通过jps命令查看slave机器发现TaskTracker启动了，但是datanode没有启动，查看slave机器上的logs下的hadoop-xxx-datanode-xxx-xxx.log</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: java.io.IOException: Incompatible namespaceIDs in /tmp/hadoop-las/dfs/data: namenode namespaceID = 1837940173; datanode namespaceID = 637354847</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
解决方案：http://blog.csdn.net/wh62592855/article/details/5752199， 这里采用的是删掉/tmp下面的文件系统重新bin/hadoop namenode -format</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
<br style="line-height:normal !important;"></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
2&gt; 退出hbase的时候一直处于等待状态，查看log:</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:25.91666603088379px;color:rgb(51,51,51);">
Waiting for dfs to exit safe mode...</p>
<span style="color:rgb(51,51,51);font-size:14px;line-height:25.91666603088379px;">解决方案：在hadoop的bin目录下执行 ./hadoop dfsadmin -safemode leave 退出安全模式</span>
            </div>
                </div>