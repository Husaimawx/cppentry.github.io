---
layout:     post
title:      基于CentOS6.5编译Spark2.2.0源码
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
一、创建hadoop用户及目录</p>
<pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:23.8px;color:rgb(51,51,51);"><code class="hljs ruby has-numbering" style="font-family:'Source Code Pro', monospace;font-size:12.6px;color:inherit;background:transparent;display:block;"><span class="hljs-number" style="color:rgb(0,102,102);">1</span> 创建用户
[root<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> ~]<span class="hljs-comment" style="color:rgb(136,0,0);"># useradd hadoop</span>

<span class="hljs-number" style="color:rgb(0,102,102);">2</span> 设置密码
[root<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> ~]<span class="hljs-comment" style="color:rgb(136,0,0);"># passwd hadoop</span>

<span class="hljs-number" style="color:rgb(0,102,102);">3</span> 切换用户 hadoop
[root<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> ~]<span class="hljs-comment" style="color:rgb(136,0,0);"># su - hadoop</span>
[hadoop<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> ~]<span class="hljs-variable" style="color:rgb(102,0,102);">$ </span>pwd
/home/hadoop

<span class="hljs-number" style="color:rgb(0,102,102);">4</span> 创建目录
[hadoop<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> ~]<span class="hljs-variable" style="color:rgb(102,0,102);">$ </span>mkdir app data software lib source
[hadoop<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> ~]<span class="hljs-variable" style="color:rgb(102,0,102);">$ </span>ll
总用量 <span class="hljs-number" style="color:rgb(0,102,102);">20</span>
drwxrwxr-x <span class="hljs-number" style="color:rgb(0,102,102);">2</span> hadoop hadoop <span class="hljs-number" style="color:rgb(0,102,102);">4096</span> <span class="hljs-number" style="color:rgb(0,102,102);">9</span>月   <span class="hljs-number" style="color:rgb(0,102,102);">6</span> 09<span class="hljs-symbol" style="color:rgb(0,102,102);">:</span><span class="hljs-number" style="color:rgb(0,102,102);">59</span> app
drwxrwxr-x <span class="hljs-number" style="color:rgb(0,102,102);">2</span> hadoop hadoop <span class="hljs-number" style="color:rgb(0,102,102);">4096</span> <span class="hljs-number" style="color:rgb(0,102,102);">9</span>月   <span class="hljs-number" style="color:rgb(0,102,102);">6</span> 09<span class="hljs-symbol" style="color:rgb(0,102,102);">:</span><span class="hljs-number" style="color:rgb(0,102,102);">59</span> data
drwxrwxr-x <span class="hljs-number" style="color:rgb(0,102,102);">2</span> hadoop hadoop <span class="hljs-number" style="color:rgb(0,102,102);">4096</span> <span class="hljs-number" style="color:rgb(0,102,102);">9</span>月   <span class="hljs-number" style="color:rgb(0,102,102);">6</span> 09<span class="hljs-symbol" style="color:rgb(0,102,102);">:</span><span class="hljs-number" style="color:rgb(0,102,102);">59</span> lib
drwxrwxr-x <span class="hljs-number" style="color:rgb(0,102,102);">2</span> hadoop hadoop <span class="hljs-number" style="color:rgb(0,102,102);">4096</span> <span class="hljs-number" style="color:rgb(0,102,102);">9</span>月   <span class="hljs-number" style="color:rgb(0,102,102);">6</span> 09<span class="hljs-symbol" style="color:rgb(0,102,102);">:</span><span class="hljs-number" style="color:rgb(0,102,102);">59</span> software
drwxrwxr-x <span class="hljs-number" style="color:rgb(0,102,102);">2</span> hadoop hadoop <span class="hljs-number" style="color:rgb(0,102,102);">4096</span> <span class="hljs-number" style="color:rgb(0,102,102);">9</span>月   <span class="hljs-number" style="color:rgb(0,102,102);">6</span> 09<span class="hljs-symbol" style="color:rgb(0,102,102);">:</span><span class="hljs-number" style="color:rgb(0,102,102);">59</span> source</code></pre><ul class="pre-numbering" style="list-style:none;line-height:23.8px;width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);text-align:right;"><li style="list-style:none;color:rgb(153,153,153);">1</li><li style="list-style:none;color:rgb(153,153,153);">2</li><li style="list-style:none;color:rgb(153,153,153);">3</li><li style="list-style:none;color:rgb(153,153,153);">4</li><li style="list-style:none;color:rgb(153,153,153);">5</li><li style="list-style:none;color:rgb(153,153,153);">6</li><li style="list-style:none;color:rgb(153,153,153);">7</li><li style="list-style:none;color:rgb(153,153,153);">8</li><li style="list-style:none;color:rgb(153,153,153);">9</li><li style="list-style:none;color:rgb(153,153,153);">10</li><li style="list-style:none;color:rgb(153,153,153);">11</li><li style="list-style:none;color:rgb(153,153,153);">12</li><li style="list-style:none;color:rgb(153,153,153);">13</li><li style="list-style:none;color:rgb(153,153,153);">14</li><li style="list-style:none;color:rgb(153,153,153);">15</li><li style="list-style:none;color:rgb(153,153,153);">16</li><li style="list-style:none;color:rgb(153,153,153);">17</li><li style="list-style:none;color:rgb(153,153,153);">18</li><li style="list-style:none;color:rgb(153,153,153);">19</li><li style="list-style:none;color:rgb(153,153,153);">20</li></ul><p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
二、编译所需软件安装（JDK/MAVEN/SCALA/GIT）</p>
<pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:23.8px;color:rgb(51,51,51);"><code class="hljs oxygene has-numbering" style="font-family:'Source Code Pro', monospace;font-size:12.6px;color:inherit;background:transparent;display:block;">http:<span class="hljs-comment" style="color:rgb(136,0,0);">//spark.apache.org/docs/latest/building-spark.html</span>
Building Apache Spark
Apache Maven

The Maven-based build <span class="hljs-keyword" style="color:rgb(0,0,136);">is</span> the build <span class="hljs-keyword" style="color:rgb(0,0,136);">of</span> <span class="hljs-keyword" style="color:rgb(0,0,136);">reference</span> <span class="hljs-keyword" style="color:rgb(0,0,136);">for</span> Apache Spark. Building Spark <span class="hljs-keyword" style="color:rgb(0,0,136);">using</span> Maven requires Maven <span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.<span class="hljs-number" style="color:rgb(0,102,102);">9</span> <span class="hljs-keyword" style="color:rgb(0,0,136);">or</span> newer <span class="hljs-keyword" style="color:rgb(0,0,136);">and</span> Java <span class="hljs-number" style="color:rgb(0,102,102);">8</span>+. Note that support <span class="hljs-keyword" style="color:rgb(0,0,136);">for</span> Java <span class="hljs-number" style="color:rgb(0,102,102);">7</span> was removed <span class="hljs-keyword" style="color:rgb(0,0,136);">as</span> <span class="hljs-keyword" style="color:rgb(0,0,136);">of</span> Spark <span class="hljs-number" style="color:rgb(0,102,102);">2.2</span>.<span class="hljs-number" style="color:rgb(0,102,102);">0</span>.

从官网得知编译spark2.<span class="hljs-number" style="color:rgb(0,102,102);">2.0</span>需要JDK1.<span class="hljs-number" style="color:rgb(0,102,102);">8</span>+和maven <span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.<span class="hljs-number" style="color:rgb(0,102,102);">9</span></code></pre><ul class="pre-numbering" style="list-style:none;line-height:23.8px;width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);text-align:right;"><li style="list-style:none;color:rgb(153,153,153);">1</li><li style="list-style:none;color:rgb(153,153,153);">2</li><li style="list-style:none;color:rgb(153,153,153);">3</li><li style="list-style:none;color:rgb(153,153,153);">4</li><li style="list-style:none;color:rgb(153,153,153);">5</li><li style="list-style:none;color:rgb(153,153,153);">6</li><li style="list-style:none;color:rgb(153,153,153);">7</li></ul><p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
**注：上传的jdk maven scala 等安装包都是用hadoop用户安装的， <br>
所以需执行chown -R hadoop：hadoop xxx.tar.gz来让hadoop用户拥有所有权限**</p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
1、安装JDK1.8 <br>
JDK1.8下载地址 <br><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" rel="nofollow" style="background:transparent;color:rgb(202,12,22);text-decoration:none;">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>
<pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:23.8px;color:rgb(51,51,51);"><code class="hljs ruby has-numbering" style="font-family:'Source Code Pro', monospace;font-size:12.6px;color:inherit;background:transparent;display:block;">将jdk解压到hadoop用户下app目录
[hadoop<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> software]<span class="hljs-variable" style="color:rgb(102,0,102);">$ </span>tar -zxvf jdk-<span class="hljs-number" style="color:rgb(0,102,102);">8</span>u144-linux-x64.tar.gz -<span class="hljs-constant">C</span> ~<span class="hljs-regexp" style="color:rgb(0,136,0);">/app/</span>

[hadoop<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> jdk1.<span class="hljs-number" style="color:rgb(0,102,102);">8.0_144</span>]<span class="hljs-variable" style="color:rgb(102,0,102);">$ </span>pwd
/home/hadoop/app/jdk1.<span class="hljs-number" style="color:rgb(0,102,102);">8.0_144</span>

编辑 ～/.bash_profile添加以下两行
export <span class="hljs-constant">JAVA_HOME</span>=<span class="hljs-regexp" style="color:rgb(0,136,0);">/home/hadoop</span><span class="hljs-regexp" style="color:rgb(0,136,0);">/app/jdk</span>1.<span class="hljs-number" style="color:rgb(0,102,102);">8.0_144</span>
export <span class="hljs-constant">PATH</span>=<span class="hljs-variable" style="color:rgb(102,0,102);">$JAVA_HOME</span>/<span class="hljs-symbol" style="color:rgb(0,102,102);">bin:</span><span class="hljs-variable" style="color:rgb(102,0,102);">$PATH</span>

source ～/.bash_profile 使环境变量生效

验证是否配置成功
[hadoop<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> jdk1.<span class="hljs-number" style="color:rgb(0,102,102);">8.0_144</span>]<span class="hljs-variable" style="color:rgb(102,0,102);">$ </span>which java
~<span class="hljs-regexp" style="color:rgb(0,136,0);">/app/jdk</span>1.<span class="hljs-number" style="color:rgb(0,102,102);">8.0_144</span>/bin/java

[hadoop<span class="hljs-variable" style="color:rgb(102,0,102);">@hadoop000</span> jdk1.<span class="hljs-number" style="color:rgb(0,102,102);">8.0_144</span>]<span class="hljs-variable" style="color:rgb(102,0,102);">$ </span>java -version
java version <span class="hljs-string" style="color:rgb(0,136,0);">"1.8.0_144"</span>
<span class="hljs-constant">Java</span>(<span class="hljs-constant">TM</span>) <span class="hljs-constant">SE</span> <span class="hljs-constant">Runtime</span> <span class="hljs-constant">Environment</span> (build <span class="hljs-number" style="color:rgb(0,102,102);">1.8</span>.<span class="hljs-number" style="color:rgb(0,102,102);">0_144</span>-b01)
<span class="hljs-constant">Java</span> <span class="hljs-constant">HotSpot</span>(<span class="hljs-constant">TM</span>) <span class="hljs-number" style="color:rgb(0,102,102);">64</span>-<span class="hljs-constant">Bit</span> <span class="hljs-constant">Server</span> <span class="hljs-constant">VM</span> (build <span class="hljs-number" style="color:rgb(0,102,102);">25.144</span>-b01, mixed mode)
</code></pre><ul class="pre-numbering" style="list-style:none;line-height:23.8px;width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);text-align:right;"><li style="list-style:none;color:rgb(153,153,153);">1</li><li style="list-style:none;color:rgb(153,153,153);">2</li><li style="list-style:none;color:rgb(153,153,153);">3</li><li style="list-style:none;color:rgb(153,153,153);">4</li><li style="list-style:none;color:rgb(153,153,153);">5</li><li style="list-style:none;color:rgb(153,153,153);">6</li><li style="list-style:none;color:rgb(153,153,153);">7</li><li style="list-style:none;color:rgb(153,153,153);">8</li><li style="list-style:none;color:rgb(153,153,153);">9</li><li style="list-style:none;color:rgb(153,153,153);">10</li><li style="list-style:none;color:rgb(153,153,153);">11</li><li style="list-style:none;color:rgb(153,153,153);">12</li><li style="list-style:none;color:rgb(153,153,153);">13</li><li style="list-style:none;color:rgb(153,153,153);">14</li><li style="list-style:none;color:rgb(153,153,153);">15</li><li style="list-style:none;color:rgb(153,153,153);">16</li><li style="list-style:none;color:rgb(153,153,153);">17</li><li style="list-style:none;color:rgb(153,153,153);">18</li><li style="list-style:none;color:rgb(153,153,153);">19</li><li style="list-style:none;color:rgb(153,153,153);">20</li><li style="list-style:none;color:rgb(153,153,153);">21</li></ul><p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
2、 安装MAVAEN3.3.9 <br>
maven3.3.9下载地址 <br><a href="https://mirrors.tuna.tsinghua.edu.cn/apache//maven/maven-3/3.3.9/binaries/" rel="nofollow" style="background:transparent;color:rgb(202,12,22);text-decoration:none;">https://mirrors.tuna.tsinghua.edu.cn/apache//maven/maven-3/3.3.9/binaries/</a></p>
<pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:23.8px;color:rgb(51,51,51);"><code class="hljs d has-numbering" style="font-family:'Source Code Pro', monospace;font-size:12.6px;color:inherit;background:transparent;display:block;">解压
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9]$ unzip apache-maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9-bin.zip

移动到app目录
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9]$ mv apache-maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9 ~/app/

更名
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9]$ mv apache-maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9/  maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9/

查看路径
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9]$ pwd
/home/hadoop/app/maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9

编辑环境变量，记得source生效
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9]$ vim ~/.bash_profile
<span class="hljs-keyword" style="color:rgb(0,0,136);">export</span> MAVEN_HOME=/home/hadoop/app/maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9
<span class="hljs-keyword" style="color:rgb(0,0,136);">export</span> PATH=$MAVEN_HOME/bin:$PATH

验证
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9]$ which mvn
~/app/maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9/bin/mvn
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9]$ mvn -<span class="hljs-keyword" style="color:rgb(0,0,136);">version</span>
Apache Maven <span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; <span class="hljs-number" style="color:rgb(0,102,102);">2015</span>-<span class="hljs-number" style="color:rgb(0,102,102);">11</span>-<span class="hljs-number" style="color:rgb(0,102,102);">11</span>T00:<span class="hljs-number" style="color:rgb(0,102,102);">41</span>:<span class="hljs-number" style="color:rgb(0,102,102);">47</span>+<span class="hljs-number" style="color:rgb(0,102,102);">0</span>8:<span class="hljs-number" style="color:rgb(0,102,102);">0</span>0)
Maven home: /home/hadoop/app/maven-<span class="hljs-number" style="color:rgb(0,102,102);">3.3</span>.9
Java <span class="hljs-keyword" style="color:rgb(0,0,136);">version</span>: <span class="hljs-number" style="color:rgb(0,102,102);">1.8</span>.0_144, vendor: Oracle Corporation
Java home: /home/hadoop/app/jdk1.8.0_144/jre
Default locale: zh_CN, platform encoding: UTF-<span class="hljs-number" style="color:rgb(0,102,102);">8</span>
OS name: <span class="hljs-string" style="color:rgb(0,136,0);">"linux"</span>, <span class="hljs-keyword" style="color:rgb(0,0,136);">version</span>: <span class="hljs-string" style="color:rgb(0,136,0);">"2.6.32-431.el6.x86_64"</span>, arch: <span class="hljs-string" style="color:rgb(0,136,0);">"amd64"</span>, family: <span class="hljs-string" style="color:rgb(0,136,0);">"unix"</span>
</code></pre><ul class="pre-numbering" style="list-style:none;line-height:23.8px;width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);text-align:right;"><li style="list-style:none;color:rgb(153,153,153);">1</li><li style="list-style:none;color:rgb(153,153,153);">2</li><li style="list-style:none;color:rgb(153,153,153);">3</li><li style="list-style:none;color:rgb(153,153,153);">4</li><li style="list-style:none;color:rgb(153,153,153);">5</li><li style="list-style:none;color:rgb(153,153,153);">6</li><li style="list-style:none;color:rgb(153,153,153);">7</li><li style="list-style:none;color:rgb(153,153,153);">8</li><li style="list-style:none;color:rgb(153,153,153);">9</li><li style="list-style:none;color:rgb(153,153,153);">10</li><li style="list-style:none;color:rgb(153,153,153);">11</li><li style="list-style:none;color:rgb(153,153,153);">12</li><li style="list-style:none;color:rgb(153,153,153);">13</li><li style="list-style:none;color:rgb(153,153,153);">14</li><li style="list-style:none;color:rgb(153,153,153);">15</li><li style="list-style:none;color:rgb(153,153,153);">16</li><li style="list-style:none;color:rgb(153,153,153);">17</li><li style="list-style:none;color:rgb(153,153,153);">18</li><li style="list-style:none;color:rgb(153,153,153);">19</li><li style="list-style:none;color:rgb(153,153,153);">20</li><li style="list-style:none;color:rgb(153,153,153);">21</li><li style="list-style:none;color:rgb(153,153,153);">22</li><li style="list-style:none;color:rgb(153,153,153);">23</li><li style="list-style:none;color:rgb(153,153,153);">24</li><li style="list-style:none;color:rgb(153,153,153);">25</li><li style="list-style:none;color:rgb(153,153,153);">26</li><li style="list-style:none;color:rgb(153,153,153);">27</li><li style="list-style:none;color:rgb(153,153,153);">28</li><li style="list-style:none;color:rgb(153,153,153);">29</li></ul><p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
3、scala安装 <br>
为后续操作spark，现安装scala . scala2.11.7下载地址 <br><a href="http://www.scala-lang.org/download/2.11.7.html" rel="nofollow" style="background:transparent;color:rgb(202,12,22);text-decoration:none;">http://www.scala-lang.org/download/2.11.7.html</a></p>
<pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:23.8px;color:rgb(51,51,51);"><code class="hljs d has-numbering" style="font-family:'Source Code Pro', monospace;font-size:12.6px;color:inherit;background:transparent;display:block;">解压到app目录 
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> software]$ tar -zxvf scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7.tgz -C ~/app/

查看路径
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> app]$ cd scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7/
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7]$ pwd
/home/hadoop/app/scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7

配置环境变量，记得source生效
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7]$ vim ~/.bash_profile
<span class="hljs-keyword" style="color:rgb(0,0,136);">export</span> SCALA_HOME=/home/hadoop/app/scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7
<span class="hljs-keyword" style="color:rgb(0,0,136);">export</span> PATH=$SCALA_HOME/bin:$PATH

验证
[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7]$ scala -<span class="hljs-keyword" style="color:rgb(0,0,136);">version</span>
Scala code runner <span class="hljs-keyword" style="color:rgb(0,0,136);">version</span> <span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7 -- Copyright <span class="hljs-number" style="color:rgb(0,102,102);">2002</span>-<span class="hljs-number" style="color:rgb(0,102,102);">2013</span>, LAMP/EPFL

[hadoop<span class="hljs-keyword" style="color:rgb(0,0,136);">@hadoop000</span> scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7]$ scala
Welcome to Scala <span class="hljs-keyword" style="color:rgb(0,0,136);">version</span> <span class="hljs-number" style="color:rgb(0,102,102);">2.11</span>.7 (Java HotSpot(TM) <span class="hljs-number" style="color:rgb(0,102,102);">64</span>-Bit Server VM, Java <span class="hljs-number" style="color:rgb(0,102,102);">1.8</span>.0_144).
Type <span class="hljs-keyword" style="color:rgb(0,0,136);">in</span> expressions to have them evaluated.
Type :help <span class="hljs-keyword" style="color:rgb(0,0,136);">for</span> more information.

scala&gt;
</code></pre><ul class="pre-numbering" style="list-style:none;line-height:23.8px;width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);text-align:right;"><li style="list-style:none;color:rgb(153,153,153);">1</li><li style="list-style:none;color:rgb(153,153,153);">2</li><li style="list-style:none;color:rgb(153,153,153);">3</li><li style="list-style:none;color:rgb(153,153,153);">4</li><li style="list-style:none;color:rgb(153,153,153);">5</li><li style="list-style:none;color:rgb(153,153,153);">6</li><li style="list-style:none;color:rgb(153,153,153);">7</li><li style="list-style:none;color:rgb(153,153,153);">8</li><li style="list-style:none;color:rgb(153,153,153);">9</li><li style="list-style:none;color:rgb(153,153,153);">10</li><li style="list-style:none;color:rgb(153,153,153);">11</li><li style="list-style:none;color:rgb(153,153,153);">12</li><li style="list-style:none;color:rgb(153,153,153);">13</li><li style="list-style:none;color:rgb(153,153,153);">14</li><li style="list-style:none;color:rgb(153,153,153);">15</li><li style="list-style:none;color:rgb(153,153,153);">16</li><li style="list-style:none;color:rgb(153,153,153);">17</li><li style="list-style:none;color:rgb(153,153,153);">18</li><li style="list-style:none;color:rgb(153,153,153);">19</li><li style="list-style:none;color:rgb(153,153,153);">20</li><li style="list-style:none;color:rgb(153,153,153);">21</li><li style="list-style:none;color:rgb(153,153,153);">22</li><li style="list-style:none;color:rgb(153,153,153);">23</li><li style="list-style:none;color:rgb(153,153,153);">24</li></ul><p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
4、Git安装(可选)</p>
<pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:23.8px;color:rgb(51,51,51);"><code class="hljs avrasm has-numbering" style="font-family:'Source Code Pro', monospace;font-size:12.6px;color:inherit;background:transparent;display:block;">使用root在/etc/sudoers文件下添加 hadoop ALL=(ALL)  ALL
[root@hadoop000 bin]<span class="hljs-preprocessor" style="color:rgb(68,68,68);"># vim /etc/sudoers</span>
<span class="hljs-preprocessor" style="color:rgb(68,68,68);">#Allow root to run any commands anywhere</span>
root    ALL=(ALL)       ALL
hadoop   ALL=(ALL)       ALL
:wq!强制保存退出

hadoop用户使用sudo权限安装git

[hadoop@hadoop000 scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span><span class="hljs-number" style="color:rgb(0,102,102);">.7</span>]$  sudo yum -<span class="hljs-built_in" style="color:rgb(102,0,102);">y</span> install git
Loaded plugins: fastestmirror, refresh-packagekit, security
Loading mirror speeds from cached hostfile
 * base: mirrors<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.sohu</span><span class="hljs-preprocessor" style="color:rgb(68,68,68);">.com</span>
 * extras: mirrors<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.sohu</span><span class="hljs-preprocessor" style="color:rgb(68,68,68);">.com</span>
 * updates: mirrors<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.sohu</span><span class="hljs-preprocessor" style="color:rgb(68,68,68);">.com</span>
base                                                                                                             | <span class="hljs-number" style="color:rgb(0,102,102);">3.7</span> kB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">00</span>
base/primary_db                                                                                                  | <span class="hljs-number" style="color:rgb(0,102,102);">4.7</span> MB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">07</span>
<span class="hljs-label">http:</span>//<span class="hljs-number" style="color:rgb(0,102,102);">192.168</span><span class="hljs-number" style="color:rgb(0,102,102);">.95</span><span class="hljs-number" style="color:rgb(0,102,102);">.10</span>/iso/repodata/repomd<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.xml</span>: [Errno <span class="hljs-number" style="color:rgb(0,102,102);">14</span>] PYCURL ERROR <span class="hljs-number" style="color:rgb(0,102,102);">7</span> - <span class="hljs-string" style="color:rgb(0,136,0);">"couldn't connect to host"</span>
Trying other mirror.
<span class="hljs-label">Error:</span> Cannot retrieve repository metadata (repomd<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.xml</span>) for repository: centos-iso. Please verify its path <span class="hljs-keyword" style="color:rgb(0,0,136);">and</span> try again
[hadoop@hadoop000 scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span><span class="hljs-number" style="color:rgb(0,102,102);">.7</span>]$  sudo yum -<span class="hljs-built_in" style="color:rgb(102,0,102);">y</span> install git
Loaded plugins: fastestmirror, refresh-packagekit, security
Loading mirror speeds from cached hostfile
 * base: mirrors<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.sohu</span><span class="hljs-preprocessor" style="color:rgb(68,68,68);">.com</span>
 * extras: mirrors<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.sohu</span><span class="hljs-preprocessor" style="color:rgb(68,68,68);">.com</span>
 * updates: mirrors<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.sohu</span><span class="hljs-preprocessor" style="color:rgb(68,68,68);">.com</span>
extras                                                                                                           | <span class="hljs-number" style="color:rgb(0,102,102);">3.4</span> kB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">00</span>
extras/primary_db                                                                                                |  <span class="hljs-number" style="color:rgb(0,102,102);">29</span> kB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">00</span>
updates                                                                                                          | <span class="hljs-number" style="color:rgb(0,102,102);">3.4</span> kB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">00</span>
updates/primary_db                                                                                               | <span class="hljs-number" style="color:rgb(0,102,102);">3.1</span> MB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">07</span>
Setting up Install Process
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package git<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.x</span>86_64 <span class="hljs-number" style="color:rgb(0,102,102);">0</span>:<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9 will be installed
--&gt; Processing Dependency: perl-Git = <span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9 for package: git-<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.x</span>86_64
--&gt; Processing Dependency: perl(Git) for package: git-<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.x</span>86_64
--&gt; Processing Dependency: perl(Error) for package: git-<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.x</span>86_64
--&gt; Running transaction check
---&gt; Package perl-Error<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span> <span class="hljs-number" style="color:rgb(0,102,102);">1</span>:<span class="hljs-number" style="color:rgb(0,102,102);">0.17015</span>-<span class="hljs-number" style="color:rgb(0,102,102);">4.</span>el6 will be installed
---&gt; Package perl-Git<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span> <span class="hljs-number" style="color:rgb(0,102,102);">0</span>:<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9 will be installed
--&gt; Finished Dependency Resolution

Dependencies Resolved

========================================================================================================================================
 Package                         Arch                        Version                                 Repository                    Size
========================================================================================================================================
<span class="hljs-label">Installing:</span>
 git                             x86_64                      <span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9                           updates                      <span class="hljs-number" style="color:rgb(0,102,102);">4.6</span> M
Installing for dependencies:
 perl-Error                      noarch                      <span class="hljs-number" style="color:rgb(0,102,102);">1</span>:<span class="hljs-number" style="color:rgb(0,102,102);">0.17015</span>-<span class="hljs-number" style="color:rgb(0,102,102);">4.</span>el6                         base                          <span class="hljs-number" style="color:rgb(0,102,102);">29</span> k
 perl-Git                        noarch                      <span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9                           updates                       <span class="hljs-number" style="color:rgb(0,102,102);">29</span> k

Transaction Summary
========================================================================================================================================
Install       <span class="hljs-number" style="color:rgb(0,102,102);">3</span> Package(s)

Total download size: <span class="hljs-number" style="color:rgb(0,102,102);">4.7</span> M
Installed size: <span class="hljs-number" style="color:rgb(0,102,102);">15</span> M
Downloading Packages:
(<span class="hljs-number" style="color:rgb(0,102,102);">1</span>/<span class="hljs-number" style="color:rgb(0,102,102);">3</span>): git-<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.x</span>86_64<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.rpm</span>                                                                              | <span class="hljs-number" style="color:rgb(0,102,102);">4.6</span> MB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">08</span>
(<span class="hljs-number" style="color:rgb(0,102,102);">2</span>/<span class="hljs-number" style="color:rgb(0,102,102);">3</span>): perl-Error-<span class="hljs-number" style="color:rgb(0,102,102);">0.17015</span>-<span class="hljs-number" style="color:rgb(0,102,102);">4.</span>el6<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span><span class="hljs-preprocessor" style="color:rgb(68,68,68);">.rpm</span>                                                                       |  <span class="hljs-number" style="color:rgb(0,102,102);">29</span> kB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">00</span>
(<span class="hljs-number" style="color:rgb(0,102,102);">3</span>/<span class="hljs-number" style="color:rgb(0,102,102);">3</span>): perl-Git-<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span><span class="hljs-preprocessor" style="color:rgb(68,68,68);">.rpm</span>                                                                         |  <span class="hljs-number" style="color:rgb(0,102,102);">29</span> kB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">00</span>
----------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                   <span class="hljs-number" style="color:rgb(0,102,102);">560</span> kB/s | <span class="hljs-number" style="color:rgb(0,102,102);">4.7</span> MB     <span class="hljs-number" style="color:rgb(0,102,102);">00</span>:<span class="hljs-number" style="color:rgb(0,102,102);">08</span>
<span class="hljs-label">warning:</span> rpmts_HdrFromFdno: Header V3 RSA/SHA256 Signature, key ID c105b9de: NOKEY
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-<span class="hljs-number" style="color:rgb(0,102,102);">6</span>
Importing GPG key <span class="hljs-number" style="color:rgb(0,102,102);">0xC105B9DE</span>:
 Userid : CentOS-<span class="hljs-number" style="color:rgb(0,102,102);">6</span> Key (CentOS <span class="hljs-number" style="color:rgb(0,102,102);">6</span> Official Signing Key) &lt;centos-<span class="hljs-number" style="color:rgb(0,102,102);">6</span>-key@centos<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.org</span>&gt;
 Package: centos-release-<span class="hljs-number" style="color:rgb(0,102,102);">6</span>-<span class="hljs-number" style="color:rgb(0,102,102);">5.</span>el6<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.centos</span><span class="hljs-number" style="color:rgb(0,102,102);">.11</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span><span class="hljs-preprocessor" style="color:rgb(68,68,68);">.x</span>86_64 (@anaconda-CentOS-<span class="hljs-number" style="color:rgb(0,102,102);">201311272149.</span>x86_64/<span class="hljs-number" style="color:rgb(0,102,102);">6.5</span>)
 From   : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-<span class="hljs-number" style="color:rgb(0,102,102);">6</span>
Running rpm_check_debug
Running Transaction Test
Transaction Test Succeeded
Running Transaction
  Installing : <span class="hljs-number" style="color:rgb(0,102,102);">1</span>:perl-Error-<span class="hljs-number" style="color:rgb(0,102,102);">0.17015</span>-<span class="hljs-number" style="color:rgb(0,102,102);">4.</span>el6<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span>                                                                                    <span class="hljs-number" style="color:rgb(0,102,102);">1</span>/<span class="hljs-number" style="color:rgb(0,102,102);">3</span>
  Installing : git-<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.x</span>86_64                                                                                             <span class="hljs-number" style="color:rgb(0,102,102);">2</span>/<span class="hljs-number" style="color:rgb(0,102,102);">3</span>
  Installing : perl-Git-<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span>                                                                                        <span class="hljs-number" style="color:rgb(0,102,102);">3</span>/<span class="hljs-number" style="color:rgb(0,102,102);">3</span>
  Verifying  : <span class="hljs-number" style="color:rgb(0,102,102);">1</span>:perl-Error-<span class="hljs-number" style="color:rgb(0,102,102);">0.17015</span>-<span class="hljs-number" style="color:rgb(0,102,102);">4.</span>el6<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span>                                                                                    <span class="hljs-number" style="color:rgb(0,102,102);">1</span>/<span class="hljs-number" style="color:rgb(0,102,102);">3</span>
  Verifying  : git-<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.x</span>86_64                                                                                             <span class="hljs-number" style="color:rgb(0,102,102);">2</span>/<span class="hljs-number" style="color:rgb(0,102,102);">3</span>
  Verifying  : perl-Git-<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span>                                                                                        <span class="hljs-number" style="color:rgb(0,102,102);">3</span>/<span class="hljs-number" style="color:rgb(0,102,102);">3</span>

<span class="hljs-label">Installed:</span>
  git<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.x</span>86_64 <span class="hljs-number" style="color:rgb(0,102,102);">0</span>:<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9

Dependency Installed:
  perl-Error<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span> <span class="hljs-number" style="color:rgb(0,102,102);">1</span>:<span class="hljs-number" style="color:rgb(0,102,102);">0.17015</span>-<span class="hljs-number" style="color:rgb(0,102,102);">4.</span>el6                                   perl-Git<span class="hljs-preprocessor" style="color:rgb(68,68,68);">.noarch</span> <span class="hljs-number" style="color:rgb(0,102,102);">0</span>:<span class="hljs-number" style="color:rgb(0,102,102);">1.7</span><span class="hljs-number" style="color:rgb(0,102,102);">.1</span>-<span class="hljs-number" style="color:rgb(0,102,102);">9.</span>el6_9

Complete!
[hadoop@hadoop000 scala-<span class="hljs-number" style="color:rgb(0,102,102);">2.11</span><span class="hljs-number" style="color:rgb(0,102,102);">.7</span>]$
</code></pre><ul class="pre-numbering" style="list-style:none;line-height:23.8px;width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);text-align:right;"><li style="list-style:none;color:rgb(153,153,153);">1</li><li style="list-style:none;color:rgb(153,153,153);">2</li><li style="list-style:none;color:rgb(153,153,153);">3</li><li style="list-style:none;color:rgb(153,153,153);">4</li><li style="list-style:none;color:rgb(153,153,153);">5</li><li style="list-style:none;color:rgb(153,153,153);">6</li><li style="list-style:none;color:rgb(153,153,153);">7</li><li style="list-style:none;color:rgb(153,153,153);">8</li><li style="list-style:none;color:rgb(153,153,153);">9</li><li style="list-style:none;color:rgb(153,153,153);">10</li><li style="list-style:none;color:rgb(153,153,153);">11</li><li style="list-style:none;color:rgb(153,153,153);">12</li><li style="list-style:none;color:rgb(153,153,153);">13</li><li style="list-style:none;color:rgb(153,153,153);">14</li><li style="list-style:none;color:rgb(153,153,153);">15</li><li style="list-style:none;color:rgb(153,153,153);">16</li><li style="list-style:none;color:rgb(153,153,153);">17</li><li style="list-style:none;color:rgb(153,153,153);">18</li><li style="list-style:none;color:rgb(153,153,153);">19</li><li style="list-style:none;color:rgb(153,153,153);">20</li><li style="list-style:none;color:rgb(153,153,153);">21</li><li style="list-style:none;color:rgb(153,153,153);">22</li><li style="list-style:none;color:rgb(153,153,153);">23</li><li style="list-style:none;color:rgb(153,153,153);">24</li><li style="list-style:none;color:rgb(153,153,153);">25</li><li style="list-style:none;color:rgb(153,153,153);">26</li><li style="list-style:none;color:rgb(153,153,153);">27</li><li style="list-style:none;color:rgb(153,153,153);">28</li><li style="list-style:none;color:rgb(153,153,153);">29</li><li style="list-style:none;color:rgb(153,153,153);">30</li><li style="list-style:none;color:rgb(153,153,153);">31</li><li style="list-style:none;color:rgb(153,153,153);">32</li><li style="list-style:none;color:rgb(153,153,153);">33</li><li style="list-style:none;color:rgb(153,153,153);">34</li><li style="list-style:none;color:rgb(153,153,153);">35</li><li style="list-style:none;color:rgb(153,153,153);">36</li><li style="list-style:none;color:rgb(153,153,153);">37</li><li style="list-style:none;color:rgb(153,153,153);">38</li><li style="list-style:none;color:rgb(153,153,153);">39</li><li style="list-style:none;color:rgb(153,153,153);">40</li><li style="list-style:none;color:rgb(153,153,153);">41</li><li style="list-style:none;color:rgb(153,153,153);">42</li><li style="list-style:none;color:rgb(153,153,153);">43</li><li style="list-style:none;color:rgb(153,153,153);">44</li><li style="list-style:none;color:rgb(153,153,153);">45</li><li style="list-style:none;color:rgb(153,153,153);">46</li><li style="list-style:none;color:rgb(153,153,153);">47</li><li style="list-style:none;color:rgb(153,153,153);">48</li><li style="list-style:none;color:rgb(153,153,153);">49</li><li style="list-style:none;color:rgb(153,153,153);">50</li><li style="list-style:none;color:rgb(153,153,153);">51</li><li style="list-style:none;color:rgb(153,153,153);">52</li><li style="list-style:none;color:rgb(153,153,153);">53</li><li style="list-style:none;color:rgb(153,153,153);">54</li><li style="list-style:none;color:rgb(153,153,153);">55</li><li style="list-style:none;color:rgb(153,153,153);">56</li><li style="list-style:none;color:rgb(153,153,153);">57</li><li style="list-style:none;color:rgb(153,153,153);">58</li><li style="list-style:none;color:rgb(153,153,153);">59</li><li style="list-style:none;color:rgb(153,153,153);">60</li><li style="list-style:none;color:rgb(153,153,153);">61</li><li style="list-style:none;color:rgb(153,153,153);">62</li><li style="list-style:none;color:rgb(153,153,153);">63</li><li style="list-style:none;color:rgb(153,153,153);">64</li><li style="list-style:none;color:rgb(153,153,153);">65</li><li style="list-style:none;color:rgb(153,153,153);">66</li><li style="list-style:none;color:rgb(153,153,153);">67</li><li style="list-style:none;color:rgb(153,153,153);">68</li><li style="list-style:none;color:rgb(153,153,153);">69</li><li style="list-style:none;color:rgb(153,153,153);">70</li><li style="list-style:none;color:rgb(153,153,153);">71</li><li style="list-style:none;color:rgb(153,153,153);">72</li><li style="list-style:none;color:rgb(153,153,153);">73</li><li style="list-style:none;color:rgb(153,153,153);">74</li><li style="list-style:none;color:rgb(153,153,153);">75</li><li style="list-style:none;color:rgb(153,153,153);">76</li><li style="list-style:none;color:rgb(153,153,153);">77</li><li style="list-style:none;color:rgb(153,153,153);">78</li><li style="list-style:none;color:rgb(153,153,153);">79</li><li style="list-style:none;color:rgb(153,153,153);">80</li><li style="list-style:none;color:rgb(153,153,153);">81</li><li style="list-style:none;color:rgb(153,153,153);">82</li><li style="list-style:none;color:rgb(153,153,153);">83</li><li style="list-style:none;color:rgb(153,153,153);">84</li><li style="list-style:none;color:rgb(153,153,153);">85</li><li style="list-style:none;color:rgb(153,153,153);">86</li><li style="list-style:none;color:rgb(153,153,153);">87</li><li style="list-style:none;color:rgb(153,153,153);">88</li><li style="list-style:none;color:rgb(153,153,153);">89</li><li style="list-style:none;color:rgb(153,153,153);">90</li><li style="list-style:none;color:rgb(153,153,153);">91</li></ul><p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
三、开始编译 <br>
1、在开始编译之前我们问一下自己为什么要编译？官网上不是有sprak安装包吗？ <br>
官网上的确提供了一些Hadoop版本的Spark安装包，但是我们的生产环境各异，提供的安装包能满足现实的环境要求吗？答案肯定是否定的，所以我们需要编译一个能够集成到自己生产环境当中的Hadoop版本的Spark安装包。</p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
2、spark-2.2.0.tgz包下载 <br><a href="http://spark.apache.org/downloads.html" rel="nofollow" style="background:transparent;color:rgb(202,12,22);text-decoration:none;">http://spark.apache.org/downloads.html</a> <br><img src="https://img-blog.csdn.net/20170906121230547?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2F2aW5fY2h1bg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" style="border:0px;vertical-align:middle;"> <br>
将下载好的安装包解压到hadoop用户目录下的source文件中 <br>
[hadoop@hadoop000 software]$ tar -zxvf spark-2.2.0.tgz -C ~/source/ <br>
解压后目录如下 <br><img src="https://img-blog.csdn.net/20170906121611776?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvR2F2aW5fY2h1bg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" style="border:0px;vertical-align:middle;"></p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
3 、从官网得知编译命令如下（<a href="http://spark.apache.org/docs/latest/building-spark.html" rel="nofollow" style="background:transparent;color:rgb(202,12,22);text-decoration:none;">http://spark.apache.org/docs/latest/building-spark.html</a>）</p>
<pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:23.8px;color:rgb(51,51,51);"><code class="hljs lasso has-numbering" style="font-family:'Source Code Pro', monospace;font-size:12.6px;color:inherit;background:transparent;display:block;"><span class="hljs-built_in" style="color:rgb(102,0,102);">.</span>/dev/make<span class="hljs-attribute">-distribution</span><span class="hljs-built_in" style="color:rgb(102,0,102);">.</span>sh <span class="hljs-subst" style="color:rgb(0,0,0);">--</span>name custom<span class="hljs-attribute">-spark</span> <span class="hljs-subst" style="color:rgb(0,0,0);">--</span>pip <span class="hljs-subst" style="color:rgb(0,0,0);">--</span>r <span class="hljs-subst" style="color:rgb(0,0,0);">--</span>tgz <span class="hljs-attribute">-Psparkr</span> <span class="hljs-attribute">-Phadoop</span><span class="hljs-subst" style="color:rgb(0,0,0);">-</span><span class="hljs-number" style="color:rgb(0,102,102);">2.7</span> <span class="hljs-attribute">-Phive</span> <span class="hljs-attribute">-Phive</span><span class="hljs-attribute">-thriftserver</span> <span class="hljs-attribute">-Pmesos</span> <span class="hljs-attribute">-Pyarn</span></code></pre><ul class="pre-numbering" style="list-style:none;line-height:23.8px;width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);text-align:right;"><li style="list-style:none;color:rgb(153,153,153);">1</li></ul><p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
参数说明： <br>
–name：指定编译完成后Spark安装包的名字 <br>
–tgz：以tgz的方式进行压缩 <br>
-Psparkr：编译出来的Spark支持R语言 <br>
-Phadoop-2.4：以hadoop-2.4的profile进行编译，具体的profile可以看出源码根目录中的pom.xml中查看 <br>
-Phive和-Phive-thriftserver：编译出来的Spark支持对Hive的操作 <br>
-Pmesos：编译出来的Spark支持运行在Mesos上 <br>
-Pyarn：编译出来的Spark支持运行在YARN上</p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
那么我们可以根据具体的条件来编译Spark，比如我们使用的Hadoop版本是2.6.0-cdh5.7.0，并且我们需要将Spark运行在YARN上、支持对Hive的操作，那么我们的Spark源码编译脚本就是： <br>
./dev/make-distribution.sh –name 2.6.0-cdh5.7.0 –tgz -Pyarn -Phadoop-2.6 -Phive -Phive-thriftserver -Dhadoop.version=2.6.0-cdh5.7.0 <br>
编译成功后，在Spark源码的根目录中就spark-2.1.0-bin-2.6.0-cdh5.7.0.tgz包，那么我们就可以使用编译出来的这个安装包来进行Spark的安装了</p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
4 、编译前的修改</p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
a. 在spark2.2.0根目录下的pom.xml中的repository标签内（219行）添加以下内容</p>
<pre class="prettyprint" style="font-family:'Source Code Pro', monospace;font-size:14px;line-height:23.8px;color:rgb(51,51,51);"><code class="hljs xml has-numbering" style="font-family:'Source Code Pro', monospace;font-size:12.6px;color:inherit;background:transparent;display:block;"> <span class="hljs-tag" style="color:rgb(0,102,102);">&lt;<span class="hljs-title" style="color:rgb(0,0,136);">repository</span>&gt;</span>
    <span class="hljs-tag" style="color:rgb(0,102,102);">&lt;<span class="hljs-title" style="color:rgb(0,0,136);">id</span>&gt;</span>cloudera<span class="hljs-tag" style="color:rgb(0,102,102);">&lt;/<span class="hljs-title" style="color:rgb(0,0,136);">id</span>&gt;</span>
    <span class="hljs-tag" style="color:rgb(0,102,102);">&lt;<span class="hljs-title" style="color:rgb(0,0,136);">name</span>&gt;</span>cloudera repository<span class="hljs-tag" style="color:rgb(0,102,102);">&lt;/<span class="hljs-title" style="color:rgb(0,0,136);">name</span>&gt;</span>
    <span class="hljs-tag" style="color:rgb(0,102,102);">&lt;<span class="hljs-title" style="color:rgb(0,0,136);">url</span>&gt;</span>https://repository.cloudera.com/artifactory/cloudera-repos/<span class="hljs-tag" style="color:rgb(0,102,102);">&lt;/<span class="hljs-title" style="color:rgb(0,0,136);">url</span>&gt;</span>
<span class="hljs-tag" style="color:rgb(0,102,102);">&lt;/<span class="hljs-title" style="color:rgb(0,0,136);">repository</span>&gt;</span></code></pre><ul class="pre-numbering" style="list-style:none;line-height:23.8px;width:50px;background-color:rgb(238,238,238);border-right:1px solid rgb(221,221,221);text-align:right;"><li style="list-style:none;color:rgb(153,153,153);">1</li><li style="list-style:none;color:rgb(153,153,153);">2</li><li style="list-style:none;color:rgb(153,153,153);">3</li><li style="list-style:none;color:rgb(153,153,153);">4</li><li style="list-style:none;color:rgb(153,153,153);">5</li></ul><p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
pom.xml中自定义的url是<a href="https://repo1.maven.org/maven2" rel="nofollow" style="background:transparent;color:rgb(202,12,22);text-decoration:none;">https://repo1.maven.org/maven2</a>，这个url是Apache Hadop的仓库地址。而我们编译命令加了–name
 2.6.0-cdh5.7.0，编译出来的spark包支持集成到cdh5.7.0集群中。如果不加以上url，编译会报错（自定义的url中没有cdh的内容，大家可以把地址复制到浏览器中自测），加了以上内容后pom.xml自定义的url中找不到就会去我们定义的url找。</p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
b.将./dev/make-distribution.sh脚本的120-136行内容注释掉，添加以下内容 <br>
VERSION=2.2.0 <br>
SCALA_VERSION=2.11 <br>
SPARK_HADOOP_VERSION=2.6.0-cdh5.7.0 <br>
SPARK_HIVE=1 <br>
脚本120-136行是校验我们安装的scala版本等信息，我们把它注释掉，直接告诉它我们安装的版本可以提高编译速度</p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
5 、执行命令编译 <br>
./dev/make-distribution.sh –name 2.6.0-cdh5.7.0 –tgz -Pyarn -Phadoop-2.6 -Phive -Phive-thriftserver -Dhadoop.version=2.6.0-cdh5.7.0</p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
编译成功后在spark2.2.0根目录会有一个 spark-2.1.0-bin-2.6.0-cdh5.7.0.tgz文件</p>
<p style="line-height:27.2px;color:rgb(63,63,63);font-family:'microsoft yahei';font-size:16px;">
注意：在编译过程中会出现下载某个依赖包的时间太久，这是由于网络问题，可以执行ctrl+c停止编译命令，然后重新运行编译命令，在编译过程中多试几次即可。有条件的小伙伴，建议开着VPN然后再进行编译，整个编译过程会顺畅很多。</p>
            </div>
                </div>