---
layout:     post
title:      hive-hwi安装
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                1、工作环境 <br>系统是centos7,jdk是jdk-7u79,hadoop是2.7.1，hive是2.1.1,在已经正常工作的hive环境中，增加web界面,达到通过web界面执行sql查询语句的目的<br>2、命令行下执行hive 的两种方式<br>./hive 或 hive --servcie cli<br>3、执行系统命令<br>在hive环境，若在执行系统命令，在命令前加上!,例如<br>hive&gt;!hdfs dfs -ls / ;<br>列出hdfs的根目录<br>4、执行sql脚本,例如<br>hive&gt;source /home/user/user1.sql;<br>其中 user1.sql的内容是<br>select id from user limit 1,20;<br>select name from user limit 1,20;<br>5、在系统中执行hive 查询语句<br>[hadoop@user bin]$./hive -e 'show 表名';<br>6、准备通过web执行hive查询语句前，要注意关闭防火墙，在有root权限的情况下执行命令<br>#systemctl  status firewalld 查询防火墙工作状态<br>#systemctl stop firewalld 停止防火墙<br>#ststemctl disable firewalld<br>7、运行hive -hwi-*.war包，需要ANT环境,所以需要下载和配置,ANT是一个基于JAVA的编译工具,从功能上类似于make<br>$wget http://apache.mirrors.tds.net/ant/binaries/apache-ant-1.9.11-bin.tar.gz<br>$tar -zxvf apache-ant-1.9.11-bin.tar.gz<br>配置环境变量,在/etc/profile文件中添加<br>#################################################################<br>#ANT environment<br>#export ANT_HOME=/安装目录/apache-ant-1.9.11<br>#export PATH=$PATH:$ANT_HOME/bin<br>#################################################################<br>8、拷贝tools.jar 文件<br>$cp /jdk安装目录/lib/tools.jar /hive安装目录/lib/<br>9、制作 hive-hwi-2.1.1.war文件 <br>下载apache-hive-2.1.1-src.tar.gz并解压<br>$tar -zxvf apache-hive-2.1.1.tar.gz <br>$cd ./apache-hive-2.1.1-src/hwi<br>$jar cvfM0 hive-hwi-2.1.1.war -C web/ .<br>将web目录压成 hive-hwi-2.1.1.war文件，参数解释，c创建jar包,v生成详细报告,f指定jar包的文件名,M不产生文件清单,0不对内容进行压缩<br>将war包拷贝至hive的lib目录下<br>cp ./apache-hive-2.1.1-src/hwi/hive-hwi-2.1.1.war /hive安装目录/lib/<br>10、编辑hive-site.xml,检查是否有如下内容<br>  &lt;property&gt;  <br>     &lt;name&gt;hive.hwi.war.file&lt;/name&gt;  <br>     &lt;value&gt;lib/hive-hwi-2.1.1.war&lt;/value&gt;  <br>     &lt;description&gt;This sets the path to the HWI war file, relative to ${HIVE_HOME}. &lt;/description&gt;  <br>   &lt;/property&gt;  <br>   &lt;property&gt;  <br>     &lt;name&gt;hive.hwi.listen.host&lt;/name&gt;  <br>     &lt;value&gt;0.0.0.0&lt;/value&gt;  <br>     &lt;description&gt;This is the host address the Hive Web Interface will listen on&lt;/description&gt;  <br>   &lt;/property&gt;  <br>   &lt;property&gt;  <br>     &lt;name&gt;hive.hwi.listen.port&lt;/name&gt;  <br>     &lt;value&gt;9999&lt;/value&gt;  <br>     &lt;description&gt;This is the port the Hive Web Interface will listen on&lt;/description&gt;  <br>   &lt;/property&gt;    <br>从配置信息可以看出，缺省端口是9999,war的路径是相对路径 <br>11、测试 http://ip:9999/hwi            </div>
                </div>