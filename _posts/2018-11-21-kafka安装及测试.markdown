---
layout:     post
title:      kafka安装及测试
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/lanmei618/article/details/80130735				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p>1.http://apache.fayea.com/下载</p><p>jdk需要1.8以上版本，要不然会报错 java.lang.UnsupportedClassVersionError: kafka/Kafka : Unsupported major.minor version 52.0</p><pre><code class="language-html">wget http://apache.fayea.com/kafka/1.1.0/kafka_2.12-1.1.0.tgz   </code></pre><p><img src="https://img-blog.csdn.net/20180428140054942?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xhbm1laTYxOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p>2.解压tgz文件，进入kafka的bin目录（最新kafka自带zookeeper环境）</p><pre><code class="language-html">tar -zxvf kafka_2.12-1.1.0.tgz
cd kafka_2.12-1.1.0/bin</code></pre><p><img src="https://img-blog.csdn.net/20180428140536565?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xhbm1laTYxOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p>3.启动zk</p><pre><code class="language-html">./zookeeper-server-start.sh ../config/zookeeper.properties &amp;
</code></pre><p><img src="https://img-blog.csdn.net/20180428142304207?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xhbm1laTYxOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p>4.启动kafka</p><pre><code class="language-html">./kafka-server-start.sh ../config/server.properties &amp;</code></pre><p><img src="https://img-blog.csdn.net/20180428151335223?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xhbm1laTYxOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p>报错了，我把shizhan01 添加进/etc/hosts中，重新启动成功</p><p><img src="https://img-blog.csdn.net/20180428151620600?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xhbm1laTYxOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p>5.启动一个生产者</p><pre><code class="language-html">bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test1</code></pre><p><img src="https://img-blog.csdn.net/20180428152538142?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xhbm1laTYxOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p>6.启动一个消费者</p><pre><code class="language-html">bin/kafka-console-consumer.sh --zookeeper 127.0.0.1:2181 --topic test1 --from-beginning
</code></pre><img src="https://img-blog.csdn.net/20180428152549916?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xhbm1laTYxOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br><p>7.在生产者输入hi kafka</p><p><img src="https://img-blog.csdn.net/20180428152707301?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xhbm1laTYxOA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p>注：kafka异常退出重启会报错，删除/tmp、kafka-logs下的文件即可</p><p><span style="color:rgb(0,0,0);font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;white-space:pre;background-color:rgb(246,248,250);">Failed to acquire lock on file .lock in /tmp/kafka-logs</span><br></p><pre><code class="language-html">rm -rf /tmp/kafka-logs</code></pre><br>            </div>
                </div>