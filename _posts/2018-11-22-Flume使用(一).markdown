---
layout:     post
title:      Flume使用(一)
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/paicMis/article/details/78944006				</div>
								            <div id="content_views" class="markdown_views prism-atom-one-dark">
							<!-- flowchart 箭头图标 勿删 -->
							<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
							<p><strong>flume 使用</strong></p>

<p>简单使用flume  <br>
场景1： <br>
1、通过netcat发布消息 <br>
2、用flume接收netcat发布的消息，最终显示在终端 <br>
3、flume的channels是用内存存储的</p>

<p>先定义flume-conf.properties.log 这样的文件</p>



<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-preprocessor">#定义agent的配置 定义sources 定义channels 定义sinks</span>
a1<span class="hljs-preprocessor">.sources</span> = <span class="hljs-built_in">r1</span>
a1<span class="hljs-preprocessor">.sinks</span> = k1
a1<span class="hljs-preprocessor">.channels</span> = c1
<span class="hljs-preprocessor">#定义sources的来源</span>
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.type</span> = netcat
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.bind</span> = localhost
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.port</span> = <span class="hljs-number">44444</span>
<span class="hljs-preprocessor">#定义sinks的方式</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.type</span> = logger
<span class="hljs-preprocessor">#定义channels的方式</span>
a1<span class="hljs-preprocessor">.channels</span><span class="hljs-preprocessor">.c</span>1<span class="hljs-preprocessor">.type</span> = memory
a1<span class="hljs-preprocessor">.channels</span><span class="hljs-preprocessor">.c</span>1<span class="hljs-preprocessor">.capacity</span> = <span class="hljs-number">1000</span>
a1<span class="hljs-preprocessor">.channels</span><span class="hljs-preprocessor">.c</span>1<span class="hljs-preprocessor">.transactionCapacity</span> = <span class="hljs-number">100</span>
<span class="hljs-preprocessor">#将sinks channels sources 连接起来</span>
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.channels</span> = c1
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.channel</span> = c1</code></pre>

<p>启动telnet来做agent的sources</p>



<pre class="prettyprint"><code class=" hljs r">[root@SZB-L0038787 ~]<span class="hljs-comment"># telnet localhost 44444</span>
Trying ::<span class="hljs-number">1.</span>..
telnet: connect to address ::<span class="hljs-number">1</span>: Connection refused
Trying <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-keyword">...</span>
Connected to localhost.
Escape character is <span class="hljs-string">'^]'</span>.
xlucas
OK</code></pre>

<p>启动flume agent</p>



<pre class="prettyprint"><code class=" hljs avrasm">[root@SZB-L0038787 apache-flume-<span class="hljs-number">1.8</span><span class="hljs-number">.0</span>-bin]<span class="hljs-preprocessor"># ./bin/flume-ng agent -name a1 -c conf -f conf/flume-conf.properties.log -Dflume.root.logger=INFO,console</span>
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">268</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.PollingPropertiesFileConfigurationProvider</span><span class="hljs-preprocessor">.start</span>(PollingPropertiesFileConfigurationProvider<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">62</span>)] Configuration provider starting
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">279</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.PollingPropertiesFileConfigurationProvider</span>$FileWatcherRunnable<span class="hljs-preprocessor">.run</span>(PollingPropertiesFileConfigurationProvider<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">134</span>)] Reloading configuration file:conf/flume-conf<span class="hljs-preprocessor">.properties</span><span class="hljs-preprocessor">.log</span>
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">297</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.conf</span><span class="hljs-preprocessor">.FlumeConfiguration</span>$AgentConfiguration<span class="hljs-preprocessor">.addProperty</span>(FlumeConfiguration<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">930</span>)] Added sinks: k1 Agent: a1
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">297</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.conf</span><span class="hljs-preprocessor">.FlumeConfiguration</span>$AgentConfiguration<span class="hljs-preprocessor">.addProperty</span>(FlumeConfiguration<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">1016</span>)] Processing:k1
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">298</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.conf</span><span class="hljs-preprocessor">.FlumeConfiguration</span>$AgentConfiguration<span class="hljs-preprocessor">.addProperty</span>(FlumeConfiguration<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">1016</span>)] Processing:k1
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">323</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.conf</span><span class="hljs-preprocessor">.FlumeConfiguration</span><span class="hljs-preprocessor">.validateConfiguration</span>(FlumeConfiguration<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">140</span>)] Post-validation flume configuration contains configuration for agents: [a1]
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">323</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.AbstractConfigurationProvider</span><span class="hljs-preprocessor">.loadChannels</span>(AbstractConfigurationProvider<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">147</span>)] Creating channels
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">333</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.channel</span><span class="hljs-preprocessor">.DefaultChannelFactory</span><span class="hljs-preprocessor">.create</span>(DefaultChannelFactory<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">42</span>)] Creating instance of channel c1 type memory
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">339</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.AbstractConfigurationProvider</span><span class="hljs-preprocessor">.loadChannels</span>(AbstractConfigurationProvider<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">201</span>)] Created channel c1
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">340</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.source</span><span class="hljs-preprocessor">.DefaultSourceFactory</span><span class="hljs-preprocessor">.create</span>(DefaultSourceFactory<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">41</span>)] Creating instance of source <span class="hljs-built_in">r1</span>, type netcat
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">354</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.sink</span><span class="hljs-preprocessor">.DefaultSinkFactory</span><span class="hljs-preprocessor">.create</span>(DefaultSinkFactory<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">42</span>)] Creating instance of sink: k1, type: logger
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">358</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.AbstractConfigurationProvider</span><span class="hljs-preprocessor">.getConfiguration</span>(AbstractConfigurationProvider<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">116</span>)] Channel c1 connected to [<span class="hljs-built_in">r1</span>, k1]
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">382</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.Application</span><span class="hljs-preprocessor">.startAllComponents</span>(Application<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">137</span>)] Starting new configuration:{ sourceRunners:{<span class="hljs-built_in">r1</span>=EventDrivenSourceRunner: { source:org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.source</span><span class="hljs-preprocessor">.NetcatSource</span>{name:<span class="hljs-built_in">r1</span>,state:IDLE} }} sinkRunners:{k1=SinkRunner: { policy:org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.sink</span><span class="hljs-preprocessor">.DefaultSinkProcessor</span><span class="hljs-localvars">@4</span>e4bc79 counterGroup:{ name:null counters:{} } }} channels:{c1=org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.channel</span><span class="hljs-preprocessor">.MemoryChannel</span>{name: c1}} }
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">394</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.Application</span><span class="hljs-preprocessor">.startAllComponents</span>(Application<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">144</span>)] Starting Channel c1
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">455</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.instrumentation</span><span class="hljs-preprocessor">.MonitoredCounterGroup</span><span class="hljs-preprocessor">.register</span>(MonitoredCounterGroup<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">119</span>)] Monitored counter group for type: CHANNEL, name: c1: Successfully registered new MBean.
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">456</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.instrumentation</span><span class="hljs-preprocessor">.MonitoredCounterGroup</span><span class="hljs-preprocessor">.start</span>(MonitoredCounterGroup<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">95</span>)] Component type: CHANNEL, name: c1 started
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">458</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.Application</span><span class="hljs-preprocessor">.startAllComponents</span>(Application<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">171</span>)] Starting Sink k1
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">459</span> (conf-file-poller-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.Application</span><span class="hljs-preprocessor">.startAllComponents</span>(Application<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">182</span>)] Starting Source <span class="hljs-built_in">r1</span>
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">460</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.source</span><span class="hljs-preprocessor">.NetcatSource</span><span class="hljs-preprocessor">.start</span>(NetcatSource<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">155</span>)] Source starting
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">24</span>,<span class="hljs-number">474</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.source</span><span class="hljs-preprocessor">.NetcatSource</span><span class="hljs-preprocessor">.start</span>(NetcatSource<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">166</span>)] Created serverSocket:sun<span class="hljs-preprocessor">.nio</span><span class="hljs-preprocessor">.ch</span><span class="hljs-preprocessor">.ServerSocketChannelImpl</span>[/<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">44444</span>]
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">10</span>:<span class="hljs-number">23</span>:<span class="hljs-number">39</span>,<span class="hljs-number">724</span> (SinkRunner-PollingRunner-DefaultSinkProcessor) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.sink</span><span class="hljs-preprocessor">.LoggerSink</span><span class="hljs-preprocessor">.process</span>(LoggerSink<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">95</span>)] Event: { headers:{} body: <span class="hljs-number">78</span> <span class="hljs-number">6</span>C <span class="hljs-number">75</span> <span class="hljs-number">63</span> <span class="hljs-number">61</span> <span class="hljs-number">73</span> <span class="hljs-number">0</span>D                            xlucas. }</code></pre>

<p>如果有些参数不是固定的，是通过参数获取的可以用 <br>
例如: <br>
这个sources的定义中port是可以不指定的端口，通过运行的时候在指定端口</p>



<pre class="prettyprint"><code class=" hljs avrasm">a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.type</span> = netcat
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.bind</span> = localhost
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.port</span> = ${port}</code></pre>

<blockquote>
  <p>运行指定端口  <br>
  -DpropertiesImplementation=org.apache.flume.node.EnvVarResolverProperties <br>
  这个参数值需要加入</p>
</blockquote>



<pre class="prettyprint"><code class=" hljs lasso"><span class="hljs-preprocessor">[</span>root@SZB<span class="hljs-attribute">-L0038787</span> apache<span class="hljs-attribute">-flume</span><span class="hljs-subst">-</span><span class="hljs-number">1.8</span><span class="hljs-number">.0</span><span class="hljs-attribute">-bin</span><span class="hljs-preprocessor">]</span><span class="hljs-markup"># port=44444 ./bin/flume-ng agent -name a1 -c conf -f conf/flume-conf.properties.log -Dflume.root.logger=INFO,console  -DpropertiesImplementation=org.apache.flume.node.EnvVarResolverProperties</span></code></pre>

<p>使用zookeeper来做conf文件 <br>
zookeeper的地址是10.20.23.29 agent放在/flume/a1里面</p>



<pre class="prettyprint"><code class=" hljs avrasm">[root@SZB-L0038787 apache-flume-<span class="hljs-number">1.8</span><span class="hljs-number">.0</span>-bin]<span class="hljs-preprocessor"># ./bin/flume-ng agent --conf conf -z 10.20.23.29:2181 -p /flume -name a1 -Dflume.root.logger=INFO,console -DpropertiesImplementation=org.apache.flume.node.EnvVarResolverProperties2017-12-29 16:54:27,830 (lifecycleSupervisor-1-0-EventThread) [INFO - org.apache.flume.node.Application.startAllComponents(Application.java:144)] Starting Channel c1</span>
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">16</span>:<span class="hljs-number">54</span>:<span class="hljs-number">27</span>,<span class="hljs-number">901</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.instrumentation</span><span class="hljs-preprocessor">.MonitoredCounterGroup</span><span class="hljs-preprocessor">.register</span>(MonitoredCounterGroup<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">119</span>)] Monitored counter group for type: CHANNEL, name: c1: Successfully registered new MBean.
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">16</span>:<span class="hljs-number">54</span>:<span class="hljs-number">27</span>,<span class="hljs-number">902</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.instrumentation</span><span class="hljs-preprocessor">.MonitoredCounterGroup</span><span class="hljs-preprocessor">.start</span>(MonitoredCounterGroup<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">95</span>)] Component type: CHANNEL, name: c1 started
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">16</span>:<span class="hljs-number">54</span>:<span class="hljs-number">27</span>,<span class="hljs-number">902</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-EventThread) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.Application</span><span class="hljs-preprocessor">.startAllComponents</span>(Application<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">171</span>)] Starting Sink k1
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">16</span>:<span class="hljs-number">54</span>:<span class="hljs-number">27</span>,<span class="hljs-number">904</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-EventThread) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.node</span><span class="hljs-preprocessor">.Application</span><span class="hljs-preprocessor">.startAllComponents</span>(Application<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">182</span>)] Starting Source <span class="hljs-built_in">r1</span>
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">16</span>:<span class="hljs-number">54</span>:<span class="hljs-number">27</span>,<span class="hljs-number">904</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.source</span><span class="hljs-preprocessor">.NetcatSource</span><span class="hljs-preprocessor">.start</span>(NetcatSource<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">155</span>)] Source starting
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">16</span>:<span class="hljs-number">54</span>:<span class="hljs-number">27</span>,<span class="hljs-number">908</span> (lifecycleSupervisor-<span class="hljs-number">1</span>-<span class="hljs-number">0</span>) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.source</span><span class="hljs-preprocessor">.NetcatSource</span><span class="hljs-preprocessor">.start</span>(NetcatSource<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">166</span>)] Created serverSocket:sun<span class="hljs-preprocessor">.nio</span><span class="hljs-preprocessor">.ch</span><span class="hljs-preprocessor">.ServerSocketChannelImpl</span>[/<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">44444</span>]
<span class="hljs-number">2017</span>-<span class="hljs-number">12</span>-<span class="hljs-number">29</span> <span class="hljs-number">16</span>:<span class="hljs-number">54</span>:<span class="hljs-number">38</span>,<span class="hljs-number">952</span> (SinkRunner-PollingRunner-DefaultSinkProcessor) [INFO - org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.flume</span><span class="hljs-preprocessor">.sink</span><span class="hljs-preprocessor">.LoggerSink</span><span class="hljs-preprocessor">.process</span>(LoggerSink<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">95</span>)] Event: { headers:{} body: <span class="hljs-number">78</span> <span class="hljs-number">6</span>C <span class="hljs-number">75</span> <span class="hljs-number">63</span> <span class="hljs-number">61</span> <span class="hljs-number">73</span> <span class="hljs-number">0</span>D                            xlucas. }</code></pre>

<p>发送消息</p>



<pre class="prettyprint"><code class=" hljs r">[root@SZB-L0038787 ~]<span class="hljs-comment"># telnet localhost 44444</span>
Trying ::<span class="hljs-number">1.</span>..
telnet: connect to address ::<span class="hljs-number">1</span>: Connection refused
Trying <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-keyword">...</span>
Connected to localhost.
Escape character is <span class="hljs-string">'^]'</span>.
xlucas
OK</code></pre>            </div>
						<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-9e5741c4b9.css" rel="stylesheet">
                </div>