---
layout:     post
title:      hive_sql
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <span></span><div><span style="font-size:14px;font-family:SimSun, STSong;line-height:1.75;">进入</span><span style="font-size:14px;background-color:rgb(255,255,255);font-family:Arial;line-height:1.75;">hive shell</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">#hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">或者</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive --service cli</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Hive</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">的启动方式</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive  </span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">命令行模式，直接输入</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">/hive/bin/hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">的执行程序，或者输入</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive –service cli</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive  web</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">界面的启动方式，</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive –service hwi  </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive  </span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">远程服务</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">端口号</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">10000)</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">启动方式，</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive --service hiveserver</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive  </span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">远程后台启动</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">关闭终端</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">服务不退出</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">): nohup hive -–service hiveserver  &amp;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">显示所有函数：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; show functions;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">查看函数用法：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; describe function substr;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">查看</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">为某个查询使用多少个</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">MapReduce</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">作业</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; Explain select a.id from tbname a;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">--------------------------------------------------------------------------</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">表结构操作：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">托管表和外部表</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">托管表会将数据移入</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">的</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">warehouse</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">目录；外部表则不会。经验法则是，如果所有处理都由</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">完成，</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">应该使用托管表；但如果要用</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">和其它工具来处理同一个数据集，则使用外部表。</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">创建表</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">通常</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">stored as textfile)</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; create table tbName (id int,name string) stored as textfile;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">创建表并且按分割符分割行中的字段值</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">即导入数据的时候被导入数据是以该分割符划分的，否则导入后为</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">null</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">，缺省列为</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">null)</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">；</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; create table tbName (id int,name string) row format delimited fields terminated by ',';</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">创建外部表</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt;create external table extbName(id int, name string);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">创建表并创建单分区字段</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">ds(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">分区表指的是在创建表时指定的</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">partition</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">的分区空间。</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">):</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; create table tbName2 (id int, name string) partitioned by (ds string); </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">创建表并创建双分区字段</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">ds:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; create table tbname3 (id int, content string) partitioned by (day string, hour string);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">表添加一列</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; alter table tbName add columns (new_col int);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">添加一列并增加列字段注释</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; alter table tbName add columns (new_col2 int comment 'a comment');</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">更改表名</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; alter table tbName rename to tbName3;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">删除表</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">删除表的元数据，如果是托管表还会删除表的数据</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">):</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt;drop table tbName;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">只删除内容</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">只删除表的内容，而保留元数据，则删除数据文件</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">)</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt;dfs –rmr ‘warehouse/my-table’;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">删除分区，分区的元数据和数据将被一并删除：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt;alter table tbname2 drop partition (dt='2008-08-08', hour='09');</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">--------------------------------------------------------------------------</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">元数据存储</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">从</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">HDFS</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">中将数据导入到表中都是瞬时的</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">):</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">将文件中的数据加载到表中</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">文件要有后缀名，缺省列默认为</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">null):</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; load data local inpath 'myTest.txt' overwrite into table tbName;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">在已创立的表上添加单分区并指定数据：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; alter table tbname2 add partition (ds='20120701') location '/user/hadoop/his_trans/record/20120701';</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">在已创立的表上添加双分区并指定数据：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; alter table tbname2 add partition (ds='2008-08-08', hour='08') location '/path/pv1.txt' partition (dt='2008-08-08', hour='09') location '/path/pv2.txt';</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">加载本地数据，根据给定分区列信息</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; alter table tbname2 add partition (ds='2013-12-12');</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hdfs</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">数据加载进分区表中语法</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">当数据被加载至表中时，不会对数据进行任何转换。</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Load</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">操作只是将数据复制至</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">表对应的位置</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">)[</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">不建议使用</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">]</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; load data local inpath 'part.txt' overwrite into table tbName2 partition(ds='2013-12-12');</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; load data inpath '/user/hadoop/*' into table tbname3 partition(dt='2008-08-08', hour='08'); </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">--------------------------------------------------------------------------</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">SQL</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">操作：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">查看表结构：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; describe tbname;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; desc tbname;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">显示所有表</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; show tables;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">按正条件（正则表达式）显示表：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; show tables '.*s';</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">查询表数据不会做</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">mapreduce</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">操作：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; select * from tbName;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">查询一列数据，会做</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">mapreduce</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">操作：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; select a.id from tbname a ;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">基于分区的查询的语句：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; select tbname2.* from tbname2 a where a.ds='2013-12-12' ;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">查看分区语句：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; show partitions tbname2;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">函数</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">avg/sum/count/group by/order by (desc)/limit:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">select logdate, count(logdate) as count from access_1 group by logdate order by count limit 5;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">内连接</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(inner join)</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; SELECT sales.*, things.* FROM sales JOIN things ON (sales.id = things.id);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">外连接：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; SELECT sales.*, things.* FROM sales LEFT OUTER JOIN things ON (sales.id = things.id);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; SELECT sales.*, things.* FROM sales RIGHT OUTER JOIN things ON (sales.id = things.id);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; SELECT sales.*, things.* FROM sales FULL OUTER JOIN things ON (sales.id = things.id);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">in</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">查询：</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">不支持，但可以使用</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">LEFT SEMI JOIN</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; SELECT * FROM things LEFT SEMI JOIN sales ON (sales.id = things.id);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">相当于</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">sql</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">语句：</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">SELECT * FROM things WHERE things.id IN (SELECT id from sales);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Map</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">连接：</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">可以把较小的表放入每个</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Mapper</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">的内存来执行连接操作</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; SELECT /*+ MAPJOIN(things) */ sales.*, things.* FROM sales JOIN things ON (sales.id = things.id);</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">INSERT OVERWRITE TABLE ..SELECT</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">：新表预先存在</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; FROM records2</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">    &gt; INSERT OVERWRITE TABLE stations_by_year SELECT year, COUNT(DISTINCT station) GROUP BY year </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">    &gt; INSERT OVERWRITE TABLE records_by_year SELECT year, COUNT(1) GROUP BY year</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">    &gt; INSERT OVERWRITE TABLE good_records_by_year SELECT year, COUNT(1) WHERE temperature != 9999 AND </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">    (quality = 0 OR quality = 1 OR quality = 4 OR quality = 5 OR quality = 9) GROUP BY year;  </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">CREATE TABLE ... AS SELECT</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">：新表表预先不存在</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt;CREATE TABLE target AS SELECT col1,col2 FROM source;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">创建视图：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; CREATE VIEW valid_records AS SELECT * FROM records2 WHERE temperature !=9999;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">查看视图详细信息：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; DESCRIBE EXTENDED valid_records;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">--------------------------------------------------------------------------</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">将查询数据输出至目录</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; insert overwrite directory '/tmp/hdfs_out' select a.* from tbname2 a where a.ds='2013-12-12';</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">将查询结果输出至本地目录</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; insert overwrite local directory '/tmp/local_out' select ds,count(1) from tbname group by ds;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; insert overwrite table events select a.* from tbname a where a.id &lt; 100;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; insert overwrite local directory '/tmp/sum' select sum(a.pc) from tbpc a ;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">将一个表的统计结果插入另一个表中</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; from tbname a insert overwrite table events select a.bar,count(1) where a.foo &gt; 0 group by a.bar;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; insert overwrite table events select a.bar,count(1) from tbname a where a.foo &gt; 0 group by a.bar;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">JOIN:</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; from tbname t1 join tbname2 t2 on (t1.id = t2.id) insert overwrite table events select t1.id,t1.name,t2,ds;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">将多表数据插入到同一表中</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">FROM src</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">INSERT OVERWRITE TABLE dest1 SELECT src.* WHERE src.key &lt; 100</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">INSERT OVERWRITE TABLE dest2 SELECT src.key, src.value WHERE src.key &gt;= 100 and src.key &lt; 200</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">INSERT OVERWRITE TABLE dest3 PARTITION(ds='2008-04-08', hr='12') SELECT src.key WHERE src.key &gt;= 200 and src.key &lt; 300</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">INSERT OVERWRITE LOCAL DIRECTORY '/tmp/dest4.out' SELECT src.value WHERE src.key &gt;= 300;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">将文件流直接插入文件</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive&gt; FROM invites a INSERT OVERWRITE TABLE events SELECT TRANSFORM(a.foo, a.bar) AS (oof, rab) USING '/bin/cat' WHERE a.ds &gt; '2008-08-09';</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">This streams the data in the map phase through the script /bin/cat (like hadoop streaming). Similarly - streaming can be used on the reduce </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">side (please see the Hive Tutorial or examples) </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">--------------------------------------------------------------------------</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">###</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">错误信息</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">### </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">问题：</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">load</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">数据全部为</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">null  </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">原因：数据分隔符的问题，反序列化数据的时候出错了，定义表的时候需要定义数据分隔符。</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">解决：</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">row format delimited fields terminated by ',' stored as textfile;</span></div><div style="text-align:left;font-size:14px;"><br></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">create table mytable(key int , value string ) row format delimited fields terminated by ',' escaped by '\\' stored as textfile;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">[row format delimited]</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">是用来设置创建的表在加载数据的时候，支持的列分隔符，如以</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">','</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">为分隔符；</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">row format delimited fields terminated by ',';</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">[terminated by]</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">分隔符：意思是以什么字符作为分隔符，默认情况下是</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">tab</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">字符（</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">\t</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">）</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;"> </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">[enclosed by]</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">字段括起字符</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">[escaped by]</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">转义字符</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">使用</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">"\"</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">符号转义或者写作</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">:ALTER TABLE splitchar SET SERDEPROPERTIES ('escape.delim' = '\\');</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">[stored as file_format]:</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">是用来设置加载数据的数据类型。</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">本身支持的文件格式只有：</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Text File</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">，</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">Sequence File</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">。</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">如果文件数据是纯文本，可以使用</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">[stored as textfile]</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">。</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">如果数据需要压缩，使用</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">[stored as sequence]</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">通常情况，只要不需要保存序列化的对象，我们默认采用</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">[STORED AS TEXTFILE]</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">。</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">将</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">CSV</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">中数据导入表中：</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">add jar /home/hadoop/csv-serde-1.1.2.jar;//</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">引用了这个</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">jar</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">包，关于这个表的所有操作都要引入这个</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">jar</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">。</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">row format serde 'com.bizo.hive.serde.csv.CSVSerde'</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">eg</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">：</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">create external table trans_data</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">id int,</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">name string</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">)</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">partitioned by (pdate string) </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">row format serde 'com.bizo.hive.serde.csv.CSVSerde' stored as textfile;</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">alter table trans_data add partition (pdate='20120701') location '/user/hadoop/his_trans/record/20120701';</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">--------------------------------------------------------------------------</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">###</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">错误信息</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">### </span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">问题：</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">java.lang.OutOfMemoryError: Java heap space</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">解决：检查</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hiveserver</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">服务是否开启</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">--------------------------------------------------------------------------</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">###</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">错误信息</span> <span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">###</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">java.lang.NoSuchMethodError: com.facebook.fb303.FacebookService</span></div><div style="text-align:left;font-size:14px;"><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">由于</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hadoop</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">与</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">hive</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:SimSun, STSong;">版本不兼容导致</span><span style="font-size:14px;background-color:rgb(255,255,255);line-height:1.75;font-family:Arial;">(hadoop-0.20.2+320)</span></div><div><span style="font-size:14px;background-color:rgb(255,255,255);font-family:SimSun, STSong;line-height:1.75;">解决方法：</span><span style="font-size:14px;font-family:Arial;line-height:1.75;">mv $HADOOP_HOME/lib/libfb303.jar $HADOOP_HOME/lib/libfb303.jar_backup &amp;&amp; ln -s $HIVE_HOME/lib/libfb303.jar $HADOOP_HOME/lib/libfb303.jar</span></div>            </div>
                </div>