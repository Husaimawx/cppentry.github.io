---
layout:     post
title:      kafka安装及常用命令
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<p><span class="md-line md-end-block md-focus" style="display:block;"><span class="md-expand">一 kafka安装启动</span></span></p>
<pre class="md-fences md-end-block" lang="js" xml:lang="js"><span><span class="cm-number" style="color:rgb(100,171,143);">1.</span><span class="cm-variable">下载最新版kafka</span> </span>
<span><span class="cm-tab" style="display:inline-block;font-family:monospace;">    </span><span class="cm-variable">Apache官网</span>: <span class="cm-variable">http</span>:<span class="cm-comment" style="color:rgb(218,146,74);">//kafka.apache.org/downloads.html</span></span>
<span><span class="cm-number" style="color:rgb(100,171,143);">2.</span><span class="cm-variable">解压kafka</span></span>
<span><span class="cm-tab" style="display:inline-block;font-family:monospace;">    </span><span class="cm-variable">tar</span> <span class="cm-operator">-</span><span class="cm-variable">zxvf</span> <span class="cm-variable">kafka_2</span><span class="cm-number" style="color:rgb(100,171,143);">.12</span><span class="cm-operator">-</span><span class="cm-number" style="color:rgb(100,171,143);">1.0.0</span>.<span class="cm-property">tgz</span></span>
<span class="cm-tab-wrap-hack"><span class="cm-number" style="color:rgb(100,171,143);">3.</span><span class="cm-variable">重命名解压目录名</span><span class="cm-tab" style="display:inline-block;font-family:monospace;">  </span></span>
<span><span class="cm-tab" style="display:inline-block;font-family:monospace;">    </span><span class="cm-variable">mv</span> <span class="cm-variable">kafka_2</span><span class="cm-number" style="color:rgb(100,171,143);">.12</span><span class="cm-operator">-</span><span class="cm-number" style="color:rgb(100,171,143);">1.0.0</span> <span class="cm-variable">kafka</span></span>
<span><span class="cm-number" style="color:rgb(100,171,143);">4.</span><span class="cm-variable">启动</span></span>
<span><span class="cm-tab" style="display:inline-block;font-family:monospace;">    </span><span class="cm-variable">进入解压目录：cd</span> <span class="cm-variable">kafka</span></span>
<span>    <span class="cm-variable">修改config</span><span class="cm-operator">/</span><span class="cm-variable">zookeeper</span>.<span class="cm-property">properties的日志路径</span></span>
<span><span class="cm-tab" style="display:inline-block;font-family:monospace;">    </span><span class="cm-variable">启动zookeeper：bin</span><span class="cm-operator">/</span><span class="cm-variable">zookeeper</span><span class="cm-operator">-</span><span class="cm-variable">server</span><span class="cm-operator">-</span><span class="cm-variable">start</span>.<span class="cm-property">sh</span> <span class="cm-variable">config</span><span class="cm-operator">/</span><span class="cm-variable">zookeeper</span>.<span class="cm-property">properties</span> <span class="cm-operator">&amp;</span></span>
<span>    <span class="cm-variable">修改config</span><span class="cm-operator">/</span><span class="cm-variable">server</span>.<span class="cm-property">properties的日志路径</span></span>
<span>    <span class="cm-variable">启动kafka：bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">server</span><span class="cm-operator">-</span><span class="cm-variable">start</span>.<span class="cm-property">sh</span> <span class="cm-variable">config</span><span class="cm-operator">/</span><span class="cm-variable">server</span>.<span class="cm-property">properties</span> <span class="cm-operator">&amp;</span></span>
<span><span class="cm-number" style="color:rgb(100,171,143);">5.</span><span class="cm-variable">停止</span></span>
<span><span class="cm-tab" style="display:inline-block;font-family:monospace;">    </span><span class="cm-variable">停止kafka：</span> <span class="cm-variable">bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">server</span><span class="cm-operator">-</span><span class="cm-variable">stop</span>.<span class="cm-property">sh</span></span>
<span>    <span class="cm-variable">停止zookeeper：</span> <span class="cm-variable">bin</span><span class="cm-operator">/</span><span class="cm-variable">zookeeper</span><span class="cm-operator">-</span><span class="cm-variable">server</span><span class="cm-operator">-</span><span class="cm-variable">stop</span>.<span class="cm-property">sh</span></span></pre>
<p><span class="md-line md-end-block" style="display:block;"><span><br></span></span><span class="md-line md-end-block" style="display:block;"><span>二 kafka的相关命令</span></span></p>
<pre class="md-fences md-end-block" lang="js" xml:lang="js"><span><span class="cm-comment" style="color:rgb(218,146,74);">// 创建topic （replication-factor：节点数）</span></span>
<span><span class="cm-variable">sh</span> <span class="cm-variable">bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">topics</span>.<span class="cm-property">sh</span> <span class="cm-operator">--</span><span class="cm-variable">create</span> <span class="cm-operator">--</span><span class="cm-variable">zookeeper</span> <span class="cm-variable">localhost</span>:<span class="cm-number" style="color:rgb(100,171,143);">2181</span> <span class="cm-operator">--</span><span class="cm-variable">replication</span><span class="cm-operator">-</span><span class="cm-variable">factor</span> <span class="cm-number" style="color:rgb(100,171,143);">1</span> <span class="cm-operator">--</span><span class="cm-variable">partitions</span> <span class="cm-number" style="color:rgb(100,171,143);">3</span> <span class="cm-operator">--</span><span class="cm-variable">topic</span> <span class="cm-variable">myTopic1</span></span>
<span><span class="cm-comment" style="color:rgb(218,146,74);">// 查看队列分区明细</span></span>
<span><span class="cm-variable">sh</span> <span class="cm-variable">bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">topics</span>.<span class="cm-property">sh</span> <span class="cm-operator">--</span><span class="cm-variable">describe</span> <span class="cm-operator">--</span><span class="cm-variable">zookeeper</span> <span class="cm-variable">localhost</span>:<span class="cm-number" style="color:rgb(100,171,143);">2181</span> <span class="cm-operator">--</span><span class="cm-variable">topic</span> <span class="cm-variable">myTopic1</span></span>
<span><span class="cm-comment" style="color:rgb(218,146,74);">// 消费消息 </span></span>
<span><span class="cm-variable">sh</span> <span class="cm-variable">bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">console</span><span class="cm-operator">-</span><span class="cm-variable">consumer</span>.<span class="cm-property">sh</span>  <span class="cm-operator">--</span><span class="cm-variable">zookeeper</span> <span class="cm-variable">localhost</span>:<span class="cm-number" style="color:rgb(100,171,143);">2181</span>  <span class="cm-operator">--</span><span class="cm-variable">from</span><span class="cm-operator">-</span><span class="cm-variable">beginning</span> <span class="cm-operator">--</span><span class="cm-variable">topic</span> <span class="cm-variable">loginfoTopic</span></span>
<span><span class="cm-comment" style="color:rgb(218,146,74);">// 查看队列列表</span></span>
<span><span class="cm-variable">sh</span> <span class="cm-variable">bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">topics</span>.<span class="cm-property">sh</span> <span class="cm-operator">--</span><span class="cm-variable">list</span> <span class="cm-operator">--</span><span class="cm-variable">zookeeper</span> <span class="cm-variable">localhost</span>:<span class="cm-number" style="color:rgb(100,171,143);">2181</span></span>
<span><span class="cm-comment" style="color:rgb(218,146,74);">// 删除toppic</span></span>
<span>.<span class="cm-property">bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">topics</span>.<span class="cm-property">sh</span>  <span class="cm-operator">--</span><span class="cm-keyword" style="color:rgb(200,143,208);">delete</span> <span class="cm-operator">--</span><span class="cm-variable">zookeeper</span> <span class="cm-variable">localhost</span>:<span class="cm-number" style="color:rgb(100,171,143);">2181</span>  <span class="cm-operator">--</span><span class="cm-variable">topic</span> <span class="cm-variable">test</span></span>
<span><span class="cm-comment" style="color:rgb(218,146,74);">// 修改分区数，注意只能往大的改</span></span>
<span><span class="cm-variable">bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">topics</span>.<span class="cm-property">sh</span> <span class="cm-operator">--</span><span class="cm-variable">zookeeper</span> <span class="cm-variable">localhost</span>:<span class="cm-number" style="color:rgb(100,171,143);">2181</span> <span class="cm-operator">--</span><span class="cm-variable">alter</span> <span class="cm-operator">--</span><span class="cm-variable">topic</span> <span class="cm-variable">myTopic1</span> <span class="cm-operator">--</span><span class="cm-variable">partitions</span> <span class="cm-number" style="color:rgb(100,171,143);">4</span></span>
<span><span class="cm-comment" style="color:rgb(218,146,74);">//测试：启动producer发送消息</span></span>
<span><span class="cm-variable">bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">console</span><span class="cm-operator">-</span><span class="cm-variable">producer</span>.<span class="cm-property">sh</span> <span class="cm-operator">--</span><span class="cm-variable">broker</span><span class="cm-operator">-</span><span class="cm-variable">list</span> <span class="cm-variable">localhost</span>:<span class="cm-number" style="color:rgb(100,171,143);">9092</span> <span class="cm-operator">--</span><span class="cm-variable">topic</span> <span class="cm-variable">myTopic1</span></span>
<span><span class="cm-comment" style="color:rgb(218,146,74);">//测试：启动consumer发送消息</span></span>
<span><span class="cm-variable">bin</span><span class="cm-operator">/</span><span class="cm-variable">kafka</span><span class="cm-operator">-</span><span class="cm-variable">console</span><span class="cm-operator">-</span><span class="cm-variable">consumer</span>.<span class="cm-property">sh</span> <span class="cm-operator">--</span><span class="cm-variable">zookeeper</span> <span class="cm-variable">localhost</span>:<span class="cm-number" style="color:rgb(100,171,143);">2181</span> <span class="cm-operator">--</span><span class="cm-variable">topic</span> <span class="cm-variable">myTopic1</span> <span class="cm-operator">--</span><span class="cm-variable">from</span><span class="cm-operator">-</span><span class="cm-variable">beginning</span></span></pre>
<p></p>
            </div>
                </div>