---
layout:     post
title:      小木大数据-kafka安装及配置
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/u013631121/article/details/81007510				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <h1 align="center"><strong>kafka<span style="font-family:'宋体';">安装及配置</span></strong></h1><p><span style="font-family:'宋体';">大家好，今天我要给大家介绍一下</span>kafka<span style="font-family:'宋体';">的安装及配置的方式。</span></p><p><span style="font-family:'宋体';">首先介绍一下什么叫</span><span style="font-family:Calibri;">kafka</span><span style="font-family:'宋体';">。</span><span style="font-family:Calibri;">Kafka</span><span style="font-family:'宋体';">是一个发布订阅消息系统，它的用途小木我理解的是，我们有一个温度传感器，然后</span><span style="font-family:Calibri;">kafka</span><span style="font-family:'宋体';">监控着这个传感器，它一有数据传过来，</span><span style="font-family:Calibri;">kafka</span><span style="font-family:'宋体';">就接收过来，接收之后把这个数据在放到</span><span style="font-family:Calibri;">SQL</span><span style="font-family:'宋体';">中或者进行数据分析。同时这个过程是实时动态的，有一个数据记录一个。</span></p><p><span style="font-family:'宋体';"><img src="https://img-blog.csdn.net/20180711214913948?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM2MzExMjE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="font-family:'宋体';">具体</span>kafka<span style="font-family:'宋体';">怎么安装和配置呢？现在我来说一下：</span></p><p><strong><span style="font-family:'宋体';">（</span>1<span style="font-family:'宋体';">）下载安装包，其网址为：</span></strong></p><p><a href="http://kafka.apache.org/downloads" rel="nofollow"><u><span style="color:rgb(128,0,128);">http://kafka.apache.org/downloads</span></u></a></p><p><span style="font-family:'宋体';">本人下载一个稳定的版本，比如</span>0.8.2.2<span style="font-family:'宋体';">版本，选择画圈圈的就可以下载了。前面的</span><span style="font-family:Calibri;">SCALA2.11</span><span style="font-family:'宋体';">指的是这个东西是用</span><span style="font-family:Calibri;">2.11</span><span style="font-family:'宋体';">版本的</span><span style="font-family:Calibri;">SCALA</span><span style="font-family:'宋体';">编写的，我一直用的是</span><span style="font-family:Calibri;">2.11</span><span style="font-family:'宋体';">版本的，所以我就下载这个了，也推荐大家就下载这个。</span></p><p> <img src="https://img-blog.csdn.net/20180711214923431?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM2MzExMjE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p><strong><span style="font-family:'宋体';">（</span>2<span style="font-family:'宋体';">）上传安装包到我们想安装的机器上面：</span></strong></p><p>我们这里的结构为：</p><p> <img src="https://img-blog.csdn.net/20180711214931579?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM2MzExMjE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p><span style="font-family:'宋体';">小木我首先要在红色箭头指向的机器上面安装</span>kafka<span style="font-family:'宋体';">，于是我们用</span><span style="font-family:Calibri;">scp</span><span style="font-family:'宋体';">将我们下载的安装包上传到</span><span style="font-family:Calibri;">192.168.2.12</span><span style="font-family:'宋体';">（主机名：</span><span style="font-family:Calibri;">slave1</span><span style="font-family:'宋体';">）上面：</span></p><pre><code class="language-plain">put -r G:/kafka_2.11-0.8.2.2.tgz ~</code></pre><p><strong><span style="font-family:'宋体';">（</span>3<span style="font-family:'宋体';">）解压安装包</span></strong></p><pre><code class="language-html">tar -zxvf kafka_2.11-0.8.2.2.tgz -C ~/bigdata/</code></pre><p><strong><span style="font-family:'宋体';">（</span>4<span style="font-family:'宋体';">）解压后，到安装目录下的</span><span style="font-family:Calibri;">conf</span><span style="font-family:'宋体';">目录</span></strong></p><pre><code class="language-html">cd bigdata/kafka_2.11-0.8.2.2/config/</code></pre><p><strong><span style="font-family:'宋体';">（</span>5<span style="font-family:'宋体';">）打开文件</span><span style="font-family:Calibri;">server.properties </span></strong></p><p>vi server.properties </p><p><strong><span style="font-family:'宋体';">并且，在</span>server.properties <span style="font-family:'宋体';">文件中修改对应的行为</span></strong></p><p>broker.id=0</p><p>host.name=slave1</p><p>log.dirs=/data/kafka</p><p>zookeeper.connect=slave2:2181,slave5:2181,slave6:2181</p><p><span style="font-family:'宋体';">改完之后，</span>:wq<span style="font-family:'宋体';">保存退出</span></p><p> </p><p><strong><span style="font-family:'宋体';">（</span>6<span style="font-family:'宋体';">）将配置好的</span><span style="font-family:Calibri;">kafka</span><span style="font-family:'宋体';">拷贝到其它的机器上面</span></strong></p><pre><code class="language-plain">scp -r kafka_2.11-0.8.2.2/ 192.168.2.14:$PWD

scp -r kafka_2.11-0.8.2.2/ 192.168.2.15:$PWD</code></pre><p><strong><span style="font-family:'宋体';">（</span>7<span style="font-family:'宋体';">）修改</span><span style="font-family:Calibri;">broker.id</span><span style="font-family:'宋体';">及</span><span style="font-family:Calibri;">host.name</span></strong></p><p>到<span style="font-family:'宋体';">主机</span>IP<span style="font-family:'宋体';">为</span><span style="font-family:Calibri;">192.168.2.14</span><span style="font-family:'宋体';">的</span><span style="font-family:'宋体';">安装目录下的</span>conf<span style="font-family:'宋体';">目录打开文件</span><span style="font-family:Calibri;">server.properties</span><span style="font-family:'宋体';">，将文件中部分内容改为：</span></p><p>broker.id=1</p><p>host.name=slave3</p><p><br></p><p>到<span style="font-family:'宋体';">主机</span>IP<span style="font-family:'宋体';">为</span><span style="font-family:Calibri;">192.168.2.15</span><span style="font-family:'宋体';">的</span><span style="font-family:'宋体';">安装目录下的</span>conf<span style="font-family:'宋体';">目录打开文件</span><span style="font-family:Calibri;">server.properties</span><span style="font-family:'宋体';">，将文件中部分内容改为：</span></p><p>broker.id=2</p><p>host.name=slave4</p><p><br></p><p><strong><span style="font-family:'宋体';">（</span>8<span style="font-family:'宋体';">）在每台机器上创建TOPIC并启动</span><span style="font-family:Calibri;">kafka</span></strong></p><p><span style="font-family:Calibri;">创建TOPIC</span></p><p><span style="font-family:Calibri;"></span></p><pre><code class="language-plain">~/bigdata/kafka_2.11-0.8.2.2/bin/kafka-topics.sh --create --zookeeper slave2:2181,slave5:2181,slave6:2181 --replication-factor 3 --partitions 3 --topic xiaomu</code></pre><p><span style="font-family:Calibri;">启动KAFKA</span></p><pre><code class="language-plain">~/bigdata/kafka_2.11-0.8.2.2/bin/kafka-server-start.sh -daemon ~/bigdata/kafka_2.11-0.8.2.2/config/server.properties</code></pre><p><strong><span style="font-family:'宋体';">（</span>9<span style="font-family:'宋体';">）在</span><span style="font-family:Calibri;">192.168.2.12</span><span style="font-family:'宋体';">启动生产者</span></strong></p><pre><code class="language-plain">~/bigdata/kafka_2.11-0.8.2.2/bin/kafka-console-producer.sh --broker-list slave1:9092,slave3:9092,slave4:9092 --topic xiaomu</code></pre><p><strong><span style="font-family:'宋体';">（</span>10<span style="font-family:'宋体';">）在</span><span style="font-family:Calibri;">192.168.2.14</span><span style="font-family:'宋体';">、在</span><span style="font-family:Calibri;">192.168.2.15</span><span style="font-family:'宋体';">启动消费者</span></strong></p><pre><code class="language-plain">~/bigdata/kafka_2.11-0.8.2.2/bin/kafka-console-consumer.sh --zookeeper slave2:2181,slave5:2181,slave6:2181 --topic xiaomu --from-beginning </code></pre><p><strong><span style="font-family:'宋体';">（</span>11<span style="font-family:'宋体';">）在生产者机器上随便敲几个字母按回车，如果消费者机器能收到，那就说明安装成功</span></strong></p><p><strong><span style="font-family:'宋体';"><br></span></strong></p><p></p><p style="font-size:14px;color:rgb(51,51,51);min-height:1em;background-color:rgb(255,255,255);clear:both;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;">———————————————<br></p><p style="font-size:14px;color:rgb(51,51,51);min-height:1em;background-color:rgb(255,255,255);clear:both;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;">如果对我的课程感兴趣的话，欢迎关注小木希望学园-微信公众号： </p><p style="font-size:14px;color:rgb(51,51,51);min-height:1em;background-color:rgb(255,255,255);clear:both;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;">mutianwei521</p><p style="font-size:14px;color:rgb(51,51,51);min-height:1em;background-color:rgb(255,255,255);clear:both;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;">也可以扫描二维码哦！</p><p style="font-size:14px;color:rgb(51,51,51);min-height:1em;background-color:rgb(255,255,255);clear:both;font-family:'Helvetica Neue', Helvetica, 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;"><img src="https://img-blog.csdn.net/20180616122457715?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTM2MzExMjE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><br>            </div>
                </div>