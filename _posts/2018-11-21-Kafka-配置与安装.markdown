---
layout:     post
title:      Kafka-配置与安装
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <div style="line-height:1.75;"><p style="font-size:14px;text-align:left;line-height:1.75;">一. Kafka下载与解压</p><ol style="font-size:14px;"><li style="text-align:left;line-height:1.75;font-size:14px;list-style-position:inside;font-family:'Microsoft YaHei', STXihei;color:rgb(0,0,0);">Kafka包下载：<a href="https://mirrors.cnnic.cn/apache/kafka/" rel="nofollow"><span style="color:rgb(0,56,132);"><u>https://mirrors.cnnic.cn/apache/kafka/</u></span></a></li><li style="text-align:left;line-height:1.75;font-size:14px;list-style-position:inside;font-family:'Microsoft YaHei', STXihei;color:rgb(57,57,57);">上传解压：tar zxvf kafka_2.10-0.10.2.1.tgz </li></ol><p style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">二. Kafka目录简介</span></p><ol style="font-size:14px;"><li style="text-align:left;line-height:1.75;font-size:14px;list-style-position:inside;font-family:'Microsoft YaHei', STXihei;color:rgb(57,57,57);">/bin是操作kafka的可执行脚本（包含windows版脚本）</li><li style="text-align:left;line-height:1.75;font-size:14px;list-style-position:inside;font-family:'Microsoft YaHei', STXihei;color:rgb(57,57,57);">/config是kafka相关的配置文件</li><li style="text-align:left;line-height:1.75;font-size:14px;list-style-position:inside;font-family:'Microsoft YaHei', STXihei;color:rgb(57,57,57);">/libs是依赖库</li><li style="text-align:left;line-height:1.75;font-size:14px;list-style-position:inside;font-family:'Microsoft YaHei', STXihei;color:rgb(57,57,57);">/logs是日志数据目录。</li></ol><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">            kafka把server端日志分为5种类型：server、request、state、log-cleaner和controller</span></div><p style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">三. Kafka配置和启动</span></p><ol style="font-size:14px;"><li style="text-align:left;line-height:1.75;font-size:14px;list-style-position:inside;font-family:'Microsoft YaHei', STXihei;color:rgb(57,57,57);">Zookeeper配置</li></ol><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">          (1) Zookeeper下载：</span><a href="http://apache.fayea.com/zookeeper/current/" rel="nofollow"><span style="color:rgb(0,56,132);"><u>http://apache.fayea.com/zookeeper/current/</u></span></a><span style="color:rgb(57,57,57);">  </span></div><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">                                 解压：</span>tar zxvf zookeeper-3.4.10.tar.gz</div><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">          (2) Zookeeper配置</span></div><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">               配置文件路径：/conf/zoo_sample.cfg</span></div><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">               zoo_sample.cfd复制一份并更名为zoo.cfg，修改参数如下：</span></div><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">               </span>tickTime=2000：是Zookeeper服务器之间或服务器与客户端之间维持心跳的时间间隔，即每个tickTime时间就会发送一个心跳。</div><div style="font-size:14px;text-align:left;line-height:1.75;">               initLimit=10：初始化连接时最长能忍受多少个心跳时间间隔数</div><div style="font-size:14px;text-indent:56px;text-align:left;line-height:1.75;">syncLimit=5：这个配置项标识 Leader 与 Follower 之间发送消息，请求和应答时间长度，最长不能超过多少个 tickTime 的时间长度，总</div><div style="font-size:14px;text-indent:56px;text-align:left;line-height:1.75;">                         的时间长度<span style="font-size:14px;text-indent:140px;">就是 2*tickTime=4 秒 </span></div><div style="font-size:14px;text-indent:56px;text-align:left;line-height:1.75;">dataDir=/tmp/zookeeper：Zookeeper保存数据的目录。默认情况下Zookeeper也会将写数据的日志文件写入该目录。</div><div style="font-size:14px;text-indent:56px;text-align:left;line-height:1.75;">dataLogDir=/tmp/zookeeper：日志目录，路径默认与dataDir一致，可设置。</div><div style="font-size:14px;text-indent:56px;text-align:left;line-height:1.75;">clientPort=2181: 客户端与Zookeeper服务器连接的默认端口，Zookeeper会监听这个端口，接收客户端的请求。</div><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">zoo.cfg</span>：</div><hr style="font-size:14px;clear:both;"><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The number of milliseconds of each tick</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">tickTime=2000</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The number of ticks that the initial </div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># synchronization phase can take</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">initLimit=10</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The number of ticks that can pass between </div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># sending a request and getting an acknowledgement</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">syncLimit=5</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># the directory where the snapshot is stored.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># do not use /tmp for storage, /tmp here is just </div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># example sakes.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><span style="color:rgb(119,201,75);">dataDir</span>=/usr/local/bigdata/zk/data</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><span style="color:rgb(119,201,75);">dataLogDir</span>=/usr/local/bigdata/zk/log</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># the port at which the clients will connect</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">clientPort=2181</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># the maximum number of client connections.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># increase this if you need to handle more clients</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#maxClientCnxns=60</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Be sure to read the maintenance section of the </div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># administrator guide before turning on autopurge.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The number of snapshots to retain in dataDir</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#autopurge.snapRetainCount=3</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Purge task interval in hours</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Set to "0" to disable auto purge feature</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#autopurge.purgeInterval=1</div><div style="font-size:14px;margin-left:28px;text-align:left;line-height:1.75;">      </div><div style="font-size:14px;margin-left:28px;text-align:left;line-height:1.75;">     <span style="color:rgb(223,64,42);">  #Zookeeper集群配置:</span></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">server.1=slave1:2888:3888</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">server.2=slave2:2888:3888</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">server.3=slave3:2888:3888                                     <span style="color:rgb(250,226,32);">  IP在host中配置了,也可直接填写，查看：  more /etc/host</span></div><hr style="font-size:14px;clear:both;"><div style="font-size:14px;text-indent:28px;text-align:left;line-height:1.75;">    (3) Zookeeper的bin目录：</div><div style="font-size:14px;text-indent:28px;text-align:left;line-height:1.75;">         启动： ./zkServer.sh start</div><div style="font-size:14px;text-indent:28px;text-align:left;line-height:1.75;">         停止： ./zkServer.sh stop</div><ol start="2" style="font-size:14px;"><li style="text-align:left;line-height:1.75;font-size:14px;list-style-position:inside;font-family:'Microsoft YaHei', STXihei;color:rgb(57,57,57);">Kafka配置</li></ol><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">            (1) 配置文件路径：/config/</span>server.properties</div><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">                  主要配置参数：broker.id（唯一的）、log.dir（日志路径）和zookeeper.connect（单个或集群）。</span></div><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">                  配置参考: </span><a href="https://blog.csdn.net/lizhitao/article/details/25667831" rel="nofollow"><span style="color:rgb(0,56,132);"><u>https://blog.csdn.net/lizhitao/article/details/25667831</u></span></a></div><div style="font-size:14px;text-align:left;line-height:1.75;">server.properties<span style="color:rgb(57,57,57);">:</span></div><hr style="font-size:14px;clear:both;"><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="color:rgb(57,57,57);">              </span># Licensed to the Apache Software Foundation (ASF) under one or more</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># contributor license agreements.  See the NOTICE file distributed with</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># this work for additional information regarding copyright ownership.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The ASF licenses this file to You under the Apache License, Version 2.0</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># (the "License"); you may not use this file except in compliance with</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># the License.  You may obtain a copy of the License at</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#    http://www.apache.org/licenses/LICENSE-2.0</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Unless required by applicable law or agreed to in writing, software</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># distributed under the License is distributed on an "AS IS" BASIS,</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># See the License for the specific language governing permissions and</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># limitations under the License.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># see kafka.server.KafkaConfig for additional details and defaults</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">############################# Server Basics #############################</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The id of the broker. This must be set to a unique integer for each broker.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><span style="color:rgb(119,201,75);">broker.id=5   </span></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#hostname</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><span style="color:rgb(119,201,75);">host.name</span>=ip</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">port=9092</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Switch to enable topic deletion or not, default value is false</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#delete.topic.enable=true</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">delete.topic.enable=true</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">############################# Socket Server Settings #############################</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The address the socket server listens on. It will get the value returned from </div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># java.net.InetAddress.getCanonicalHostName() if not configured.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#   FORMAT:</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#     listeners = listener_name://host_name:port</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#   EXAMPLE:</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#     listeners = PLAINTEXT://your.host.name:9092</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#listeners=PLAINTEXT://:9092</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Hostname and port the broker will advertise to producers and consumers. If not set, </div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># it uses the value for "listeners" if configured.  Otherwise, it will use the value</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># returned from java.net.InetAddress.getCanonicalHostName().</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#advertised.listeners=PLAINTEXT://your.host.name:9092</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Maps listener names to security protocols, the default is for them to be the same. See the config documentation for more details</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#listener.security.protocol.map=PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The number of threads handling network requests</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">num.network.threads=3</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The number of threads doing disk I/O</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">num.io.threads=8</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The send buffer (SO_SNDBUF) used by the socket server</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">socket.send.buffer.bytes=102400</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The receive buffer (SO_RCVBUF) used by the socket server</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">socket.receive.buffer.bytes=102400</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The maximum size of a request that the socket server will accept (protection against OOM)</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">socket.request.max.bytes=104857600</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">############################# Log Basics #############################</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># A comma seperated list of directories under which to store log files</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#单独设置一个路径，不要放到tmp/目录下</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><span style="color:rgb(119,201,75);">log.dirs</span><span style="color:rgb(223,64,42);">=/opt/kafka_2.10-0.10.2.1/kafka-logs</span></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The default number of log partitions per topic. More partitions allow greater</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># parallelism for consumption, but this will also result in more files across</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># the brokers.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">num.partitions=3</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The number of threads per data directory to be used for log recovery at startup and flushing at shutdown.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># This value is recommended to be increased for installations with data dirs located in RAID array.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">num.recovery.threads.per.data.dir=1</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">############################# Log Flush Policy #############################</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Messages are immediately written to the filesystem but by default we only fsync() to sync</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># the OS cache lazily. The following configurations control the flush of data to disk.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># There are a few important trade-offs here:</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#    1. Durability: Unflushed data may be lost if you are not using replication.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#    2. Latency: Very large flush intervals may lead to latency spikes when the flush does occur as there will be a lot of data to flush.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#    3. Throughput: The flush is generally the most expensive operation, and a small flush interval may lead to exceessive seeks.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The settings below allow one to configure the flush policy to flush data after a period of time or</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># every N messages (or both). This can be done globally and overridden on a per-topic basis.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The number of messages to accept before forcing a flush of data to disk</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#log.flush.interval.messages=10000</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">log.flush.interval.messages=1000</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The maximum amount of time a message can sit in a log before we force a flush</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#log.flush.interval.ms=1000</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">log.flush.interval.ms=3000</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">############################# Log Retention Policy #############################</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The following configurations control the disposal of log segments. The policy can</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># be set to delete segments after a period of time, or after a given size has accumulated.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># A segment will be deleted whenever *either* of these criteria are met. Deletion always happens</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># from the end of the log.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The minimum age of a log file to be eligible for deletion due to age</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">log.retention.hours=24</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># A size-based retention policy for logs. Segments are pruned from the log as long as the remaining</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># segments don't drop below log.retention.bytes. Functions independently of log.retention.hours.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">#log.retention.bytes=1073741824</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The maximum size of a log segment file. When this size is reached a new log segment will be created.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">log.segment.bytes=1073741824</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># The interval at which log segments are checked to see if they can be deleted according</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># to the retention policies</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">log.retention.check.interval.ms=60000</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">############################# Zookeeper #############################</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Zookeeper connection string (see zookeeper docs for details).</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># This is a comma separated host:port pairs, each corresponding to a zk</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># server. e.g. "127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002".</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># You can also append an optional chroot string to the urls to specify the</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># root directory for all kafka znodes.</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><span style="color:rgb(223,64,42);"># Kafka与Zookeeper集群配置:</span></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><span style="color:rgb(119,201,75);">zookeeper.connect</span>=ip1:2181,ip2:2181,ip37:2181    </div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;"># Timeout in ms for connecting to zookeeper</div><div style="font-size:14px;margin-left:56px;text-align:left;line-height:1.75;">zookeeper.connection.timeout.ms=6000</div><hr style="font-size:14px;clear:both;"><div style="font-size:14px;text-indent:28px;text-align:left;line-height:1.75;">     (2) kafka启动命令：</div><div style="font-size:14px;text-align:left;line-height:1.75;">              进入到kafka根目录:/opt/kafka_2.10-0.10.2.1/bin</div><div style="font-size:14px;text-align:left;line-height:1.75;"><span style="font-weight:bold;">            单机版</span></div><div style="font-size:14px;text-indent:56px;text-align:left;line-height:1.75;">zookeeper启动：  ./zookeeper-server-start.sh /opt/kafka_2.10-0.10.2.1/config/zookeeper.properties &amp;  </div><div style="font-size:14px;text-align:left;line-height:1.75;">	              kafka启动： ./kafka-server-start.sh /opt/kafka_2.10-0.10.2.1/config/server.properties &amp;</div><div style="font-size:14px;text-align:left;line-height:1.75;">           <span style="font-weight:bold;"> 集群版</span></div><div style="font-size:14px;text-align:left;line-height:1.75;">            	zookeeper启动：每台机机器的zookeeper都要启动，进入bin目录下： ./zkServer.sh start</div><div style="font-size:14px;text-align:left;line-height:1.75;">                kafka启动：每台机器的kafka都要启动，进入bin目录下: ./kafka-server-start.sh /opt/kafka_2.10-0.10.2.1/config/server.properties &amp;</div><div style="font-size:14px;text-align:left;line-height:1.75;">          (3) kafka停止命令：./kafka-server-stop.sh</div><div style="font-size:14px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;text-align:left;line-height:1.75;"> 四. Kafka常用命令：</div><div style="font-size:14px;text-align:left;line-height:1.75;">    (1)<span style="font-weight:bold;"> 创建Topic</span>:  ./kafka-topics.sh --create --zookeeper ip:2181 --replication-factor 1 --partitions 1 --topic test</div><div style="font-size:14px;text-align:left;line-height:1.75;">    (2)<span style="font-weight:bold;"> Producer发送消息</span>:  ./kafka-console-producer.sh --broker-list ip:19092 --topic test                                （单机模式）      <span style="font-size:9px;"> </span></div><div style="font-size:14px;text-indent:28px;text-align:left;line-height:1.75;">  ./kafka-console-producer.sh --broker-list ip1:9092,ip2:9092,ip3:9092 --topic test                                  （<span style="font-size:14px;text-indent:28px;">集群模式</span><span style="font-size:14px;text-indent:28px;">）</span></div><div style="font-size:14px;text-align:left;line-height:1.75;">    (3) <span style="font-weight:bold;">Consumer接收消息</span>:  ./kafka-console-consumer.sh --bootstrap-server ip:9092 --topic test --from-beginning  <span style="font-size:9px;"> </span></div><div style="font-size:14px;text-indent:28px;text-align:left;line-height:1.75;"> ./kafka-console-consumer.sh --<span style="color:rgb(119,201,75);">zookeeper </span>ip1:2181,ip2:2181,ip3:2181 --topic test --from-beginning   （集群模式）</div><div style="font-size:14px;text-align:left;line-height:1.75;">    (4) <span style="font-weight:bold;">查看所有的主题</span>:  ./kafka-topics.sh --list --zookeeper ip:2181 </div><div style="font-size:14px;text-align:left;line-height:1.75;">    (5) <span style="font-weight:bold;">查看topic的详细信息</span>:  ./kafka-topics.sh -zookeeper ip:2181 -describe -topic test</div><div style="font-size:14px;text-align:left;line-height:1.75;">    (6) <span style="font-weight:bold;">为topic增加partition</span>： ./kafka-topics.sh –zookeeper ip:2181 –alter –partitions 20 –topic testKJ1</div><div style="font-size:14px;text-align:left;line-height:1.75;">    (7) <span style="font-weight:bold;">删除topic</span>:  ./kafka-topics.sh --zookeeper ip:2181 --delete --topic test</div><div style="font-size:14px;text-align:left;line-height:1.75;"><br></div><p><span style="font-size:14px;">                       ----------------------  </span><span style="font-size:12px;color:#ff6666;">文中的ip都要换成实际的ip地址</span><span style="font-size:14px;">------------------------</span></p><div style="font-size:14px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;text-align:center;line-height:1.75;"><br></div><div style="font-size:14px;text-align:left;line-height:1.75;"><br></div><div style="font-size:14px;text-align:left;line-height:1.75;"><br></div><span style="font-size:14px;"><br></span></div>            </div>
                </div>