---
layout:     post
title:      HBase框架基础（一）
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
    <div class="rich_media_content" id="js_content">
                    

                    

                    
                    
                    <p style="line-height:2em;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/EIMsXZPn4OUNP8kGZaYyPeRAR7kicibMmyTNziaKKqsNHOiavGlr89aXfh9aL0FwuUA2yubLoMFgqdWC8kDq3KfyNA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p><p style="line-height:2em;">        HBase的基础框架，将分成几个章节对HBase进行描述，不当之处还望大家批评指正。下面是了解HBase基础架构的第一部分。</p><p><br></p><p style="line-height:2em;"><img style="vertical-align:middle;width:20px;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/EIMsXZPn4OUNP8kGZaYyPeRAR7kicibMmysx9oNiaLRDa5U1wZa9NMc3ZwN6DgrxSXfFrJnzs4LGwYxHBVXTAAruQ/640?wx_fmt=gif" alt="640?wx_fmt=gif"></p><p style="font-size:18px;color:rgb(61,170,214);font-weight:bold;line-height:2em;">什么是HBase</p><p style="line-height:2em;">        要解释HBase，我们就先说一说经常接触到的RDBMS，即关系型数据库：</p><p style="line-height:2em;"><strong><span style="font-size:18px;">** mysql：</span></strong></p><p style="line-height:2em;">1、有开源社区版本的，有企业收费版本的</p><p style="line-height:2em;">2、遵循主从架构</p><p style="line-height:2em;">3、 端口号：3306</p><p style="line-height:2em;"><strong><span style="font-size:18px;">** sqlserver：</span></strong></p><p style="line-height:2em;">1、微软公司开发的产品，主要用于windows平台下的项目</p><p style="line-height:2em;">2、端口号：1433</p><p style="line-height:2em;"><strong><span style="font-size:18px;">** oracle：</span></strong> </p><p style="line-height:2em;">1、超强的集群性能</p><p style="line-height:2em;">2、端口号：1521</p><p style="line-height:2em;">再来说一说HBase这个非关系型数据库：</p><p style="line-height:2em;"><strong><span style="font-size:18px;">** HBase：</span></strong></p><p style="line-height:2em;">1、灵感来自于Google的BigTable论文</p><p style="line-height:2em;">2、一般于Hadoop结合使用，是Hadoop项目的子项目</p><p style="line-height:2em;">3、基于key-value的形式存储数据</p><p style="line-height:2em;">4、高性能，高可靠，面向列，可伸缩的分布式存储系统</p><p style="line-height:2em;">5、没有sql语句，一般用API操作</p><p style="line-height:2em;">6、适用于单表数据量超大，且不能分表</p><p style="line-height:2em;">7、分布式架构,支持服务器在线添加和移除</p><p style="line-height:2em;">接着说一说HBase和Hive的关系和区别：</p><p style="line-height:2em;"><strong><span style="font-size:18px;">** Hive：</span></strong></p><p style="line-height:2em;">1、是数据仓库，不是数据库</p><p style="line-height:2em;">2、一般用于分析，并不会直接接入到在线业务</p><p style="line-height:2em;">3、实际上是将hql语句转化为mapreduce任务运行在yarn平台上</p><p style="line-height:2em;"><strong><span style="font-size:18px;">** HBase：</span></strong></p><p style="line-height:2em;">1、面向列的非关系型数据库，分布式架构</p><p style="line-height:2em;">2、用于存储数据和检索数据，一般会直接接入在线业务</p><p style="line-height:2em;">3、不依赖于yarn和mapreduce</p><p style="line-height:2em;">最后说一说RDBMS和HBase的区别：</p><p style="line-height:2em;">1、RDBMS使用sql语句，HBase使用API</p><p style="line-height:2em;">2、RDBMS基于行存储，HBase基于列存储且支持更好的压缩</p><p style="line-height:2em;">3、RDBMS适用于存储结构化数据，HBase适用于存储结构化和非结构化数据</p><p style="line-height:2em;">4、RDBMS支持事务处理，HBase不支持事务处理</p><p style="line-height:2em;">5、RDBMS支持多表Join，HBase不支持多表Join</p><p style="line-height:2em;">6、RDMBS更新表数据会自动更新索引文件，HBase需要手动建立索引，手动更新</p><p style="line-height:2em;">7、RDMBS适用于业务逻辑复杂的存储环境，HBase不适合。</p><p style="line-height:2em;">8、RDMBS不适合存储超大数据量的单表，HBase适合。</p><p><br></p><p style="line-height:2em;"><img style="vertical-align:middle;width:20px;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/EIMsXZPn4OUw2D2a00gH4RlPk3wIdxDS6SmXfcXGiarvuZJFK7hFBUn0F2iagxw6je9XGibLmU9n7lmfrUA4agASw/640?wx_fmt=gif" alt="640?wx_fmt=gif"></p><p style="font-size:18px;color:rgb(61,170,214);font-weight:bold;line-height:2em;">HBase基本进程<br></p><p style="line-height:2em;"><strong><span style="font-size:18px;">HMaster</span></strong></p><p style="line-height:2em;">HMaster节点有如下功能：</p><p style="line-height:2em;">1、为HRegionServer分配HRegion</p><p style="line-height:2em;">2、负责HRegionServer的负载均衡</p><p style="line-height:2em;">3、发现失效的HRegionServer并重新分配其上的HRegion</p><p style="line-height:2em;">4、HDFS上的垃圾文件回收</p><p style="line-height:2em;">5、处理Schema更新请求</p><p style="line-height:2em;"><strong><span style="font-size:18px;">HRegionServer</span></strong></p><p style="line-height:2em;">1、维护HMaster分配给他的HRegion，处理HRegion的IO请求</p><p style="line-height:2em;">2、负责切分正在运行过程中变的过大的HRegion</p><p><br></p><p style="line-height:2em;"><img style="vertical-align:middle;width:20px;" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_gif/EIMsXZPn4OUw2D2a00gH4RlPk3wIdxDSxj5QCJZXZRiau4fQViakUyPzDKa94EapDfmy296NlW5nHdicC5AvEOfGw/640?wx_fmt=gif" alt="640?wx_fmt=gif"></p><p style="font-size:18px;color:rgb(61,170,214);font-weight:bold;line-height:2em;">HBase基本原理<br></p><p><br></p><p style="line-height:2em;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/EIMsXZPn4OUw2D2a00gH4RlPk3wIdxDSZibLjRUoruccQo5RV7pqutcRm1GftZMicMLIKw0Joe4fpVCXViahl5zWA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p><p style="line-height:2em;">注：一般而言，Master和NameNode在一台服务器上，RegionServer与DataNode在同一个服务器上。</p><p style="line-height:2em;"><strong><span style="font-size:18px;">Client：</span></strong></p><p style="line-height:2em;">包含访问HBase的接口，并维护cache来加快对HBase的访问。说白了，就是用来访问HBase的客户端。</p><p style="line-height:2em;"><strong><span style="font-size:18px;">HMaster：</span></strong></p><p style="line-height:2em;">这个东西是HBase的主节点，用来协调Client端应用程序和HRegionServer的关系，管理分配HRegion给HRegionserver服务器。</p><p style="line-height:2em;"><strong><span style="font-size:18px;">HRegionServer</span></strong><strong>：</strong></p><p style="line-height:2em;">Hbase的从节点，管理当前自己这台服务器上面的HRegion，HRegion是Hbase表的基础单元组建，存储了分布式的表。HRegionserver负责切分在运行过程中变得过大的HRegion。</p><p style="line-height:2em;"><strong><span style="font-size:18px;">HRegion：</span></strong></p><p style="line-height:2em;">一个Table可以有多个HRegion，HBase使用rowKey将表水平切割成多个HRegion，每个HRegion都纪录了它的StartKey和EndKey（第一个HRegion的</p><p style="line-height:2em;">StartKey为空，最后一个HRegion的EndKey为空），由于RowKey是排序的，因而Client可以通过HMaster快速的定位每个RowKey在哪个HRegion中。</p><p style="line-height:2em;">HRegion由HMaster分配到相应的HRegionServer中，然后由HRegionServer负责HRegion的启动和管理，和Client的通信，负责数据的读(使用HDFS)。</p><p style="line-height:2em;">每个HRegionServer可以同时管理1000个左右的HRegion，出处请参看论文：BigTable（5 Implementation节）：Each tablet server manages a set of tablets(typically we have somewhere between ten to a thousand tablets per tablet server)）。</p><p style="line-height:2em;"><strong><span style="font-size:18px;">MemStore：</span></strong></p><p style="line-height:2em;">它是一个写缓存，数据先WAL[write ahead log]（也就是HLog它是一个二进制文件，所有写操作都会先保证将数据写入这个Log文件后，才会真正更新MemStore，最后写入HFile中），在写入MemStore后，由MemStore根据一定的算法将数据Flush到底层HDFS文件中(HFile)，一般而言，对于每个HRegion中的每个Column Family来说，有一个自己的MemStore。</p><p style="line-height:2em;"><strong><span style="font-size:18px;">StoreFile：</span></strong></p><p style="line-height:2em;">1个HStore，由一个MemStore和0~N个StoreFile组成。</p><p style="line-height:2em;"><strong><span style="font-size:18px;">HFile：</span></strong></p><p style="line-height:2em;">用于存储HBase的数据(Cell/KeyValue)，在HFile中的数据是按RowKey、Column Family、Column排序，对于相同的数据单元，排序则按照时间戳（Timestamp）倒叙排列。</p><p style="line-height:2em;"><strong><span style="font-size:18px;">Zookeeper：</span></strong></p><p style="line-height:2em;">HBase内置有zookeeper，但一般我们会有其他的Zookeeper集群来监管master和regionserver，Zookeeper通过选举，保证任何时候，集群中只有一个活跃的HMaster，HMaster与HRegionServer 启动时会向ZooKeeper注册，存储所有HRegion的寻址入口，实时监控HRegionserver的上线和下线信息。</p><p style="line-height:2em;">并实时通知给HMaster，存储HBase的schema和table元数据，默认情况下，HBase 管理ZooKeeper 实例，Zookeeper的引入使得HMaster不再是单点故障。一般情况下会启动两个HMaster，非Active的HMaster会定期的和Active HMaster通信以获取其最新状态，从而保证它是实时更新的，因而如果启动了多个HMaster反而增加了Active HMaster的负担。如图：</p><p style="line-height:2em;"><img src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_png/EIMsXZPn4OUw2D2a00gH4RlPk3wIdxDSBQKMIicWEZZicAT1z0nUe95NvdVv2TuCMb3phR0SW2fjJSgcXP9ATrQQ/640?wx_fmt=png" alt="640?wx_fmt=png"></p><p style="font-size:20px;border-width:0px;border-style:none;border-color:rgb(64,205,86);color:rgb(255,255,238);background:rgb(18,149,39) none repeat scroll 0% 0%;line-height:2em;"><br></p><p style="min-height:1em;line-height:1.6em;border-color:rgb(18,149,39);color:inherit;">猜你喜欢</p><p style="min-height:1em;line-height:1.6em;color:inherit;border-color:rgb(18,149,39);"><br></p><p style="min-height:1em;line-height:1.6em;color:inherit;border-color:rgb(18,149,39);"><br></p><p style="min-height:1em;line-height:1.6em;color:inherit;border-color:rgb(18,149,39);"><br></p><p><br></p><p style="min-height:1em;line-height:2em;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994491&amp;idx=1&amp;sn=95fe95ff6f9451b25d789a96d126ae57&amp;chksm=847c6016b30be9001f03a2653897b4c1c6a1cf11ff285f4ffb72ed54be29cc2973bcb6cbc04f&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">#大数据和云计算机技术社区#博客精选（2017）</a><br></p><p style="min-height:1em;line-height:2em;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994350&amp;idx=1&amp;sn=13c264dd596408df24acfb4acfd1cbfc&amp;chksm=847c6783b30bee959a9f5f58f1112de38cdb7ac6e5f097346911d6dd8ad6505e14b87f5e71a9&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">NoSQL 还是 SQL ？这一篇讲清楚</a><br></p><p style="min-height:1em;line-height:2em;"><span style="color:#FFA900;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994245&amp;idx=1&amp;sn=18985825170e51b5665390b2dabda326&amp;chksm=847c67e8b30beefea82e331ba2c2a8bf077e7eef226356a74bc9b112736fe84527f1a6fa6830&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">阿里的OceanBase解密</a></span></p><p style="min-height:1em;line-height:2em;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994424&amp;idx=1&amp;sn=5ce873e5b062c41d9d3feb169421de81&amp;chksm=847c6055b30be94356ff5f6a7752af218a04a96ab915ff1bfad6b8c8a60078d953d4a9e36292&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">#大数据和云计算技术#: "四有"社区介绍</a></p><p style="min-height:1em;line-height:2em;"><span style="color:#FFA900;">大数据和云计算技术周报（第56期）</span></p><p style="min-height:1em;line-height:2em;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994281&amp;idx=1&amp;sn=3bf17f41fd00d5ff1bd74044ab61c6fc&amp;chksm=847c67c4b30beed20a2b746511aeb029466ad7f40c5a92a8c39aba6812bdb46298a717bd7d25&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">新数仓系列：Hbase周边生态梳理（1）</a></p><p style="min-height:1em;line-height:2em;"><span style="color:#FFA900;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994165&amp;idx=1&amp;sn=6fe5e33d5ab6ac7ca96e79f8d4e47b90&amp;chksm=847c6758b30bee4e6eb784516668e7487a206bb88ab50aca2996968b9a994ceafa26769de478&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">《大数据架构详解》第2次修订说明</a></span></p><p style="min-height:1em;line-height:2em;"><span style="color:#FFA900;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994233&amp;idx=1&amp;sn=854040597998b707f7089bb303346a79&amp;chksm=847c6714b30bee029af0e0ae09fc02fa2b4fea30af0c6f8f2fc5fd513455c5b3da9e477b2184&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">简单梳理跨数据中心数据库</a></span></p><p style="min-height:1em;line-height:2em;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994186&amp;idx=1&amp;sn=b056116636ee348c80d224a7efc7b0d9&amp;chksm=847c6727b30bee310889ad2bc72a09cb26635ff801d5e31bc0c49e13d8c9f04ae583cb7ca7b4&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">云观察系列：漫谈运营商公有云发展史</a></p><p style="min-height:1em;line-height:2em;"><span style="color:#FFA900;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994181&amp;idx=1&amp;sn=12a19f42d855361f6850ea4a5f7c5bb5&amp;chksm=847c6728b30bee3e74830b458243b264ed8a4841e3c3e30fb89fc1f95d6bca3cc748ea1d5e12&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">云观察系列：百度云的一波三折</a></span><br></p><p style="min-height:1em;line-height:2em;"><span style="color:#FFA900;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994176&amp;idx=1&amp;sn=22293c8dca2bd0d59c79bddcc689379a&amp;chksm=847c672db30bee3b83bfcff9d23e5e08c85b685f425d49bbcc3db02be80010f4f9848e95cb60&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">云观察系列：阿里云战略观察</a></span></p><p style="min-height:1em;line-height:2em;"><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODUxMzQxMA==&amp;mid=2663994152&amp;idx=1&amp;sn=b5ee27c116f0ad80a0aabf7d2a1922eb&amp;chksm=847c6745b30bee537f950387c63d1044ef413cb9795929ecb03bf56106c33da4cd363a659248&amp;scene=21#wechat_redirect" rel="nofollow" style="color:rgb(255,169,0);">超融合方案分析系列（7）思科超融合方案分析</a></p><p style="font-size:20px;border-width:0px;border-style:none;border-color:rgb(64,205,86);color:rgb(255,255,238);background:rgb(18,149,39) none repeat scroll 0% 0%;line-height:2em;"><br></p><p style="min-height:1em;line-height:1.6em;border-color:rgb(18,149,39);color:inherit;">加入技术讨论群</p><p style="min-height:1em;line-height:1.6em;color:inherit;border-color:rgb(18,149,39);"><br></p><p style="min-height:1em;line-height:1.6em;color:inherit;border-color:rgb(18,149,39);"><br></p><p style="min-height:1em;line-height:1.6em;color:inherit;border-color:rgb(18,149,39);"><br></p><p><br></p><p style="min-height:1em;line-height:2em;"><span style="color:#3E3E3E;">《大数据和云计算技术》社区群</span><span style="color:#CC0000;">人数已经3000+</span><span style="color:#3E3E3E;">，欢迎大家加下面助手微信，拉大家进群，自由交流。</span><br></p><p style="min-height:1em;text-align:center;line-height:2em;"><img style="width:237px;" width="276" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/EIMsXZPn4OXFtpI13ys0NOdj8PGgwPVJAfXQzbQfBMadrDMibL9w1yb7iaoxnATficcoSggSIRxp3ycbzoia2W9Orw/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p><p style="min-height:1em;"><br></p><p style="min-height:1em;line-height:2em;">喜欢QQ群的，可以扫描下面二维码：</p><p style="min-height:1em;text-align:center;line-height:2em;"><img style="width:226px;" width="241" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/EIMsXZPn4OXFtpI13ys0NOdj8PGgwPVJg453YRribn1xzh6B2h6ibrYc71Y175J7VMCRAwBOXf0HpibAE71hUmqKA/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p><p style="min-height:1em;line-height:2em;">欢迎大家通过二维码打赏支持技术社区（<span style="color:#D92142;">英雄请留名，社区感谢您，打赏次数超过108+</span>）：</p><p style="min-height:1em;text-align:center;line-height:2em;"><img style="width:228px;" width="253" src="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/EIMsXZPn4OXFtpI13ys0NOdj8PGgwPVJd9NSewrZzIiaRojCFiaWictPmLibQ7RM19ZQbnqLzhxkr2zicfA29thwvJg/640?wx_fmt=jpeg" alt="640?wx_fmt=jpeg"></p><p style="min-height:1em;"><br></p><p><br></p><p><br></p>
                </div>
              </div>
                </div>