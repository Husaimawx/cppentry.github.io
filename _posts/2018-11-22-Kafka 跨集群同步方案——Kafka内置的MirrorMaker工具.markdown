---
layout:     post
title:      Kafka 跨集群同步方案——Kafka内置的MirrorMaker工具
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
该方案解决Kafka跨集群同步、创建Kafka集群镜像等相关问题，主要使用Kafka内置的MirrorMaker工具实现。</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
Kafka镜像即已有Kafka集群的副本。下图展示如何使用MirrorMaker工具创建从源Kafka集群（source cluster）到目标Kafka集群（target cluster）的镜像。该工具通过Kafka consumer从源Kafka集群消费数据，然后通过一个内置的Kafka producer将数据重新推送到目标Kafka集群。</p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
<a href="http://tangzhaohui.net/wp-content/uploads/2014/04/mirror_maker.jpg" rel="nofollow" style="border:0px;vertical-align:baseline;color:rgb(159,159,159);text-decoration:none;"><img class="alignleft size-full wp-image-529" alt="kafka mirror maker" src="http://tangzhaohui.net/wp-content/uploads/2014/04/mirror_maker.jpg" width="433" height="183" style="border:0px;vertical-align:baseline;"></a></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
 </p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
<span id="more-524" style="border:0px;vertical-align:baseline;"></span></p>
<h2 style="border:0px;vertical-align:baseline;clear:both;line-height:1.6;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
一、如何创建镜像</h2>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
使用MirrorMaker创建镜像是比较简单的，搭建好目标Kafka集群后，只需要启动mirror-maker程序即可。其中，一个或多个consumer配置文件、一个producer配置文件是必须的，whitelist、blacklist是可选的。在consumer的配置中指定源Kafka集群的Zookeeper，在producer的配置中指定目标集群的Zookeeper（或者broker.list）。</p>
<div id="crayon-53e07d914de8f210979423" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" style="vertical-align:baseline;width:624.984375px;font-family:Monaco, MonacoRegular, 'Courier New', monospace;color:rgb(51,51,51);border:1px solid rgb(153,153,153) !important;overflow:hidden !important;line-height:15px !important;background:rgb(253,253,253) !important;">
<div class="crayon-plain-wrap" style="border:0px;vertical-align:baseline;background:0px 50%;">
<textarea class="crayon-plain print-no" readonly style="border:0px;overflow:hidden;vertical-align:top;width:622.984375px;opacity:0;color:rgb(0,0,0);z-index:0;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;line-height:15px !important;" cols="22" rows="3"></textarea></div><div class="crayon-main" style="border:0px;vertical-align:baseline;width:622.984375px;overflow:hidden;z-index:1;background:0px 50%;"><table class="crayon-table" style="margin-left:0px;vertical-align:baseline;color:rgb(117,117,117);line-height:2;border:none !important;border-collapse:collapse !important;border-spacing:0px !important;background:none !important;"><tbody style="border:0px;font-size:12px;vertical-align:baseline;"><tr class="crayon-row" style="border:none !important;vertical-align:top !important;background:0px 50%;"><td class="crayon-nums" style="border:0px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;color:rgb(84,153,222) !important;background:rgb(223,239,255) !important;"><div class="crayon-nums-content" style="border:0px;vertical-align:baseline;line-height:15px !important;background:0px 50%;"><div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">1</div></div></td><td class="crayon-code" style="border:0px;width:605px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;background:0px 50%;"><div class="crayon-pre" style="vertical-align:baseline;color:rgb(0,0,0);overflow:visible;border:none !important;line-height:15px !important;background:none !important;"><div class="crayon-line" id="crayon-53e07d914de8f210979423-1" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;"><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">kafka</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">run</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-t" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(128,0,128) !important;">class</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.sh</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">kafka</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.tools</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.MirrorMaker</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">consumer</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.config</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">sourceCluster1Consumer</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.config</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">consumer</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.config</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">sourceCluster2Consumer</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.config</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">num</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.streams</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">producer</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.config</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">targetClusterProducer</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.config</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">whitelist</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-s" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,128,0) !important;">".*"</span></div></div></td></tr></tbody></table></div></div><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">例如，你需要创建S集群的镜像，目标集群T已经搭建好，简单的做法如下：</p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;">1. 创建consumer配置文件：sourceClusterConsumer.config</span></p><div id="crayon-53e07d914deac423052904" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" style="vertical-align:baseline;width:624.984375px;font-family:Monaco, MonacoRegular, 'Courier New', monospace;color:rgb(51,51,51);border:1px solid rgb(153,153,153) !important;overflow:hidden !important;line-height:15px !important;background:rgb(253,253,253) !important;"><div class="crayon-plain-wrap" style="border:0px;vertical-align:baseline;background:0px 50%;"><textarea class="crayon-plain print-no" readonly style="border:0px;overflow:hidden;vertical-align:top;width:622.984375px;opacity:0;color:rgb(0,0,0);z-index:0;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;line-height:15px !important;" cols="22" rows="3"></textarea></div>
<div class="crayon-main" style="border:0px;vertical-align:baseline;width:622.984375px;overflow:hidden;z-index:1;background:0px 50%;">
<table class="crayon-table" style="margin-left:0px;vertical-align:baseline;color:rgb(117,117,117);line-height:2;border:none !important;border-collapse:collapse !important;border-spacing:0px !important;background:none !important;"><tbody style="border:0px;font-size:12px;vertical-align:baseline;"><tr class="crayon-row" style="border:none !important;vertical-align:top !important;background:0px 50%;"><td class="crayon-nums" style="border:0px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;color:rgb(84,153,222) !important;background:rgb(223,239,255) !important;">
<div class="crayon-nums-content" style="border:0px;vertical-align:baseline;line-height:15px !important;background:0px 50%;">
<div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
1</div>
<div class="crayon-num crayon-striped-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;color:rgb(49,124,197) !important;background:rgb(200,225,250) !important;">
2</div>
</div>
</td>
<td class="crayon-code" style="border:0px;width:605px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;background:0px 50%;">
<div class="crayon-pre" style="vertical-align:baseline;color:rgb(0,0,0);overflow:visible;border:none !important;line-height:15px !important;background:none !important;">
<div class="crayon-line" id="crayon-53e07d914deac423052904-1" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
<span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">zk</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">connect</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">szk0</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">:</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2181</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">szk1</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">:</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2181</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">szk2</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">:</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2181</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-53e07d914deac423052904-2" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:rgb(247,247,247) !important;">
<span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">groupid</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">test</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">mirror</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">consumer</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">group</span></div>
</div>
</td>
</tr></tbody></table></div>
</div>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
<span style="border:0px;vertical-align:baseline;"> 2. 创建producer配置文件：targetClusterProducer.config</span></p>
<div id="crayon-53e07d914deb4559072622" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" style="vertical-align:baseline;width:624.984375px;font-family:Monaco, MonacoRegular, 'Courier New', monospace;color:rgb(51,51,51);border:1px solid rgb(153,153,153) !important;overflow:hidden !important;line-height:15px !important;background:rgb(253,253,253) !important;">
<div class="crayon-plain-wrap" style="border:0px;vertical-align:baseline;background:0px 50%;">
<textarea class="crayon-plain print-no" readonly style="border:0px;overflow:hidden;vertical-align:top;width:622.984375px;opacity:0;color:rgb(0,0,0);z-index:0;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;line-height:15px !important;" cols="22" rows="3"></textarea></div><div class="crayon-main" style="border:0px;vertical-align:baseline;width:622.984375px;overflow:hidden;z-index:1;background:0px 50%;"><table class="crayon-table" style="margin-left:0px;vertical-align:baseline;color:rgb(117,117,117);line-height:2;border:none !important;border-collapse:collapse !important;border-spacing:0px !important;background:none !important;"><tbody style="border:0px;font-size:12px;vertical-align:baseline;"><tr class="crayon-row" style="border:none !important;vertical-align:top !important;background:0px 50%;"><td class="crayon-nums" style="border:0px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;color:rgb(84,153,222) !important;background:rgb(223,239,255) !important;"><div class="crayon-nums-content" style="border:0px;vertical-align:baseline;line-height:15px !important;background:0px 50%;"><div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">1</div></div></td><td class="crayon-code" style="border:0px;width:605px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;background:0px 50%;"><div class="crayon-pre" style="vertical-align:baseline;color:rgb(0,0,0);overflow:visible;border:none !important;line-height:15px !important;background:none !important;"><div class="crayon-line" id="crayon-53e07d914deb4559072622-1" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;"><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">zk</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">connect</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">tzk0</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">:</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2181</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">tzk1</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">:</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2181</span></div></div></td></tr></tbody></table></div></div><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;"> 3. 创建启动脚本：start.sh</span></p><div id="crayon-53e07d914debb716297870" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" style="vertical-align:baseline;width:624.984375px;font-family:Monaco, MonacoRegular, 'Courier New', monospace;color:rgb(51,51,51);border:1px solid rgb(153,153,153) !important;overflow:hidden !important;line-height:15px !important;background:rgb(253,253,253) !important;"><div class="crayon-plain-wrap" style="border:0px;vertical-align:baseline;background:0px 50%;"><textarea class="crayon-plain print-no" readonly style="border:0px;overflow:hidden;vertical-align:top;width:622.984375px;opacity:0;color:rgb(0,0,0);z-index:0;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;line-height:15px !important;" cols="22" rows="3"></textarea></div>
<div class="crayon-main" style="border:0px;vertical-align:baseline;width:622.984375px;overflow:hidden;z-index:1;background:0px 50%;">
<table class="crayon-table" style="margin-left:0px;vertical-align:baseline;color:rgb(117,117,117);line-height:2;border:none !important;border-collapse:collapse !important;border-spacing:0px !important;background:none !important;"><tbody style="border:0px;font-size:12px;vertical-align:baseline;"><tr class="crayon-row" style="border:none !important;vertical-align:top !important;background:0px 50%;"><td class="crayon-nums" style="border:0px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;color:rgb(84,153,222) !important;background:rgb(223,239,255) !important;">
<div class="crayon-nums-content" style="border:0px;vertical-align:baseline;line-height:15px !important;background:0px 50%;">
<div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
1</div>
</div>
</td>
<td class="crayon-code" style="border:0px;width:605px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;background:0px 50%;">
<div class="crayon-pre" style="vertical-align:baseline;color:rgb(0,0,0);overflow:visible;border:none !important;line-height:15px !important;background:none !important;">
<div class="crayon-line" id="crayon-53e07d914debb716297870-1" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
<span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">$</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">KAFKA_HOME</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">/</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">bin</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">/</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">kafka</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">run</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-t" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(128,0,128) !important;">class</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">sh
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">kafka</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">tools</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">MirrorMaker</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">consumer</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">config
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">sourceClusterConsumer</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">config</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">num</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-i" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;">streams</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">producer</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">config
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">targetClusterProducer</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">.</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">config</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">whitelist</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-s" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,128,0) !important;">".*"</span></div>
</div>
</td>
</tr></tbody></table></div>
</div>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
<span style="border:0px;vertical-align:baseline;"> 4. 执行脚本</span></p>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
执行start.sh通过日志信息查看运行状况，到目标Kafka集群的log.dir中即可看到同步过来的数据。</p>
<h2 style="border:0px;vertical-align:baseline;clear:both;line-height:1.6;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
二、MirrorMaker的参数说明</h2>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
</p>
<div id="crayon-53e07d914dec2118245281" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" style="vertical-align:baseline;width:624.984375px;font-family:Monaco, MonacoRegular, 'Courier New', monospace;color:rgb(51,51,51);border:1px solid rgb(153,153,153) !important;overflow:hidden !important;line-height:15px !important;background:rgb(253,253,253) !important;">
<div class="crayon-plain-wrap" style="border:0px;vertical-align:baseline;background:0px 50%;">
<textarea class="crayon-plain print-no" readonly style="border:0px;overflow:hidden;vertical-align:top;width:622.984375px;opacity:0;color:rgb(0,0,0);z-index:0;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;line-height:15px !important;" cols="22" rows="3"></textarea></div><div class="crayon-main" style="border:0px;vertical-align:baseline;width:622.984375px;overflow:hidden;z-index:1;background:0px 50%;"><table class="crayon-table" style="margin-left:0px;vertical-align:baseline;color:rgb(117,117,117);line-height:2;border:none !important;border-collapse:collapse !important;border-spacing:0px !important;background:none !important;"><tbody style="border:0px;font-size:12px;vertical-align:baseline;"><tr class="crayon-row" style="border:none !important;vertical-align:top !important;background:0px 50%;"><td class="crayon-nums" style="border:0px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;color:rgb(84,153,222) !important;background:rgb(223,239,255) !important;"><div class="crayon-nums-content" style="border:0px;vertical-align:baseline;line-height:15px !important;background:0px 50%;"><div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">1</div></div></td><td class="crayon-code" style="border:0px;width:605px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;background:0px 50%;"><div class="crayon-pre" style="vertical-align:baseline;color:rgb(0,0,0);overflow:visible;border:none !important;line-height:15px !important;background:none !important;"><div class="crayon-line" id="crayon-53e07d914dec2118245281-1" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;"><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">$KAFKA_HOME</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">/</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">bin</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">/</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">kafka</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">run</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-t" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(128,0,128) !important;">class</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.sh</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">kafka</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.tools</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.MirrorMaker</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;"> </span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">help</span></div></div></td></tr></tbody></table></div></div><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">执行上面的命令就可以看到各个参数的说明：</p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><a href="http://tangzhaohui.net/wp-content/uploads/2014/04/MirrorMaker+params.png" rel="nofollow" style="border:0px;vertical-align:baseline;color:rgb(159,159,159);text-decoration:none;"><img class="alignleft size-full wp-image-530" alt="MirrorMaker 参数" src="http://tangzhaohui.net/wp-content/uploads/2014/04/MirrorMaker+params.png" width="885" height="287" style="border:0px;vertical-align:baseline;"></a></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;">1. 白名单(whitelist) 黑名单(blacklist)</span></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">mirror-maker接受精确指定同步topic的白名单和黑名单。使用java标准的正则表达式，为了方便，逗号(‘,’)被编译为java正则中的(‘|’)。</p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;">2. Producer timeout</span></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">为了支持高吞吐量，你最好使用异步的内置producer，并将内置producer设置为阻塞模式（queue.enqueueTimeout.ms=-1）。这样可以保证数据(messages)不会丢失。否则，异步producer默认的 enqueueTimeout是0，如果producer内部的队列满了，数据(messages)会被丢弃，并抛出QueueFullExceptions异常。而对于阻塞模式的producer，如果内部队列满了就会一直等待，从而有效的节制内置consumer的消费速度。你可以打开producer的的trace logging，随时查看内部队列剩余的量。如果producer的内部队列长时间处于满的状态，这说明对于mirror-maker来说，将消息重新推到目标Kafka集群或者将消息写入磁盘是瓶颈。</p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;color:rgb(0,128,0);">对于kafka的producer同步异步的详细配置请参考$KAFKA_HOME/config/producer.properties文件。关注其中的producer.type和queue.enqueueTimeout.ms这两个字段。</span></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;">3. Producer 重试次数（retries）</span></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">如果你在producer的配置中使用broker.list，你可以设置当发布数据失败时候的重试次数。retry参数只在使用broker.list的时候使用，因为在重试的时候会重新选择broker。</p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;">4. Producer 数量</span></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">通过设置—num.producers参数，可以使用一个producer池来提高mirror maker的吞吐量。在接受数据(messages)的broker上的producer是只使用单个线程来处理的。就算你有多个消费流，吞吐量也会在producer处理请求的时候被限制。</p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;">5. 消费流（consumption streams）数量</span></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">使用—num.streams可以指定consumer的线程数。请注意，如果你启动多个mirror maker进程，你可能需要看看其在源Kafka集群partitions的分布情况。如果在每个mirror maker进程上的消费流（consumption streams）数量太多，某些消费进程如果不拥有任何分区的消费权限会被置于空闲状态，主要原因在于consumer的负载均衡算法。</p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;">6. 浅迭代（Shallow iteration）与producer压缩</span></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">我们建议在mirror maker的consumer中开启浅迭代（shallow iteration)。意思就是mirror maker的consumer不对已经压缩的消息集（message-sets）进行解压，只是直接将获取到的消息集数据同步到producer中。</p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;color:rgb(255,0,0);">如果你开启浅迭代（shallow iteration)，那么你必须关闭mirror maker中producer的压缩功能，否则消息集（message-sets）会被重复压缩。</span></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><span style="border:0px;vertical-align:baseline;">7. Consumer 和 源Kafka集群（source cluster）的 socket buffer sizes</span></p><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">镜像经常用在跨集群场景中，你可能希望通过一些配置选项来优化内部集群的通信延迟和特定硬件性能瓶颈。一般来说，你应该对mirror-maker中consumer的socket.buffersize 和源集群broker的socket.send.buffer设定一个高的值。此外，mirror-maker中消费者（consumer）的fetch.size应该设定比socket.buffersize更高的值。注意，套接字缓冲区大小（socket buffer size）是操作系统网络层的参数。如果你启用trace级别的日志，你可以检查实际接收的缓冲区大小（buffer size），以确定是否调整操作系统的网络层。</p><h2 style="border:0px;vertical-align:baseline;clear:both;line-height:1.6;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">三、如何检验MirrorMaker运行状况</h2><p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">Consumer offset checker工具可以用来检查镜像对源集群的消费进度。例如：</p><div id="crayon-53e07d914decc946976339" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" style="vertical-align:baseline;width:624.984375px;font-family:Monaco, MonacoRegular, 'Courier New', monospace;color:rgb(51,51,51);border:1px solid rgb(153,153,153) !important;overflow:hidden !important;line-height:15px !important;background:rgb(253,253,253) !important;"><div class="crayon-plain-wrap" style="border:0px;vertical-align:baseline;background:0px 50%;"><textarea class="crayon-plain print-no" readonly style="border:0px;overflow:hidden;vertical-align:top;width:622.984375px;opacity:0;color:rgb(0,0,0);z-index:0;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;line-height:15px !important;" cols="22" rows="3"></textarea></div>
<div class="crayon-main" style="border:0px;vertical-align:baseline;width:622.984375px;overflow:hidden;z-index:1;background:0px 50%;">
<table class="crayon-table" style="margin-left:0px;vertical-align:baseline;color:rgb(117,117,117);line-height:2;border:none !important;border-collapse:collapse !important;border-spacing:0px !important;background:none !important;"><tbody style="border:0px;font-size:12px;vertical-align:baseline;"><tr class="crayon-row" style="border:none !important;vertical-align:top !important;background:0px 50%;"><td class="crayon-nums" style="border:0px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;color:rgb(84,153,222) !important;background:rgb(223,239,255) !important;">
<div class="crayon-nums-content" style="border:0px;vertical-align:baseline;line-height:15px !important;background:0px 50%;">
<div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
1</div>
<div class="crayon-num crayon-striped-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;color:rgb(49,124,197) !important;background:rgb(200,225,250) !important;">
2</div>
<div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
3</div>
<div class="crayon-num crayon-striped-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;color:rgb(49,124,197) !important;background:rgb(200,225,250) !important;">
4</div>
<div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
5</div>
<div class="crayon-num crayon-striped-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;color:rgb(49,124,197) !important;background:rgb(200,225,250) !important;">
6</div>
<div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
7</div>
<div class="crayon-num crayon-striped-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;color:rgb(49,124,197) !important;background:rgb(200,225,250) !important;">
8</div>
<div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
9</div>
<div class="crayon-num crayon-striped-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;color:rgb(49,124,197) !important;background:rgb(200,225,250) !important;">
10</div>
<div class="crayon-num" style="border:0px;vertical-align:baseline;font-family:inherit;text-align:center;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
11</div>
</div>
</td>
<td class="crayon-code" style="border:0px;width:598px;vertical-align:top !important;font-family:Monaco, MonacoRegular, 'Courier New', monospace !important;background:0px 50%;">
<div class="crayon-pre" style="vertical-align:baseline;color:rgb(0,0,0);overflow:visible;border:none !important;line-height:15px !important;background:none !important;">
<div class="crayon-line" id="crayon-53e07d914decc946976339-1" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
<span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">bin</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">/</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">kafka</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">run</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-t" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(128,0,128) !important;">class</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.sh</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">kafka</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.tools</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">.ConsumerOffsetChecker</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">group
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">KafkaMirror</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">zkconnect
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">localhost</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">:</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2181</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">--</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">topic
</span><span class="crayon-r" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(128,0,128) !important;">test</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">topic</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-53e07d914decc946976339-2" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:rgb(247,247,247) !important;">
<span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">KafkaMirror</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">topic1</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">0</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">0</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">(</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">Group</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">Topic</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">BrokerId</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">PartitionId</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">)</span></div>
<div class="crayon-line" id="crayon-53e07d914decc946976339-3" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
<span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">            </span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">Owner</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">KafkaMirror_jkoshy</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">ld</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">1320972386342</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">beb4bfc9</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">0</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-53e07d914decc946976339-4" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:rgb(247,247,247) !important;">
<span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">  </span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">Consumer
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">offset</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">561154288</span></div>
<div class="crayon-line" id="crayon-53e07d914decc946976339-5" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
<span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">                  </span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">561</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">154</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">288</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">(</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">0.52G</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-53e07d914decc946976339-6" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:rgb(247,247,247) !important;">
<span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">        
</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">Log
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">size</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2231392259</span></div>
<div class="crayon-line" id="crayon-53e07d914decc946976339-7" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
<span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">                  </span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">231</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">392</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">259</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">(</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">2.08G</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-53e07d914decc946976339-8" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:rgb(247,247,247) !important;">
<span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">    
</span><span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">Consumer
</span><span class="crayon-v" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,45,122) !important;">lag</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">1670237971</span></div>
<div class="crayon-line" id="crayon-53e07d914decc946976339-9" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
<span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">                  </span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">=</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">1</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">670</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">237</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">,</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">971</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">(</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">1.56G</span><span class="crayon-sy" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(51,51,51) !important;">)</span></div>
<div class="crayon-line crayon-striped-line" id="crayon-53e07d914decc946976339-10" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:rgb(247,247,247) !important;">
<span class="crayon-e" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,78,208) !important;">BROKER
</span><span class="crayon-i" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;">INFO</span></div>
<div class="crayon-line" id="crayon-53e07d914decc946976339-11" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;background:0px 50%;">
<span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">0</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">-&gt;</span><span class="crayon-h" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">
</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">127.0.0.1</span><span class="crayon-o" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(0,111,224) !important;">:</span><span class="crayon-cn" style="border:0px;vertical-align:baseline;font-family:inherit;font-size: !important;line-height: !important;font-weight: !important;color:rgb(206,0,0) !important;">9092</span></div>
</div>
</td>
</tr></tbody></table></div>
</div>
<p style="border:0px;font-size:14px;vertical-align:baseline;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
注意，–zkconnect参数需要指定到源集群的Zookeeper。另外，如果指定topic没有指定，则打印当前消费者group下所有topic的信息。</p>
<h2 style="border:0px;vertical-align:baseline;clear:both;line-height:1.6;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;">
参考文献</h2>
<ol style="border:0px;font-size:14px;vertical-align:baseline;list-style-position:outside;line-height:24px;color:rgb(51,51,51);font-family:Helvetica, Arial, sans-serif;"><li style="border:0px;vertical-align:baseline;">
http://kafka.apache.org/documentation.html#configuration</li><li style="border:0px;vertical-align:baseline;">
https://cwiki.apache.org/confluence/display/KAFKA/Kafka+mirroring+(MirrorMaker)</li></ol>            </div>
                </div>