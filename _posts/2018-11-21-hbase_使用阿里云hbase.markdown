---
layout:     post
title:      hbase_使用阿里云hbase
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p>官网上的帮助：</p><p>问：<span style="font-family:'宋体';">我配置了</span>ZK<span style="font-family:'宋体';">地址以后，还是无法连接上</span><span style="font-family:Calibri;">HBase</span></p><p>a) <span style="font-family:'宋体';">首先。目前</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">还没有提供公网的访问地址。所以使用公网是无法访问到</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">的。您需要在和</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">相同的地域的</span><span style="font-family:Calibri;">ECS</span><span style="font-family:'宋体';">机器上才能正确访问到</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">。</span></p><p>b) <span style="font-family:'宋体';">请确认您的</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">的网络设置和您访问的</span><span style="font-family:Calibri;">ECS</span><span style="font-family:'宋体';">是相同的。如果</span><span style="font-family:Calibri;">ECS</span><span style="font-family:'宋体';">是经典网络，那么</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">需要设置为经典网络，如果</span><span style="font-family:Calibri;">ECS</span><span style="font-family:'宋体';">是</span><span style="font-family:Calibri;">VPC</span><span style="font-family:'宋体';">的，那么</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">就需要设置为</span><span style="font-family:Calibri;">VPC</span><span style="font-family:'宋体';">。</span></p><p>c) <span style="font-family:'宋体';">请确认您的</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">的白名单是否开启，对需要访问</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">的所有节点，均需要开启白名单后，才能正确的访问。具体操作请参考白名单设置</span></p><p><span style="font-family:'宋体';">使用方法如下：（注：由于在阿里hbase公测时就申请了实例，因此下面的例子为公测时的地址，现已被回收）</span></p><p><span style="font-family:'宋体';"></span></p><p align="justify">1. 设置用户名密码</p><p>第一次进来需要设置软件访问密码：</p><p> <img src="https://img-blog.csdn.net/20180510171047696" alt=""></p><p align="justify">2. 设置白名单</p><p><span style="font-family:'宋体';">下一步是设置白名单，将当前机器的公网</span>ip<span style="font-family:'宋体';">及</span><span style="font-family:Calibri;">ESC</span><span style="font-family:'宋体';">服务器的公网和内网地址写入，到时在上面发布程序才有权限访问：</span></p><p> <img src="https://img-blog.csdn.net/2018051017114752" alt=""></p><p><span style="color:rgb(51,51,51);background:rgb(255,255,255);"><span style="font-family:'微软雅黑';">可以在这里</span></span><a href="http://ip.taobao.com/" rel="nofollow"><span style="color:rgb(0,193,224);background:rgb(255,255,255);">http://ip.taobao.com/</span></a><span style="color:rgb(51,51,51);background:rgb(255,255,255);"><span style="font-family:'微软雅黑';">查看自己的公网</span>IP.</span></p><p>修改后：</p><p align="justify">3. 进入开源软件的链接</p><p><span style="font-family:'宋体';"><img src="https://img-blog.csdn.net/20180510171428607" style="margin-bottom:0px;font-family:'宋体';" alt=""></span></p><p><span style="font-family:'宋体';">现在就可以直接进入各</span>web<span style="font-family:'宋体';">页面，用户名密码为上面刚设置的值。</span></p><p><span style="font-family:'宋体';">如</span>hbase<span style="font-family:'宋体';">页面：</span></p><p> <img src="https://img-blog.csdn.net/20180510171506264" alt=""></p><p><span style="font-family:'宋体';">其中</span>conf<span style="font-family:'宋体';">按钮可以看到当前</span><span style="font-family:Calibri;">hbase</span><span style="font-family:'宋体';">的一些配置，如</span><span style="font-family:Calibri;">master</span><span style="font-family:'宋体';">的端口号：</span></p><p> <img src="https://img-blog.csdn.net/20180510171531151" alt=""></p><p> <img src="https://img-blog.csdn.net/20180510171538385" alt=""></p><p>或者点击上面的<img src="https://img-blog.csdn.net/20180510171557408" alt=""></p><p><span style="font-family:'宋体';">第一行中就显示</span>hbase<span style="font-family:'宋体';">的地址和端口：</span></p><p><span style="color:rgb(0,0,0);">Master status for </span><span style="color:rgb(0,0,255);">hb-2ze01x2m98hi9bu6w-003.hbase.rds.aliyuncs.com</span><span style="color:rgb(0,0,0);">,</span><span style="color:rgb(0,0,255);">16000</span><span style="color:rgb(0,0,0);">,1490839106699 as of Sun Apr 02 16:01:33 CST 2017</span></p><p align="justify">4. <span style="font-family:'宋体';">通过</span>shell<span style="font-family:'宋体';">访问</span><span style="font-family:Calibri;">hbase</span></p><p><a href="https://help.aliyun.com/document_detail/52056.html?spm=5176.product49055.6.551.BfpOoJ" rel="nofollow"><u><span style="color:rgb(0,0,255);">https://help.aliyun.com/document_detail/52056.html?spm=5176.product49055.6.551.BfpOoJ</span></u></a></p><p>1) <span style="font-family:'宋体';">准备访问用</span>ECS</p><p>    <span style="font-family:'宋体';">因为</span>HBase<span style="font-family:'宋体';">只提供了内网的访问，所以如果要访问</span><span style="font-family:Calibri;">HBase</span><span style="font-family:'宋体';">，需要在相同的</span><span style="font-family:Calibri;">Region</span><span style="font-family:'宋体';">内准备一台</span><span style="font-family:Calibri;">ECS</span><span style="font-family:'宋体';">。如果已经有</span><span style="font-family:Calibri;">ECS</span><span style="font-family:'宋体';">了那么请继续下一步。如果还没有，您可以在</span><span style="font-family:Calibri;">ECS</span><span style="font-family:'宋体';">的购买页面上购买一台按量的</span><span style="font-family:Calibri;">ECS</span><span style="font-family:'宋体';">进行测试。</span></p><p>2) 下载HBase Shell</p><p><span style="font-family:'宋体';">从</span> Apache HBase <span style="font-family:'宋体';">的官网下载 </span><span style="font-family:Calibri;">HBase-1.1.x </span><span style="font-family:'宋体';">版本的资源包。这里我们以</span><span style="font-family:Calibri;">1.1.8</span><span style="font-family:'宋体';">举例，我们选择中国的服务器地址进行下载。</span></p><p>（下载地址）<a href="http://www.apache.org/dyn/closer.cgi/hbase/?spm=5176.doc52056.2.3.FYK9Ea" rel="nofollow"><u><span style="color:rgb(128,0,128);">http://www.apache.org/dyn/closer.cgi/hbase/?spm=5176.doc52056.2.3.FYK9Ea</span></u></a></p><p><span style="font-family:'宋体';">请注意</span>HBase<span style="font-family:'宋体';">社区随时在进行更新，如果包下载不到，请前往上面的下载地址，选择最新的版本下载</span></p><p><span style="color:rgb(0,0,0);background:rgb(246,246,246);">wget http</span><span style="color:rgb(102,102,0);background:rgb(246,246,246);">:</span><span style="color:rgb(136,0,0);background:rgb(246,246,246);">//mirror.bit.edu.cn/apache/hbase/1.1.8/hbase-1.1.8-bin.tar.gz .</span></p><p>进入上面的网址：</p><p> <img src="https://img-blog.csdn.net/20180510171824171" alt=""></p><p> <img src="https://img-blog.csdn.net/2018051017184253" alt=""></p><p><img src="https://img-blog.csdn.net/2018051017183221" alt=""></p><p>3) 下载完成以后，解压缩</p><p><span style="font-family:'宋体';">把下载的文件放到</span>ESC<span style="font-family:'宋体';">机器</span><span style="font-family:Calibri;">/opt/hbase</span><span style="font-family:'宋体';">目录中，解压：</span></p><p>tar -zxf hbase-1.1.9-bin.tar.gz</p><p> </p><p>4) <span style="font-family:'宋体';">配置</span> ZK <span style="font-family:'宋体';">地址</span></p><p> <span style="font-family:'宋体';">解压后，修改</span> conf/hbase-site.xml <span style="font-family:'宋体';">文件，添加集群的 </span><span style="font-family:Calibri;">ZK </span><span style="font-family:'宋体';">地址，如下所示：</span></p><p>&lt;configuration&gt;</p><p>     &lt;property&gt;</p><p>         &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;</p><p>         &lt;value&gt;hb-2ze01x2m98hi9bu6w-002.hbase.rds.aliyuncs.com, hb-2ze01x2m98hi9bu6w-003.hbase.rds.aliyuncs.com, hb-2ze01x2m98hi9bu6w-004.hbase.rds.aliyuncs.com</p><p>&lt;/value&gt;</p><p>     &lt;/property&gt;</p><p>&lt;/configuration&gt;</p><p> </p><p>5) 访问集群</p><p>通过如下命令就可以访问集群了。</p><p>bin/hbase shell</p><p> </p><p align="justify">5. 通过代码访问</p><p><span style="font-family:'宋体';">和之前本地的</span>hbase<span style="font-family:'宋体';">访问一样，配置文件如下：</span></p><p><span style="color:rgb(0,0,0);">hbase.zookeeper.property.clientPort=</span><span style="color:rgb(42,0,255);">2181</span></p><p><span style="color:rgb(0,0,0);">hbase.zookeeper.quorum=</span><u><span style="color:rgb(42,0,255);">hb</span></u><span style="color:rgb(42,0,255);">-2ze01x2m98hi9bu6w-002.hbase.rds.aliyuncs.com</span></p><p><span style="color:rgb(0,0,0);">hbase.master=</span><u><span style="color:rgb(42,0,255);">hb</span></u><span style="color:rgb(42,0,255);">-2ze01x2m98hi9bu6w-003.hbase.rds.aliyuncs.com:16000</span></p><p><span style="color:rgb(0,0,0);">fs.defaultFS=</span><u><span style="color:rgb(42,0,255);">hdfs</span></u><span style="color:rgb(42,0,255);">://</span><u><span style="color:rgb(42,0,255);">emr</span></u><span style="color:rgb(42,0,255);">-cluster</span></p><p><span style="color:rgb(0,0,0);">delete-connection=</span><span style="color:rgb(42,0,255);">true</span></p><p>配置中需要的值在上面都可以找到。</p><p><span style="font-family:'宋体';">但是需要注意的是，在本地启动服务是访问不了的，因为只有和线上</span>hbase<span style="font-family:'宋体';">在同一地区的</span><span style="font-family:Calibri;">esc</span><span style="font-family:'宋体';">服务器能访问，因此需要把</span><span style="font-family:Calibri;">war</span><span style="font-family:'宋体';">包放到对应的</span><span style="font-family:Calibri;">esc</span><span style="font-family:'宋体';">服务器上才能访问成功，经测试，创建和读取表都已成功。</span></p><p><span style="font-family:'宋体';"><br></span></p>            </div>
                </div>