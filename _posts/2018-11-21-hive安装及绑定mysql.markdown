---
layout:     post
title:      hive安装及绑定mysql
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <h3>准备</h3><p>版本：<span style="color:#ff6666;">hive2.3.2</span></p><p>解压hive</p><p>    命令：<span style="background-color:rgb(255,102,102);">tar -zxvf hive2.3.2</span></p><p>解压好后，hive下conf需要一个hive-site.xml文件，hive目录中没有，需要复制<span style="color:#ff6666;">hive-default.xml.template  </span><span style="color:#000000;">为hive-site.xml</span></p><p><span style="color:rgb(0,0,0);">    命令：</span><span style="color:rgb(255,102,102);">cp hive-default.xml.template  hive-site.sh</span></p><h3>设置hive环境变量</h3><p>进入hive，通过pwd赋值,配置HIVE_HOME和PATH。</p><p>    命令：<span style="color:#ff6666;">cd hive2.3.2</span></p><p>    命令：<span style="color:#ff6666;">hive=`pwd`</span></p><p><span style="color:#ff6666;">   </span><span style="color:#000000;"> 命令</span><span style="color:#ff6666;">：echo export  HIVE_HOME=$hive &gt;&gt; ~/.bashrc<br></span></p><p><span style="color:#ff6666;">    </span><span style="color:#000000;">命令</span><span style="color:#ff6666;">：echo export PATH=\$PATH:$HIVE_HOME/bin<br></span></p><p><span style="color:#333333;">刷新环境变量</span></p><p><span style="color:#ff6666;">    </span><span style="color:#000000;">命令：</span><span style="color:#ff6666;">source ~/.bahsrc</span><br></p><p><br></p><h3>设置site.xml</h3><p>需要在hive-site.xml中<span style="background-color:rgb(255,255,255);">设置元数据库的数据地址、驱动、连接MySQL数据库的用户名密码、数据库存放位置等</span></p><p><span style="background-color:rgb(255,255,255);">进入site.xml文件</span></p><div>    命令：<span style="color:#ff6666;">vi hive-site.xml</span></div><div><br></div><div>设置元数据地址</div><p>    可通过 <span style="color:#ff6666;">   /    +想要查找的字符串  </span>  快速查找</p><p>            命令： /<span style="background-color:rgb(255,255,255);">javax.jdo.option.ConnectionURL</span></p><p>更改 value 值：</p><p align="left"><span style="background-color:rgb(255,102,102);">jdbc:mysql://python2:3306/hive?autoReconnect=true&amp;amp;useUnicode=true&amp;amp;createDatabaseIfNotExist=true&amp;amp;characterEncoding=utf8&amp;amp;useSSL=false&amp;amp;serverTimezone=UTC</span></p><div><br></div><p><img src="https://img-blog.csdn.net/20180416160631470?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p><span style="background-color:rgb(255,255,255);">注意：</span></p><p><span style="background-color:rgb(255,255,255);">    python代表的是主机名</span></p><p><span style="background-color:rgb(255,255,255);">    所查找的内容统统是在&lt;name&gt;中，修改的内容在&lt;value&gt;中。</span></p><p><span style="background-color:rgb(255,255,255);"><br></span></p><p><span style="background-color:rgb(255,255,255);">有时查到的内容有许多条，而当前条又不是我们需要的，可通过 n  和    p上下操作。</span></p><p><span style="background-color:rgb(255,255,255);">    命令：<span style="color:#ff6666;">n    </span></span><span style="background-color:rgb(255,255,255);">     在命令模式下如果同时编辑多个文件，则继续编辑下一个文件。</span></p><p><span style="background-color:rgb(255,255,255);"> </span></p><p><span style="background-color:rgb(255,255,255);">设置驱动</span></p><p><span style="background-color:rgb(255,255,255);">    命令：<span style="color:#ff6666;">/<span style="background-color:rgb(255,255,255);">javax.jdo.option.ConnectionDriverName</span></span></span></p><p><span style="background-color:rgb(255,255,255);"><span style="background-color:rgb(255,255,255);">    更改value值：<span style="background-color:rgb(255,255,255);"><span style="color:#ff6666;">com.mysql.jdbc.Driver</span></span></span></span></p><p><span style="background-color:rgb(255,255,255);"><span style="background-color:rgb(255,255,255);"><span style="background-color:rgb(255,255,255);"><img src="https://img-blog.csdn.net/20180416160058492?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></span></p><p><span style="background-color:rgb(255,255,255);">更改mysql的用户名：</span></p><p><span style="background-color:rgb(255,255,255);">    命令：<span style="color:#ff6666;">/<span style="background-color:rgb(255,255,255);">javax.jdo.option.ConnectionUserName</span></span></span></p><p><span style="background-color:rgb(255,255,255);"><span style="background-color:rgb(255,255,255);">    更改value值：你的mysql用户名</span></span></p><p><span style="background-color:rgb(255,255,255);"><span style="background-color:rgb(255,255,255);"></span></span></p><p><span style="background-color:rgb(255,255,255);">     这里APP代表的是你的连接的mysql数据库的用户名</span></p><p><span style="background-color:rgb(255,255,255);"><img src="https://img-blog.csdn.net/20180416161535855?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="background-color:rgb(255,255,255);">   </span><span style="background-color:rgb(255,255,255);">更改mysql的密码：</span></p><p><span style="background-color:rgb(255,255,255);">    命令：<span style="color:#ff6666;">/<span style="background-color:rgb(255,255,255);">javax.jdo.option.ConnectionPassword</span></span></span></p><p><span style="background-color:rgb(255,255,255);">    更改value值：你的mysql密码</span></p><p><span style="background-color:rgb(255,255,255);"><img src="https://img-blog.csdn.net/20180416162219686?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></p><p><span style="background-color:rgb(255,255,255);">设置默认创建路径</span></p><p><span style="background-color:rgb(255,255,255);">    命令：<span style="color:#ff6666;">/<span style="background-color:rgb(255,255,255);">hive.metastore.warehouse.dir</span></span><br></span></p><p><span style="background-color:rgb(255,255,255);"><span style="background-color:rgb(255,255,255);">    可不更改。</span></span></p><h3><span style="background-color:rgb(255,255,255);"><span style="background-color:rgb(255,255,255);">连接mysql数据库</span></span></h3><p>    准备：下载wget命令，下载缺失jar。</p><p>        命令：<span style="color:#ff6666;">yum install wget -y </span>    （root权限下使用该命令）<br></p><p>    hive的lib文件夹缺失jar，进入lib,下载缺失jar</p><p>        命令：<span style="color:#ff6666;">wget http://central.maven.org/maven2/mysql/mysql-connector-java/5.1.38/mysql-connector-java-5.1.38.jar</span></p><p style="background-color:rgb(255,255,255);">启动hive前，需要启动hadoop集群中的dfs和yarn（hadoop用户下启动，非root）</p><p style="background-color:rgb(255,255,255);">    命令：<span style="color:#ff6666;">start-dfs.sh</span></p><p style="background-color:rgb(255,255,255);">    命令：<span style="color:#ff6666;">start-yarn.sh</span><br></p><div><span style="background-color:rgb(255,255,255);">如h果没启动会拒绝连接，如下图</span></div><img src="https://img-blog.csdn.net/20180417214437277?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><p>格式化mysql</p><p>        命令：<span style="background-color:rgb(255,255,255);"><span style="color:#ff6666;">schematool -dbType mysql -initSchema</span></span></p><p><span style="background-color:rgb(255,255,255);"><span style="color:#ff6666;"><img src="https://img-blog.csdn.net/20180417232553371?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></span></span></p><div><span style="background-color:rgb(255,255,255);">        报错：未授权远程连接<br></span></div><div><span style="background-color:rgb(255,255,255);">        解决问题：mysql下开启远程连接（上一篇有如何开启远程连接命令）<br></span></div><div><span style="background-color:rgb(255,255,255);">命令：</span><span style="color:rgb(255,102,102);">hive</span></div><div>出现错误：缺少一个绝对路径</div><div><br></div><img src="https://img-blog.csdn.net/20180417214108577?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><p>解决方法：在hadoop用户下创建一个hivetemp目录并且通过pwd得到它的绝对路径</p><p> 在hive-site.xml中添加绝对路径，共4处</p><p><img src="https://img-blog.csdn.net/20180417220307131?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p>修改如下：</p><p><img src="https://img-blog.csdn.net/20180417220421385?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><img src="https://img-blog.csdn.net/20180417220624418?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p><img src="https://img-blog.csdn.net/2018041722080386?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><p>修改完后，就可以启动hive。</p><p><img src="https://img-blog.csdn.net/20180417222238503?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2EyNjM5NDkxNDAz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""><br></p><h3>beeline启动hive</h3><p>    命令：<span style="color:#ff6666;">hiveserver2</span></p><p>复制渠道，在hive的bin目录下启动启动beeline</p><p>    命令： <span style="background-color:rgb(255,204,204);">./beeline -u jdbc:hive2://</span></p><h2>注意：所有权限，除下载外统统在hadoop用户下进行</h2><p><br></p><p><br></p>            </div>
                </div>