---
layout:     post
title:      kafka与flume的整合
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/weixin_41615494/article/details/79521990				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p><span style="background-color:rgb(255,255,255);">实现flume监控某个目录下面的所有文件，然后将文件收集发送到kafka消息系统中</span></p><p><span style="background-color:rgb(255,255,255);">第一步：flume下载地址</span></p><p><span style="background-color:rgb(255,255,255);">http://archive.apache.org/dist/flume/1.8.0/apache-flume-1.8.0-bin.tar.gz</span></p><p><span style="background-color:rgb(255,255,255);">第二步：上传解压flume</span></p><p><span style="background-color:rgb(255,255,255);">第三步：配置flume.conf</span></p><div><p><span style="background-color:rgb(255,255,255);">#为我们的source channel  sink起名</span></p><p><span style="background-color:rgb(255,255,255);">a1.sources = r1</span></p><p><span style="background-color:rgb(255,255,255);">a1.channels = c1</span></p><p><span style="background-color:rgb(255,255,255);">a1.sinks = k1</span></p><p><span style="background-color:rgb(255,255,255);">#指定我们的source收集到的数据发送到哪个管道</span></p><p><span style="background-color:rgb(255,255,255);">a1.sources.r1.channels = c1</span></p><p><span style="background-color:rgb(255,255,255);">#指定我们的source数据收集策略</span></p><p><span style="background-color:rgb(255,255,255);">a1.sources.r1.type = spooldir</span></p><p><span style="background-color:rgb(255,255,255);">a1.sources.r1.spoolDir = /export/servers/flumedata</span></p><p><span style="background-color:rgb(255,255,255);">a1.sources.r1.deletePolicy = never</span></p><p><span style="background-color:rgb(255,255,255);">a1.sources.r1.fileSuffix = .COMPLETED</span></p><p><span style="background-color:rgb(255,255,255);color:#FF0000;">a1.sources.r1.ignorePattern =^(.)*\\.tmp$</span></p><p><span style="background-color:rgb(255,255,255);color:#FF0000;">a1.sources.r1.inputCharset = GBK</span></p><p><span style="background-color:rgb(255,255,255);">#指定我们的channel为memory,即表示所有的数据都装进memory当中</span></p><p><span style="background-color:rgb(255,255,255);">a1.channels.c1.type = memory</span></p><p><span style="background-color:rgb(255,255,255);">#指定我们的sink为kafka  sink，并指定我们的sink从哪个channel当中读取数据</span></p><p><span style="background-color:rgb(255,255,255);">a1.sinks.k1.channel = c1</span></p><p><span style="background-color:rgb(255,255,255);">a1.sinks.k1.type =org.apache.flume.sink.kafka.KafkaSink</span></p><p><span style="background-color:rgb(255,255,255);">a1.sinks.k1.kafka.topic = test</span></p><p><span style="background-color:rgb(255,255,255);">a1.sinks.k1.kafka.bootstrap.servers =node-1:9092,node-2:9092,node-3:9092</span></p><p><span style="background-color:rgb(255,255,255);">a1.sinks.k1.kafka.flumeBatchSize = 20</span></p><p><span style="background-color:rgb(255,255,255);">a1.sinks.k1.kafka.producer.acks = 1</span></p><p><span style="background-color:rgb(255,255,255);"><br></span></p><p></p><p><span style="background-color:rgb(255,255,255);">启动flume</span></p><div><p><span style="background-color:rgb(255,255,255);">bin/flume-ngagent --conf conf --conf-file conf/flume.conf --name a1-Dflume.root.logger=INFO,console</span></p></div><br></div>            </div>
                </div>