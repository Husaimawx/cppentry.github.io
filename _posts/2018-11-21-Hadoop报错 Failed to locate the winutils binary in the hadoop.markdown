---
layout:     post
title:      Hadoop报错 Failed to locate the winutils binary in the hadoop
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <div id="content_views" class="markdown_views prism-atom-one-dark">
							<!-- flowchart 箭头图标 勿删 -->
							<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
							<p><strong>分享一下我老师大神的人工智能教程！零基础，通俗易懂！<a href="https://blog.csdn.net/jiangjunshow/article/details/77338485" rel="nofollow">http://blog.csdn.net/jiangjunshow</a></strong></p><p></p><p><strong>也欢迎大家转载本篇文章。分享知识，造福人民，实现我们中华民族伟大复兴！</strong></p><p></p><div class="htmledit_views">                <strong><span>1 发现问题</span></strong><br><p><span>在虚拟机中搭建了hadoop集群，在windows中通过代码访问报错</span></p><p></p><pre><code class="language-java hljs"><span class="hljs-number">15</span>/<span class="hljs-number">06</span>/<span class="hljs-number">11</span> <span class="hljs-number">15</span>:<span class="hljs-number">35</span>:<span class="hljs-number">50</span> ERROR Shell: Failed to locate the winutils binary in the hadoop binary pathjava.io.IOException: Could not locate executable <span class="hljs-keyword">null</span>\bin\winutils.exe in the Hadoop binaries.    at org.apache.hadoop.util.Shell.getQualifiedBinPath(Shell.java:<span class="hljs-number">356</span>)    at org.apache.hadoop.util.Shell.getWinUtilsPath(Shell.java:<span class="hljs-number">371</span>)    at org.apache.hadoop.util.Shell.&lt;clinit&gt;(Shell.java:<span class="hljs-number">364</span>)</code></pre><br><strong><span>2 分析问题</span></strong><br><span>打开源码，查看getQualifiedBinPath方法</span><br><p></p><p></p><pre><code class="language-java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String <span class="hljs-title">getQualifiedBinPath</span><span class="hljs-params">(String executable)</span>   <span class="hljs-keyword">throws</span> IOException </span>{    <span class="hljs-comment">// construct hadoop bin path to the specified executable</span>    String fullExeName = HADOOP_HOME_DIR + File.separator + <span class="hljs-string">"bin"</span>      + File.separator + executable;     File exeFile = <span class="hljs-keyword">new</span> File(fullExeName);    <span class="hljs-keyword">if</span> (!exeFile.exists()) {      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IOException(<span class="hljs-string">"Could not locate executable "</span> + fullExeName        + <span class="hljs-string">" in the Hadoop binaries."</span>);    }     <span class="hljs-keyword">return</span> exeFile.getCanonicalPath();  } <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String HADOOP_HOME_DIR = checkHadoopHome();<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">checkHadoopHome</span><span class="hljs-params">()</span> </span>{     <span class="hljs-comment">// first check the Dflag hadoop.home.dir with JVM scope</span>    String home = System.getProperty(<span class="hljs-string">"hadoop.home.dir"</span>);     <span class="hljs-comment">// fall back to the system/user-global env variable</span>    <span class="hljs-keyword">if</span> (home == <span class="hljs-keyword">null</span>) {      home = System.getenv(<span class="hljs-string">"HADOOP_HOME"</span>);    }     ...}</code></pre><span>exeFile不存在会报错，也就是fullExeName不存在。即windows中没有配置HADOOP_HOME。</span><br><br><strong><span>3 解决问题</span></strong><br><span>配置环境变量E:\\Program Files\\hadoop-2.7.0重启电脑。</span><span>或者代码中设置System.setProperty("hadoop.home.dir", "E:\\Program Files\\hadoop-2.7.0");</span><span>还有一种可能HADOOP_HOME的bin目录下根本没有winutils.exe，下载地址https://github.com/srccodes/hadoop-common-2.2.0-bin</span><br><br><p></p><p><span>原贴地址：http://www.cnblogs.com/hyl8218/p/5492450.html</span></p>            </div><p></p><strong></strong><h4>给我老师的人工智能教程打call！<a href="https://blog.csdn.net/jiangjunshow/article/details/77338485" rel="nofollow">http://blog.csdn.net/jiangjunshow</a></h4><div align="center"><img title="" alt="这里写图片描述" src="https://img-blog.csdn.net/20161220210733446?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3VuaHVhcWlhbmcx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"></div>

            </div>
						<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-9e5741c4b9.css" rel="stylesheet">
                </div>