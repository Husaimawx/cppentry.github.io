---
layout:     post
title:      hadoop2.6.0安装
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;">1安装位置</span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"> /usr/local/hadoop/</span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">输入如下命令来检查
 Hadoop 是否可用</span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">cd
 /usr/local/hadoop<br>
./bin/hadoop version<br></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">Hadoop
 默认模式为非分布式模式(单机模式)直接可运行</span><br></span></span></span></p>
<p><span style="font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;color:#333333;"><span style="background-color:rgb(254,254,254);">运行例子</span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">.</span></span></span><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;">/bin/hadoop
 jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-2.6.0.jar</span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;text-align:justify;background-color:rgb(254,254,254);">伪分布式模式</span><br></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">Hadoop
 的配置文件位于 /usr/local/hadoop/etc/hadoop/ 中，伪分布式需要修改2个配置文件 </span><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">core-site.xml</span><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"> 和 </span><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">hdfs-site.xml</span><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"> </span><br></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">修改配置文件 </span><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">core-site.xml</span><br></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">&lt;configuration&gt;<br>
        &lt;property&gt;<br>
             &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;<br>
             &lt;value&gt;file:/usr/local/hadoop/tmp&lt;/value&gt;<br>
             &lt;description&gt;Abase for other temporary directories.&lt;/description&gt;<br>
        &lt;/property&gt;<br>
        &lt;property&gt;<br>
             &lt;name&gt;fs.defaultFS&lt;/name&gt;<br>
             &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;<br>
        &lt;/property&gt;<br>
&lt;/configuration&gt;<br></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">同样的，修改配置文件
 hdfs-site.xml：<br></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">&lt;configuration&gt;<br>
        &lt;property&gt;<br>
             &lt;name&gt;dfs.replication&lt;/name&gt;<br>
             &lt;value&gt;1&lt;/value&gt;<br>
        &lt;/property&gt;<br>
        &lt;property&gt;<br>
             &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;<br>
             &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/name&lt;/value&gt;<br>
        &lt;/property&gt;<br>
        &lt;property&gt;<br>
             &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;<br>
             &lt;value&gt;file:/usr/local/hadoop/tmp/dfs/data&lt;/value&gt;<br>
        &lt;/property&gt;<br>
&lt;/configuration&gt;<br></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">格式化文件系统</span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">./bin/hdfs
 namenode -format<br></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span>启动</span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span>./sbin/start-dfs.sh</span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">启动完成后，可以通过命令 </span><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(51,51,51);background-color:rgb(254,233,204);vertical-align:middle;">jps</code><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"> 来判断是否成功启动，若成功启动则会列出如下进程:
 “NameNode”、”DataNode” 和 “SecondaryNameNode”（如果 SecondaryNameNode 没有启动，请运行 sbin/stop-dfs.sh 关闭进程，然后再次尝试启动尝试）。如果没有 NameNode 或 DataNode ，那就是配置不成功，请仔细检查之前步骤，或通过查看启动日志排查原因。</span><br></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">成功启动后，可以访问
 Web 界面 </span><a href="http://localhost:50070/" rel="nofollow" style="background:rgb(254,254,254) 0px 0px;color:rgb(32,128,223);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;">http://localhost:50070</a><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"> 查看
 NameNode 和 Datanode 信息，</span><br></span></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">单机模式，读取的是本地数据，伪分布式读取的则是
 HDFS 上的数据。要使用 HDFS，首先需要在 HDFS 中创建用户目录：</span><br></span></span></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">./bin/hdfs
 dfs -mkdir -p /user/hadoop/input<br></span></span></span></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">拷贝本地文件到分布式文件系统</span></span></span></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">./bin/hdfs
 dfs -put ./etc/hadoop/*.xml /user/hadoop/input<br></span></span></span></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">查看分布式文件系统列表</span></span></span></span></span></span></span></span></p>
<p><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">.</span></span></span></span></span></span></span></span><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;">/bin/hdfs
 dfs -ls /user/hadoop/input</span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;">执行例子</span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;">./bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-*.jar grep input output 'dfs[a-z.]+'<br></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">查看运行结果的命令（查看的是位于
 HDFS 中的输出结果）：</span><br></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">./bin/hdfs
 dfs -cat output/*<br></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">我们也可以将运行结果取回到本地：</span><br></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">rm
 -r ./output    # 先删除本地的 output 文件夹（如果存在）<br>
./bin/hdfs dfs -get output ./output     # 将 HDFS 上的 output 文件夹拷贝到本机<br>
cat ./output/*<br></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">Hadoop
 运行程序时，输出目录不能存在，否则会提示错误 “org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory hdfs://localhost:9000/user/hadoop/output already exists” ，因此若要再次执行，需要执行如下命令删除 output 文件夹:</span><br></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">./bin/hdfs
 dfs -rm -r output    # 删除 output 文件夹<br></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(252,252,252);">运行
 Hadoop 程序时，为了防止覆盖结果，程序指定的输出目录（如 output）不能存在，否则会提示错误，因此运行前需要先删除输出目录。在实际开发应用程序时，可考虑在程序中加上如下代码，能在每次运行时自动删除输出目录，避免繁琐的命令行操作：</span><br></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(252,252,252);">Configuration
 conf = new Configuration();<br>
Job job = new Job(conf);<br>
 <br>
/* 删除输出目录 */<br>
Path outputPath = new Path(args[1]);<br>
outputPath.getFileSystem(conf).delete(outputPath, true);<br></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">若要关闭
 Hadoop，则运行</span><br></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">./sbin/stop-dfs.sh<br></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">下次启动
 hadoop 时，无需进行 NameNode 的初始化，只需要运行 ./sbin/start-dfs.sh 就可以！<br></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">（伪分布式不启动
 YARN 也可以，一般不会影响程序执行）</span><br></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"></span></span></span></p>
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">
有的读者可能会疑惑，怎么启动 Hadoop 后，见不到书上所说的 JobTracker 和 TaskTracker，这是因为新版的 Hadoop 使用了新的 MapReduce 框架（MapReduce V2，也称为 YARN，Yet Another Resource Negotiator）。</p>
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">
YARN 是从 MapReduce 中分离出来的，负责资源管理与任务调度。YARN 运行于 MapReduce 之上，提供了高可用性、高扩展性，YARN 的更多介绍在此不展开，有兴趣的可查阅相关资料。</p>
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">
上述通过 <code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(51,51,51);background-color:rgb(254,233,204);vertical-align:middle;">./sbin/start-dfs.sh</code> 启动 Hadoop，仅仅是启动了 MapReduce 环境，我们可以启动 YARN
 ，让 YARN 来负责资源管理与任务调度。</p>
<p style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">
首先修改配置文件 <strong>mapred-site.xml</strong>，这边需要先进行重命名：</p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">mv
 ./etc/hadoop/mapred-site.xml.template ./etc/hadoop/mapred-site.xml<br></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">然后再进行编辑，同样使用
 gedit 编辑会比较方便些 </span><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(51,51,51);background-color:rgb(254,233,204);vertical-align:middle;">gedit ./etc/hadoop/mapred-site.xml</code><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"> ：</span><br></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">&lt;configuration&gt;<br>
        &lt;property&gt;<br>
             &lt;name&gt;mapreduce.framework.name&lt;/name&gt;<br>
             &lt;value&gt;yarn&lt;/value&gt;<br>
        &lt;/property&gt;<br>
&lt;/configuration&gt;<br></span></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">接着修改配置文件 </span><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">yarn-site.xml</span><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">：</span><br></span></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">&lt;configuration&gt;<br>
        &lt;property&gt;<br>
             &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;<br>
             &lt;value&gt;mapreduce_shuffle&lt;/value&gt;<br>
            &lt;/property&gt;<br>
&lt;/configuration&gt;<br></span></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">然后就可以启动
 YARN 了（需要先执行过 </span><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(51,51,51);background-color:rgb(254,233,204);vertical-align:middle;">./sbin/start-dfs.sh</code><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">）：</span><br></span></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">./sbin/start-yarn.sh
      # 启动YARN<br>
./sbin/mr-jobhistory-daemon.sh start historyserver  # 开启历史服务器，才能在Web中查看任务运行情况<br></span></span></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">开启后通过 </span><code style="font-family:Menlo, Monaco, Consolas, 'Courier New', monospace;font-size:14.4px;color:rgb(51,51,51);background-color:rgb(254,233,204);vertical-align:middle;">jps</code><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"> 查看，可以看到多了
 NodeManager 和 ResourceManager 两个后台进程，如下图所示。</span><br></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">启动
 YARN 之后，运行实例的方法还是一样的，仅仅是资源管理方式、任务调度不同。观察日志信息可以发现，不启用 YARN 时，是 “mapred.LocalJobRunner” 在跑任务，启用 YARN 之后，是 “mapred.YARNRunner” 在跑任务。启动 YARN 有个好处是可以通过 Web 界面查看任务的运行情况：</span><a href="http://localhost:8088/cluster" rel="nofollow" style="background:rgb(254,254,254) 0px 0px;color:rgb(32,128,223);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;">http://localhost:8088/cluster</a><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">，如下图所示。</span><br></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">但
 YARN 主要是为集群提供更好的资源管理与任务调度，然而这在单机上体现不出价值，反而会使程序跑得稍慢些。因此在单机上是否开启 YARN 就看实际情况了。</span><br></span></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(252,252,252);">如果不想启动
 YARN，务必把配置文件 </span><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(252,252,252);">mapred-site.xml</span><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(252,252,252);"> 重命名，改成
 mapred-site.xml.template，需要用时改回来就行。否则在该配置文件存在，而未开启 YARN 的情况下，运行程序会提示 “Retrying connect to server: 0.0.0.0/0.0.0.0:8032” 的错误，这也是为何该配置文件初始文件名为 mapred-site.xml.template。</span><br></span></span></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(252,252,252);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">同样的，关闭
 YARN 的脚本如下：</span><br></span></span></span></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(252,252,252);"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);">./sbin/stop-yarn.sh<br>
./sbin/mr-jobhistory-daemon.sh stop historyserver<br></span></span></span></span></span></span></span></p>
<p><span style="background-color:rgb(254,254,254);color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:14px;"><span style="color:rgb(51,51,51);font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:rgb(254,254,254);"><br></span></span></p>
            </div>
                </div>