---
layout:     post
title:      hbase安装
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<span style="font-size:18pt;">HBase安装以及多HMaseter配置<br><span style="font-size:12pt;color:rgb(38,38,38);">1.解压缩hbase-0.94.6.tar.gz<br><span style="font-size:12pt;">tar zxvf hbase-0.94.6.tar.gz<br><span style="font-size:12pt;">2.配置hbase环境变量/etc/profile<br><span style="font-size:12pt;color:rgb(0,0,0);">export HBASE_HOME=/home/<span style="font-family:TimesNewRomanRegular;font-size:9pt;">soft01<span style="font-size:12pt;">/hbase<br><span style="font-size:12pt;">export PATH=$PATH:$HBASE_HOME/bin<br><span style="font-size:12pt;">3.修改hbase/conf/的配置文件：<br><span style="font-size:12pt;color:rgb(230,0,19);">hbase-env.sh<br><span style="font-family:TimesNewRomanBold;font-size:10pt;color:rgb(0,0,0);"><strong>export JAVA_HOME=/usr/local/jdk</strong><br><span style="font-size:10pt;"><strong>export HBASE_CLASSPATH=/home/soft01/hbase</strong><br><span style="font-size:10pt;"><strong>export HBASE_MANAGES_ZK=false #</strong><span style="font-size:8pt;">如果使用独立安装的
<span style="font-size:10pt;"><strong>zookeeper</strong><span style="font-size:8pt;">这个地方就是<span style="font-size:10pt;"><strong>false</strong><span style="font-size:8pt;">， 否则为<span style="font-size:10pt;"><strong>true</strong><br><span style="font-size:12pt;color:rgb(230,0,19);">hbase-site.xml<br><span style="font-family:ConstantiaBold;font-size:11pt;color:rgb(0,0,0);"><strong>&lt;configuration&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;name&gt;hbase.master&lt;/name&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;value&gt;master:60000&lt;/value&gt; #hmaster</strong><span style="font-size:9pt;">的
<span style="font-size:11pt;"><strong>ip</strong><br><span style="font-size:11pt;"><strong>&lt;/property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;name&gt;hbase.master.maxclockskew&lt;/name&gt; #</strong><span style="font-size:9pt;">时间同步允许的时间差<br><span style="font-size:11pt;"><strong>&lt;value&gt;180000&lt;/value&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;/property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;name&gt;hbase.rootdir&lt;/name&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;value&gt;hdfs://master:9000/hbase&lt;/value&gt; #HDFS</strong><span style="font-size:9pt;">主的
<span style="font-size:11pt;"><strong>ip</strong><br><span style="font-size:11pt;"><strong>&lt;/property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;name&gt;hbase.cluster.distributed&lt;/name&gt; #</strong><span style="font-size:9pt;">是否分布式运行<br><span style="font-size:11pt;"><strong>&lt;value&gt;true&lt;/value&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;/property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;value&gt;slave1,slave2,slave3&lt;/value&gt; #zookper</strong><span style="font-size:9pt;">的
<span style="font-size:11pt;"><strong>ip</strong><span style="font-size:9pt;">地址<br><span style="font-size:11pt;"><strong>&lt;/property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;value&gt;/home/soft01/zookeeper&lt;/value&gt; #Zookper</strong><span style="font-size:9pt;">路径<br><span style="font-size:11pt;"><strong>&lt;/property&gt;</strong><br><span style="font-size:11pt;"><strong>&lt;/configuration&gt;</strong><br><span style="font-size:12pt;color:rgb(230,0,19);">regionservers<br><span style="font-family:TimesNewRomanBold;font-size:10pt;color:rgb(0,0,0);"><strong>slave1</strong><br><span style="font-size:10pt;"><strong>slave2</strong><br><span style="font-size:10pt;"><strong>slave3</strong><br><span style="font-size:12pt;">4.分发到3个从节点<br><span style="font-size:12pt;">scp -r ~/hbase soft01@slave1:~/<br><span style="font-size:12pt;">scp -r ~/hbase soft01@slave2:~/<br><span style="font-size:12pt;">scp -r ~/hbase soft01@slave3:~/<br><span style="font-size:12pt;color:rgb(38,38,38);">5.配置其他三台hbase环境变量/etc/profile<br><span style="font-size:12pt;color:rgb(0,0,0);">export HBASE_HOME=/home/hadoop/hbase<br><span style="font-size:12pt;">export PATH=$PATH:$HBASE_HOME/bin<br><span style="font-size:12pt;">6.启动hbase：<br><span style="font-size:12pt;">start-hbase.sh<br><span style="font-size:12pt;">7.命令行以及界面验证hbase安装：<br><span style="font-size:12pt;">hbase shell<br><span style="font-size:12pt;">&gt;list<br><span style="font-size:12pt;">http://master:60010/<br><span style="font-size:12pt;">&gt;describe '表名' 查看表结构<br><span style="font-size:12pt;">&gt;scan '表名',[列名称] 查看表数据<br><span style="font-size:12pt;">&gt;create '表名','列簇名'...<br><span style="font-size:12pt;">&gt;put<br><span style="font-size:12pt;">&gt;get<br><span style="font-size:12pt;">delete ‘scores','Jim','grade'<br><span style="font-family:TahomaRegular;font-size:10pt;">disable 'user'<br><span style="font-size:10pt;">drop 'user'<br><span style="font-size:10pt;">put 'user','P#test01','info:name' // put <span style="font-size:8pt;">
表名 ， <span style="font-size:10pt;">rowkey <span style="font-size:8pt;">， <span style="font-size:10pt;">
‘<span style="font-size:8pt;">列祖： 列<span style="font-size:10pt;">’,value<br><span style="font-size:10pt;">get 'user','P#test01','info:name' // get <span style="font-size:8pt;">
表名 ， <span style="font-size:10pt;">rowkey <span style="font-size:8pt;">， <span style="font-size:10pt;">
‘<span style="font-size:8pt;">列祖： 列<span style="font-size:10pt;">’<br><span style="font-size:12pt;">scan 'user',{COLUMNS =&gt;'info:login_name'}<br><span style="font-size:10pt;">scan <span style="font-size:12pt;">'<span style="font-size:10pt;">user<span style="font-size:12pt;">'<span style="font-size:10pt;">, {FILTER =&gt;"(PrefixFilter (<span style="font-size:12pt;">'e'<span style="font-size:10pt;">) )"} //rowkey<br><span style="font-size:10pt;">scan 'user', {FILTER =&gt;"(PrefixFilter ('e') AND (QualifierFilter (&gt;=, 'binary:login_name')))"}<br><span style="font-size:10pt;">scan <span style="font-size:12pt;">'user'<span style="font-size:10pt;">, {FILTER =&gt; org.apache.hadoop.hbase.filter.ColumnPaginationFilter.new(1, 2)}<br><span style="font-size:12pt;">8. 如何配置HMater主备<br><span style="font-size:12pt;">8.1 修改配置文件<br><span style="font-size:12pt;">修改/conf/hbase-site.xml文件<br><span style="font-size:12pt;">将<span style="font-family:ConstantiaRegular;font-size:11pt;">&lt;<br><span style="font-size:11pt;">name&gt;hbase.master&lt;/name&gt;<br><span style="font-size:11pt;">&lt;value&gt;master:60000&lt;/value&gt;<br><span style="font-size:9pt;">修改为<br><span style="font-size:11pt;color:rgb(255,0,0);">&lt;name&gt;hbase.master.port&lt;/name&gt;<br><span style="font-size:11pt;">&lt;value&gt;60000&lt;/value&gt;<br><span style="font-size:9pt;color:rgb(0,0,0);">只记录端口号即可， 然后将此文件复制到其他<span style="font-size:11pt;">HBASE<span style="font-size:9pt;">节点上<br><span style="font-family:TimesNewRomanRegular;font-size:10pt;">8.2 /conf<span style="font-size:9pt;">下添加<span style="font-size:10pt;">backup-masters
<span style="font-size:9pt;">文件<br><span style="font-size:9pt;">内容如下： <span style="font-size:10pt;">slave2<br><span style="font-size:9pt;">表示记录从<span style="font-size:10pt;">HMaster<span style="font-size:9pt;">的主机<br><span style="font-size:9pt;">然后在配置<span style="font-size:10pt;">backup-masters<span style="font-size:9pt;">的机器上， 启动<span style="font-size:10pt;">HBase<span style="font-size:9pt;">即可：
<span style="font-size:10pt;color:rgb(255,0,0);">start-hbase.sh<br><span style="font-size:10pt;color:rgb(0,0,0);">ps<span style="font-size:9pt;">： 单独启动<span style="font-size:10pt;">master<span style="font-size:9pt;">备份服务
<span style="font-family:ConstantiaRegular;font-size:11pt;color:rgb(255,0,0);">hbase-daemon.sh start master --backup<br><span style="font-size:11pt;color:rgb(0,0,0);">9.<span style="font-size:9pt;">添加<span style="font-size:11pt;">HBase<span style="font-size:9pt;">节点<br><span style="font-size:11pt;">9.1 <span style="font-size:9pt;">复制原子节点到新节点上<br><span style="font-size:11pt;">92. <span style="font-family:ArialRegular;font-size:11pt;color:rgb(83,83,83);">
hbase-daemon.sh start regionserver</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><br><br></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
            </div>
                </div>