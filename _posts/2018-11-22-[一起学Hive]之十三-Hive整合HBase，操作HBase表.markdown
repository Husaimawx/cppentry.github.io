---
layout:     post
title:      [一起学Hive]之十三-Hive整合HBase，操作HBase表
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<h1 style="line-height:35px;color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;text-indent:30px;">
十二、Hive整合HBase，操作HBase表</h1>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
HBase是被设计用来做k-v查询的，但有时候，也会遇到基于HBase表的复杂统计，写MR很不方便。Hive考虑到了这点，提供了操作HBase表的接口。</p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
关于Hive操作HBase表的原理，请参考我之前的博文：</p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
<a href="http://lxw1234.com/archives/2015/04/101.htm" rel="nofollow" title="" style="color:rgb(0,166,124);text-decoration:none;">         http://lxw1234.com/archives/2015/04/101.htm</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
值得商榷的是，使用Hive操作HBase中的表，只是提供了便捷性，对于性能上，较MapReduce并不会提升太多，请大家酌情使用。</p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
下面来看使用方法（基于Hive0.13和HBase0.96）：</p>
<h2 style="line-height:18px;color:rgb(85,85,85);font-size:18px;border-left-width:4px;border-left-style:solid;border-left-color:rgb(0,166,124);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;text-indent:30px;background-color:rgb(251,251,251);">
12.1 HBase中的表</h2>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
先在HBase中创建表：</p>
<pre class="prettyprint linenums" style="color:rgb(68,68,68);font-size:14px;line-height:20px;border:1px solid rgb(238,238,238);overflow:hidden;text-indent:30px;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;background-color:rgb(248,248,248);"></pre><ol class="linenums" style="list-style:none;"><li class="L0" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">create </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span><span class="pun" style="color:rgb(0,170,0);">,{</span><span class="pln" style="color:rgb(0,0,255);">NAME </span><span class="pun" style="color:rgb(0,170,0);">=&gt;</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="str" style="color:rgb(194,143,91);">'f1'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);">VERSIONS </span><span class="pun" style="color:rgb(0,170,0);">=&gt;</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="lit" style="color:rgb(204,0,204);">1</span><span class="pun" style="color:rgb(0,170,0);">},{</span><span class="pln" style="color:rgb(0,0,255);">NAME </span><span class="pun" style="color:rgb(0,170,0);">=&gt;</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="str" style="color:rgb(194,143,91);">'f2'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);">VERSIONS </span><span class="pun" style="color:rgb(0,170,0);">=&gt;</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="lit" style="color:rgb(204,0,204);">1</span><span class="pun" style="color:rgb(0,170,0);">},</span></li><li class="L1" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pun" style="color:rgb(0,170,0);">{</span><span class="pln" style="color:rgb(0,0,255);">NAME </span><span class="pun" style="color:rgb(0,170,0);">=&gt;</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="str" style="color:rgb(194,143,91);">'f3'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);">VERSIONS </span><span class="pun" style="color:rgb(0,170,0);">=&gt;</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="lit" style="color:rgb(204,0,204);">1</span><span class="pun" style="color:rgb(0,170,0);">}</span></li></ol>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
表’lxw1234’有三个列族f1,f2,f3</p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
向HBase表中插入数据：</p>
<pre class="prettyprint linenums" style="color:rgb(68,68,68);font-size:14px;line-height:20px;border:1px solid rgb(238,238,238);overflow:hidden;text-indent:30px;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;background-color:rgb(248,248,248);"></pre><ol class="linenums" style="list-style:none;"><li class="L0" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">put </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'lxw1234.com'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'f1:c1'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'name1'</span></li><li class="L1" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">put </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'lxw1234.com'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'f1:c2'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'name2'</span></li><li class="L2" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">put </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'lxw1234.com'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'f2:c1'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'age1'</span></li><li class="L3" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">put </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'lxw1234.com'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'f2:c2'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'age2'</span></li><li class="L4" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">put </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'lxw1234.com'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'f3:c1'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'job1'</span></li><li class="L5" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">put </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'lxw1234.com'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'f3:c2'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'job2'</span></li><li class="L6" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">put </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'lxw1234.com'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'f3:c3'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'job3'</span></li></ol>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
完成后数据如下：</p>
<pre class="prettyprint linenums" style="color:rgb(68,68,68);font-size:14px;line-height:20px;border:1px solid rgb(238,238,238);overflow:hidden;text-indent:30px;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;background-color:rgb(248,248,248);"></pre><ol class="linenums" style="list-style:none;"><li class="L0" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">hbase</span><span class="pun" style="color:rgb(0,170,0);">(</span><span class="pln" style="color:rgb(0,0,255);">main</span><span class="pun" style="color:rgb(0,170,0);">):</span><span class="lit" style="color:rgb(204,0,204);">025</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="lit" style="color:rgb(204,0,204);">0</span><span class="pun" style="color:rgb(0,170,0);">*</span><span class="pln" style="color:rgb(0,0,255);"> scan </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span></li><li class="L1" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">ROW               COLUMN</span><span class="pun" style="color:rgb(0,170,0);">+</span><span class="pln" style="color:rgb(0,0,255);">CELL                                                                                                </span></li><li class="L2" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f1</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c1</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624625198</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">name1                                                         </span></li><li class="L3" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f1</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c2</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624591717</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">name2                                                         </span></li><li class="L4" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f2</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c1</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624608759</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">age1                                                          </span></li><li class="L5" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f2</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c2</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624635261</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">age2                                                          </span></li><li class="L6" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f3</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c1</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624662282</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">job1                                                          </span></li><li class="L7" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f3</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c2</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624697028</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">job2                                                          </span></li><li class="L8" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f3</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c3</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624697065</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">job3                                                          </span></li><li class="L9" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="lit" style="color:rgb(204,0,204);">1</span><span class="pln" style="color:rgb(0,0,255);"> row</span><span class="pun" style="color:rgb(0,170,0);">(</span><span class="pln" style="color:rgb(0,0,255);">s</span><span class="pun" style="color:rgb(0,170,0);">)</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="kwd" style="color:rgb(249,38,89);">in</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="lit" style="color:rgb(204,0,204);">0.0350</span><span class="pln" style="color:rgb(0,0,255);"> seconds</span></li></ol>
<h2 style="line-height:18px;color:rgb(85,85,85);font-size:18px;border-left-width:4px;border-left-style:solid;border-left-color:rgb(0,166,124);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;text-indent:30px;background-color:rgb(251,251,251);">
12.2 Hive中创建基于HBase的表</h2>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
在Hive中使用如下语句建表：</p>
<pre class="prettyprint linenums" style="color:rgb(68,68,68);font-size:14px;line-height:20px;border:1px solid rgb(238,238,238);overflow:hidden;text-indent:30px;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;background-color:rgb(248,248,248);"></pre><ol class="linenums" style="list-style:none;"><li class="L0" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">SET hbase</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">zookeeper</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">quorum</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">zkNode1</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);">zkNode2</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);">zkNode3</span><span class="pun" style="color:rgb(0,170,0);">;</span><span class="pln" style="color:rgb(0,0,255);"> </span></li><li class="L1" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">SET zookeeper</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">znode</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">parent</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="str" style="color:rgb(194,143,91);">/hbase;</span></li><li class="L2" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="str" style="color:rgb(194,143,91);">ADD jar /</span><span class="pln" style="color:rgb(0,0,255);">usr</span><span class="pun" style="color:rgb(0,170,0);">/</span><span class="kwd" style="color:rgb(249,38,89);">local</span><span class="pun" style="color:rgb(0,170,0);">/</span><span class="pln" style="color:rgb(0,0,255);">apache</span><span class="pun" style="color:rgb(0,170,0);">-</span><span class="pln" style="color:rgb(0,0,255);">hive</span><span class="pun" style="color:rgb(0,170,0);">-</span><span class="lit" style="color:rgb(204,0,204);">0.13</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="lit" style="color:rgb(204,0,204);">1</span><span class="pun" style="color:rgb(0,170,0);">-</span><span class="pln" style="color:rgb(0,0,255);">bin</span><span class="pun" style="color:rgb(0,170,0);">/</span><span class="pln" style="color:rgb(0,0,255);">lib</span><span class="pun" style="color:rgb(0,170,0);">/</span><span class="pln" style="color:rgb(0,0,255);">hive</span><span class="pun" style="color:rgb(0,170,0);">-</span><span class="pln" style="color:rgb(0,0,255);">hbase</span><span class="pun" style="color:rgb(0,170,0);">-</span><span class="pln" style="color:rgb(0,0,255);">handler</span><span class="pun" style="color:rgb(0,170,0);">-</span><span class="lit" style="color:rgb(204,0,204);">0.13</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="lit" style="color:rgb(204,0,204);">1.jar</span><span class="pun" style="color:rgb(0,170,0);">;</span></li><li class="L3" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> </span></li><li class="L4" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">CREATE EXTERNAL TABLE lxw1234 </span><span class="pun" style="color:rgb(0,170,0);">(</span></li><li class="L5" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">rowkey </span><span class="kwd" style="color:rgb(249,38,89);">string</span><span class="pun" style="color:rgb(0,170,0);">,</span></li><li class="L6" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">f1 map</span><span class="pun" style="color:rgb(0,170,0);">&lt;</span><span class="pln" style="color:rgb(0,0,255);">STRING</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);">STRING</span><span class="pun" style="color:rgb(0,170,0);">&gt;,</span></li><li class="L7" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">f2 map</span><span class="pun" style="color:rgb(0,170,0);">&lt;</span><span class="pln" style="color:rgb(0,0,255);">STRING</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);">STRING</span><span class="pun" style="color:rgb(0,170,0);">&gt;,</span></li><li class="L8" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">f3 map</span><span class="pun" style="color:rgb(0,170,0);">&lt;</span><span class="pln" style="color:rgb(0,0,255);">STRING</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);">STRING</span><span class="pun" style="color:rgb(0,170,0);">&gt;</span></li><li class="L9" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pun" style="color:rgb(0,170,0);">)</span><span class="pln" style="color:rgb(0,0,255);"> STORED BY </span><span class="str" style="color:rgb(194,143,91);">'org.apache.hadoop.hive.hbase.HBaseStorageHandler'</span></li><li class="L0" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">WITH SERDEPROPERTIES </span><span class="pun" style="color:rgb(0,170,0);">(</span><span class="str" style="color:rgb(194,143,91);">"hbase.columns.mapping"</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="str" style="color:rgb(194,143,91);">":key,f1:,f2:,f3:"</span><span class="pun" style="color:rgb(0,170,0);">)</span></li><li class="L1" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">TBLPROPERTIES </span><span class="pun" style="color:rgb(0,170,0);">(</span><span class="str" style="color:rgb(194,143,91);">"hbase.table.name"</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="str" style="color:rgb(194,143,91);">"lxw1234"</span><span class="pun" style="color:rgb(0,170,0);">);</span></li></ol>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
这里使用外部表映射到HBase中的表，这样，在Hive中删除表，并不会删除HBase中的表，否则，就会删除。</p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
另外，除了rowkey，其他三个字段使用Map结构来保存HBase中的每一个列族。</p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
其中，参数解释如下：</p>
<ul style="list-style:none;color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;"><li style="line-height:30px;text-indent:0px;">hbase.zookeeper.quorum：</li></ul><p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
指定HBase使用的zookeeper集群，默认端口是2181，可以不指定，如果指定，格式为zkNode1:2222,zkNode2:2222,zkNode3:2222</p>
<ul style="list-style:none;color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;"><li style="line-height:30px;text-indent:0px;">zookeeper.znode.parent</li></ul><p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
指定HBase在zookeeper中使用的根目录</p>
<ul style="list-style:none;color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;"><li style="line-height:30px;text-indent:0px;">hbase.columns.mapping</li></ul><p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
Hive表和HBase表的字段映射关系，分别为：Hive表中第一个字段映射:key(rowkey)，第二个字段映射列族f1，第三个字段映射列族f2,第四个字段映射列族f3</p>
<ul style="list-style:none;color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;"><li style="line-height:30px;text-indent:0px;">hbase.table.name</li></ul><p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
HBase中表的名字</p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
         <span style="color:rgb(255,0,0);"><strong>也可以直接在Hive中创建表的同时，完成在HBase中创建表</strong>。</span></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
加入之前没有在HBase中创建表lxw1234,那么使用上面的语句在Hive创建表的时候，会同时在HBase中创建。</p>
<h2 style="line-height:18px;color:rgb(85,85,85);font-size:18px;border-left-width:4px;border-left-style:solid;border-left-color:rgb(0,166,124);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;text-indent:30px;background-color:rgb(251,251,251);">
12.3 Hive中查询HBase表</h2>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
上面在Hive中创建好表之后，直接查询：</p>
<pre class="prettyprint linenums" style="color:rgb(68,68,68);font-size:14px;line-height:20px;border:1px solid rgb(238,238,238);overflow:hidden;text-indent:30px;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;background-color:rgb(248,248,248);"></pre><ol class="linenums" style="list-style:none;"><li class="L0" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">hive</span><span class="pun" style="color:rgb(0,170,0);">&gt;</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="kwd" style="color:rgb(249,38,89);">select</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="pun" style="color:rgb(0,170,0);">*</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="kwd" style="color:rgb(249,38,89);">from</span><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">;</span></li><li class="L1" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">OK</span></li><li class="L2" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com     </span><span class="pun" style="color:rgb(0,170,0);">{</span><span class="str" style="color:rgb(194,143,91);">"c1"</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="str" style="color:rgb(194,143,91);">"name1"</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">"c2"</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="str" style="color:rgb(194,143,91);">"name2"</span><span class="pun" style="color:rgb(0,170,0);">}</span><span class="pln" style="color:rgb(0,0,255);">     </span><span class="pun" style="color:rgb(0,170,0);">{</span><span class="str" style="color:rgb(194,143,91);">"c1"</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="str" style="color:rgb(194,143,91);">"age1"</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">"c2"</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="str" style="color:rgb(194,143,91);">"age2"</span><span class="pun" style="color:rgb(0,170,0);">}</span><span class="pln" style="color:rgb(0,0,255);">       </span><span class="pun" style="color:rgb(0,170,0);">{</span><span class="str" style="color:rgb(194,143,91);">"c1"</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="str" style="color:rgb(194,143,91);">"job1"</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">"c2"</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="str" style="color:rgb(194,143,91);">"job2"</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">"c3"</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="str" style="color:rgb(194,143,91);">"job3"</span><span class="pun" style="color:rgb(0,170,0);">}</span></li></ol>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
 </p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
可以看到，Hive中只有一行数据，因为只有一个rowkey，每一个列族的列和值，分别被存储到Map结构中。</p>
<h2 style="line-height:18px;color:rgb(85,85,85);font-size:18px;border-left-width:4px;border-left-style:solid;border-left-color:rgb(0,166,124);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;text-indent:30px;background-color:rgb(251,251,251);">
12.4 Hive中插入数据到HBase表</h2>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
可以在Hive表中通过Insert语句，完成对HBase表数据的插入。</p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
比如，执行下面的语句：</p>
<pre class="prettyprint linenums" style="color:rgb(68,68,68);font-size:14px;line-height:20px;border:1px solid rgb(238,238,238);overflow:hidden;text-indent:30px;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;background-color:rgb(248,248,248);"></pre><ol class="linenums" style="list-style:none;"><li class="L0" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">INSERT INTO TABLE lxw1234 </span></li><li class="L1" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">SELECT </span><span class="str" style="color:rgb(194,143,91);">'row1'</span><span class="pln" style="color:rgb(0,0,255);"> AS rowkey</span><span class="pun" style="color:rgb(0,170,0);">,</span></li><li class="L2" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">map</span><span class="pun" style="color:rgb(0,170,0);">(</span><span class="str" style="color:rgb(194,143,91);">'c3'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'name3'</span><span class="pun" style="color:rgb(0,170,0);">)</span><span class="pln" style="color:rgb(0,0,255);"> AS f1</span><span class="pun" style="color:rgb(0,170,0);">,</span></li><li class="L3" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">map</span><span class="pun" style="color:rgb(0,170,0);">(</span><span class="str" style="color:rgb(194,143,91);">'c3'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'age3'</span><span class="pun" style="color:rgb(0,170,0);">)</span><span class="pln" style="color:rgb(0,0,255);"> AS f2</span><span class="pun" style="color:rgb(0,170,0);">,</span></li><li class="L4" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">map</span><span class="pun" style="color:rgb(0,170,0);">(</span><span class="str" style="color:rgb(194,143,91);">'c4'</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="str" style="color:rgb(194,143,91);">'job3'</span><span class="pun" style="color:rgb(0,170,0);">)</span><span class="pln" style="color:rgb(0,0,255);"> AS f3 </span></li><li class="L5" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">FROM DUAL </span></li><li class="L6" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">limit </span><span class="lit" style="color:rgb(204,0,204);">1</span><span class="pun" style="color:rgb(0,170,0);">;</span></li></ol>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
在HBase中查看数据：</p>
<pre class="prettyprint linenums" style="color:rgb(68,68,68);font-size:14px;line-height:20px;border:1px solid rgb(238,238,238);overflow:hidden;text-indent:30px;font-family:Consolas, 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace !important;background-color:rgb(248,248,248);"></pre><ol class="linenums" style="list-style:none;"><li class="L0" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">hbase</span><span class="pun" style="color:rgb(0,170,0);">(</span><span class="pln" style="color:rgb(0,0,255);">main</span><span class="pun" style="color:rgb(0,170,0);">):</span><span class="lit" style="color:rgb(204,0,204);">028</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="lit" style="color:rgb(204,0,204);">0</span><span class="pun" style="color:rgb(0,170,0);">*</span><span class="pln" style="color:rgb(0,0,255);"> scan </span><span class="str" style="color:rgb(194,143,91);">'lxw1234'</span></li><li class="L1" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);">ROW            COLUMN</span><span class="pun" style="color:rgb(0,170,0);">+</span><span class="pln" style="color:rgb(0,0,255);">CELL                                                                                                </span></li><li class="L2" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f1</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c1</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624625198</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">name1                                                         </span></li><li class="L3" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f1</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c2</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624591717</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">name2                                                         </span></li><li class="L4" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f2</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c1</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624608759</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">age1                                                          </span></li><li class="L5" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f2</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c2</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624635261</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">age2                                                          </span></li><li class="L6" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f3</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c1</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624662282</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">job1                                                          </span></li><li class="L7" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f3</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c2</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624697028</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">job2                                                          </span></li><li class="L8" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> lxw1234</span><span class="pun" style="color:rgb(0,170,0);">.</span><span class="pln" style="color:rgb(0,0,255);">com   column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f3</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c3</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435624697065</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">job3                                                          </span></li><li class="L9" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> row1          column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f1</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c3</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435625971410</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">name3                                                         </span></li><li class="L0" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> row1          column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f2</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c3</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435625971410</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">age3                                                          </span></li><li class="L1" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="pln" style="color:rgb(0,0,255);"> row1          column</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">f3</span><span class="pun" style="color:rgb(0,170,0);">:</span><span class="pln" style="color:rgb(0,0,255);">c4</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> timestamp</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="lit" style="color:rgb(204,0,204);">1435625971410</span><span class="pun" style="color:rgb(0,170,0);">,</span><span class="pln" style="color:rgb(0,0,255);"> value</span><span class="pun" style="color:rgb(0,170,0);">=</span><span class="pln" style="color:rgb(0,0,255);">job3                                                          </span></li><li class="L2" style="text-indent:0px;color:rgb(190,190,197);margin-left:0px;list-style:decimal;"><span class="lit" style="color:rgb(204,0,204);">2</span><span class="pln" style="color:rgb(0,0,255);"> row</span><span class="pun" style="color:rgb(0,170,0);">(</span><span class="pln" style="color:rgb(0,0,255);">s</span><span class="pun" style="color:rgb(0,170,0);">)</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="kwd" style="color:rgb(249,38,89);">in</span><span class="pln" style="color:rgb(0,0,255);"> </span><span class="lit" style="color:rgb(204,0,204);">0.0420</span><span class="pln" style="color:rgb(0,0,255);"> seconds</span></li></ol>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
Hive中的外部表lxw1234，就和其他外部表一样，只有一份元数据，真正的数据是在HBase表中，Hive通过hive-hbase-handler来操作HBase中的表。</p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
 </p>
<h3 style="line-height:35px;color:rgb(85,85,85);font-size:16px;font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;text-indent:30px;">
<a title="" href="http://lxw1234.com/" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive相关文章（持续更新）</a>：</h3>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
<a title="" href="http://lxw1234.com/archives/tag/learn-hive" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">一起学Hive系列</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/238.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive概述，Hive是什么</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/251.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive函数大全-完整版</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/265.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive中的数据库(Database)和表(Table)</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/269.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive的安装配置</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/284.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive的视图和分区</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/286.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive的动态分区</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/290.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">向Hive表中加载数据</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/292.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">使用Hive命令行</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/307.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive的查询语句SELECT</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/313.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive中Join的原理和机制</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/315.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive中Join的类型和用法</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
—-<a title="" href="http://lxw1234.com/archives/2015/06/317.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive SQL的优化</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
<a title="" href="http://lxw1234.com/archives/tag/hive-window-functions" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive分析函数系列</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
<a title="" href="http://lxw1234.com/archives/2015/05/207.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">Hive索引</a></p>
<p style="color:rgb(85,85,85);font-family:'Microsoft Yahei', 'Helvetica Neue', Helvetica, Arial, sans-serif;font-size:15px;line-height:26px;text-indent:30px;">
<a title="" href="http://lxw1234.com/archives/2015/04/15.htm" rel="nofollow" style="color:rgb(0,166,124);text-decoration:none;">hive优化之——控制hive任务中的map数和reduce数</a></p>
            </div>
                </div>