---
layout:     post
title:      hive on spark的安装实现
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/zmywei_20160707/article/details/77867463				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<pre id="wmd-input" class="form-control font-rich has-selection"><span id="wmd-input-section-10" class="wmd-input-section"><span class="token pre"><span class="token lf">
</span>    Hive on Spark安装，hive是基于Hadoop的数据仓库，hdfs为hive存储空间，mapreduce为hive的sql计算引擎。但是由于mapreduce很多计算过程都要经过硬盘读写等劣势，和spark等计算引擎相比，无论是计算速度，还是计算灵活度上都有很多劣势，这也导致了hive on mapreduce计算速度并不是令人很满意。本篇来讲下hive on spark，将hive的计算引擎替换为spark，速度将有很大的提升.<span class="token lf">
</span></span><span class="token lf">
</span><span class="token p">一、环境准备</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">centos6.5</span><span class="token lf">
</span><span class="token p">hadoop2.6集群，需要hdfs、yarn</span><span class="token lf">
</span><span class="token p">hive2.0.0</span><span class="token lf">
</span><span class="token p">spark1.5源码</span><span class="token lf">
</span><span class="token p">maven3.5（自行安装）</span><span class="token lf">
</span><span class="token p">jdk1.8（自行安装）</span><span class="token lf">
</span><span class="token p">scala2.10（自行安装）</span><span class="token lf">
</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">二、maven编译spark，在官网下载spark1.5源码，在源码根目录下运行</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">./make-distribution.sh --name "hadoop2-without-hive" --tgz "-Pyarn,hadoop-provided,hadoop-2.6,parquet-provided"</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">生成spark-1.5.0-bin-hadoop2-without-hive.tgz</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">三、安装hadoop2.6集群</span><span class="token lf">
</span><span class="token p">1、免密登陆并修改主机名</span><span class="token lf">
</span><span class="token p">ssh-keygen -t rsa</span><span class="token lf">
</span><span class="token p">ssh-copy-id -i /home/hadoop/.ssh/id_rsa.pub hadoop</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">2、解压</span><span class="token lf">
</span><span class="token p">3、配置环境变量</span><span class="token lf">
</span><span class="token p">export JAVA<span class="token em"><span class="token md md-em md-start">_</span>HOME=/usr/local/jdk1.8.0<span class="token md md-em md-close">_</span></span>121/</span><span class="token lf">
</span><span class="token p">export JAVA<span class="token em"><span class="token md md-em md-start">_</span>BIN=$JAVA<span class="token md md-em md-close">_</span></span>HOME/bin</span><span class="token lf">
</span><span class="token p">export PATH=<span class="token math"><span class="token md md-bracket-start">$</span>PATH:<span class="token md md-bracket-end">$</span></span>JAVA_HOME/bin</span><span class="token lf">
</span><span class="token p">export CLASSPATH=.:<span class="token math"><span class="token md md-bracket-start">$</span>JAVA_HOME/lib/dt.jar:<span class="token md md-bracket-end">$</span></span>JAVA_HOME/lib/tools.jar</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">HADOOP_HOME=/home/hadoop/apps/hadoop-2.6.0-cdh5.5.2</span><span class="token lf">
</span><span class="token p">HADOOP<span class="token em"><span class="token md md-em md-start">_</span>CONF<span class="token md md-em md-close">_</span></span>DIR=$HADOOP_HOME/etc/hadoop</span><span class="token lf">
</span><span class="token p">PATH=<span class="token math"><span class="token md md-bracket-start">$</span>HADOOP_HOME/bin:<span class="token md md-bracket-end">$</span></span>PATH</span><span class="token lf">
</span><span class="token p">export HADOOP<span class="token em"><span class="token md md-em md-start">_</span>HOME HADOOP<span class="token md md-em md-close">_</span></span>CONF_DIR PATH</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">source  .bash_profile </span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">4、修改core-site.xml</span><span class="token lf">
</span><span class="token p"> vi core-site.xml </span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://weisc:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>NameNode URI.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>io.file.buffer.size<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>131072<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Size of read/write buffer used inSequenceFiles.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">5、</span><span class="token lf">
</span><span class="token p">编辑hdfs-site.xml</span><span class="token lf">
</span><span class="token p">[hadoop@h201 hadoop-2.6.0]$ mkdir -p dfs/name</span><span class="token lf">
</span><span class="token p">[hadoop@h201 hadoop-2.6.0]$ mkdir -p dfs/data</span><span class="token lf">
</span><span class="token p">[hadoop@h201 hadoop-2.6.0]$ mkdir -p dfs/namesecondary</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">[hadoop@h201 hadoop]$ vi hdfs-site.xml</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.secondary.http-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>weisc:50090<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>The secondary namenode http server address andport.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.name.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>file:///home/hadoop/apps/hadoop-2.6.0-cdh5.5.2/dfs/name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Path on the local filesystem where the NameNodestores the namespace and transactions logs persistently.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.datanode.data.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>file:///home/hadoop/apps/hadoop-2.6.0-cdh5.5.2/dfs/data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Comma separated list of paths on the local filesystemof a DataNode where it should store its blocks.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.checkpoint.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>file:///home/hadoop/apps/hadoop-2.6.0-cdh5.5.2/dfs/namesecondary<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Determines where on the local filesystem the DFSsecondary name node should store the temporary images to merge. If this is acomma-delimited list of directories then the image is replicated in all of thedirectories for redundancy.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">6、</span><span class="token lf">
</span><span class="token p">编辑mapred-site.xml</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">[hadoop@h201 hadoop]$ cp mapred-site.xml.template mapred-site.xml</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Theruntime framework for executing MapReduce jobs. Can be one of local, classic oryarn.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.jobhistory.address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>weisc:10020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>MapReduce JobHistoryServer IPC host:port<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.jobhistory.webapp.address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>weisc:19888<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>MapReduce JobHistoryServer Web UI host:port<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token hr">*****</span><span class="token lf">
</span><span class="token p">属性”mapreduce.framework.name“表示执行mapreduce任务所使用的运行框架，默认为local，需要将其改为”yarn”</span><span class="token lf">
</span><span class="token hr">*****</span><span class="token lf">
</span><span class="token p">7、</span><span class="token lf">
</span><span class="token p"> 编辑yarn-site.xml</span><span class="token lf">
</span><span class="token p">[hadoop@h201 hadoop]$ vi yarn-site.xml</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>weisc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>The hostname of theRM.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Shuffle service that needs to be set for Map Reduceapplications.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">8、</span><span class="token lf">
</span><span class="token p">[hadoop@h201 hadoop]$ vi hadoop-env.sh </span><span class="token lf">
</span><span class="token p">export JAVA<span class="token em"><span class="token md md-em md-start">_</span>HOME=/usr/jdk1.7.0<span class="token md md-em md-close">_</span></span>25</span><span class="token lf">
</span><span class="token p">9、</span><span class="token lf">
</span><span class="token p">[hadoop@h201 hadoop]$ vi slaves </span><span class="token lf">
</span><span class="token p">h202</span><span class="token lf">
</span><span class="token p">h203</span><span class="token lf">
</span><span class="token p">10、格式化</span><span class="token lf">
</span><span class="token p">bin/hadoop namenode -format</span><span class="token lf">
</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">四、安装mysql-server</span><span class="token lf">
</span><span class="token p">yum -y install mysql-server</span><span class="token lf">
</span><span class="token p">mysql</span><span class="token lf">
</span><span class="token p">create user 'hive' identified by 'hive';</span><span class="token lf">
</span><span class="token p">必须设置远程可登陆</span><span class="token lf">
</span><span class="token p">grant all privileges on <span class="token em"><span class="token md md-em md-start">*</span>.<span class="token md md-em md-close">*</span></span> to hive@'%' identified by 'hive' with grant option;</span><span class="token lf">
</span><span class="token p">flush privileges;</span><span class="token lf">
</span><span class="token p">create database hive;</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">五、安装hive2.0</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">1、修改conf/hive-site.xml</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>JDBC connect string for a JDBC metastore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Driver class name for a JDBC metastore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>username to use against metastore database<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>password to use against metastore database<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.exec.scratchdir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/tmp/hive<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>HDFS root scratch dir for Hive jobs which gets created with write all (733) permission. For each connecting user, an HDFS scratch dir: <span class="token math"><span class="token md md-bracket-start">$</span><span class="token lparen">{</span>hive.exec.scratchdir<span class="token rparen">}</span>/&amp;lt;username&amp;gt; is created, with <span class="token md md-bracket-end">$</span></span>{hive.scratch.dir.permission}.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.exec.local.scratchdir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/tmp/hive/local<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Local scratch space for Hive jobs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.downloaded.resources.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/tmp/hive/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Temporary local directory for added resources in the remote file system.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">2、初始化数据库bin/schematool -initSchema -dbType mysql</span><span class="token lf">
</span><span class="token lf">
</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">六、安装scala2.10.1</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">tar -zxvf scala-2.10.1.tgz</span><span class="token lf">
</span><span class="token p">vi .bash_profile 修改环境变量</span><span class="token lf">
</span><span class="token p">export SCALA_HOME=/apps/scala-2.10.1</span><span class="token lf">
</span><span class="token p">PATH=<span class="token math"><span class="token md md-bracket-start">$</span>HADOOP_HOME/bin:<span class="token md md-bracket-end">$</span></span>PATH:$SCALA_HOME/bin</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">查看scala -version</span><span class="token lf">
</span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">七、安装spark后 bin/run-example org.apache.spark.examples.SparkPi</span><span class="token lf">
</span><span class="token p"> </span><span class="token lf">
</span><span class="token p"> </span><span class="token lf">
</span><span class="token p"> 修改hive-site.xml</span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.execution.engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>spark<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.enable.spark.execution.engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>spark.home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/apps/spark<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token comment">&lt;!--sparkcontext --&gt;</span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>spark.master<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn-cluster<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>spark.serializer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>org.apache.spark.serializer.KryoSerializer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>spark.executor.memeory<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2g<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>spark.driver.memeory<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1g<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>spark.executor.cores<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>spark.executor.instances<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>spark.app.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>myInceptor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p">    <span class="token comment">&lt;!--事务相关 --&gt;</span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.support.concurrency<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.enforce.bucketing<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.exec.dynamic.partition.mode<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>nonstrict<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.txn.manager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop.hive.ql.lockmgr.DbTxnManager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.compactor.initiator.on<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.compactor.worker.threads<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>spark.executor.extraJavaOptions<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>-XX:+PrintGCDetails -Dkey=value -Dnumbers="one two three"</span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.server2.enable.doAs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token p"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span></span><span class="token lf">
</span><span class="token lf">
</span><span class="token p">八、运行hive</span><span class="token lf">
</span><span class="token p">select count(*) from test; </span><span class="token lf">
</span><span class="token lf">
</span></span><span class="token lf">
</span></pre>
<br>            </div>
                </div>