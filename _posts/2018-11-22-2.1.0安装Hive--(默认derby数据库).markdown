---
layout:     post
title:      2.1.0安装Hive--(默认derby数据库)
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/Simon_09010817/article/details/79728312				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p align="center"><strong>安装Hive—(默认derby数据库)</strong></p><p>一、       新建一个Hive文件夹</p><p><img src="https://img-blog.csdn.net/20180328152629758" alt=""></p><p><img src="https://img-blog.csdn.net/20180328152640869" alt=""></p><p>二、       上传hive的安装包</p><p><img src="https://img-blog.csdn.net/20180328152654859" alt=""></p><p>三、       解压到指定文件夹</p><pre><code class="language-html">tar  -zxvf apache-hive-1.2.1-bin.tar.gz  –C  /…</code></pre><p><img src="https://img-blog.csdn.net/20180328152705348" alt=""></p><p>四、      配置环境变量</p><pre><code class="language-html">vi /etc/profile</code></pre><p><span style="color:#333333;background:#FFFFFF;">            追加：</span></p><pre><code class="language-html">export HIVE_HOME=/usr/hive/hive-1.2.1/apache-hive-1.2.1-bin
export  PATH=$HIVE_HOME/bin:$PATH</code></pre><p><span style="color:#333333;background:#FFFFFF;">           </span><span style="color:#333333;background:#FFFFFF;">立即生效：</span></p><pre><code class="language-html">source/etc/profile</code></pre><p><img src="https://img-blog.csdn.net/2018032815272241" alt=""></p><p><span style="color:#333333;">五、   </span><span style="color:#333333;background:#FFFFFF;">修改</span><span style="color:#333333;background:#FFFFFF;">hive-env.sh</span><span style="color:#333333;background:#FFFFFF;">文件</span></p><p><span style="color:#333333;background:#FFFFFF;">将</span><span style="color:#333333;background:#FFFFFF;">hive-env.sh.template</span><span style="color:#333333;background:#FFFFFF;">拷贝为</span><span style="color:#333333;background:#FFFFFF;">hive-env.sh</span></p><p><img src="https://img-blog.csdn.net/2018032815273281" alt=""></p><p><span style="color:#333333;background:#FFFFFF;">            追加：</span></p><pre><code class="language-html">export     HIVE_CONF_DIR=/usr/hive/hive-1.2.1/apache-hive-1.2.1-bin/conf/
export     HADOOP_HOME=/usr/hadoop/hadoop-2.6.4/</code></pre><p><img src="https://img-blog.csdn.net/20180328152738198" alt=""></p><p><span style="color:#333333;">六、   </span><span style="color:#333333;background:#FFFFFF;">修改</span><span style="color:#333333;background:#FFFFFF;">hive-site.xml</span></p><p><span style="color:#333333;background:#FFFFFF;">将</span><span style="color:#333333;background:#FFFFFF;">hive-default.xml.template</span><span style="color:#333333;background:#FFFFFF;">拷贝</span><span style="color:#333333;background:#FFFFFF;">hive-site.xml</span></p><p><img src="https://img-blog.csdn.net/20180328152745433" alt=""></p><p>追加：（使用默认derby数据库）</p><pre><code class="language-html">&lt;property&gt;
         &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
         &lt;value&gt;jdbc:derby:;databaseName=metastore_db;create=true&lt;/value&gt;
         &lt;description&gt;JDBCconnect string for a JDBC metastore&lt;/description&gt;
    &lt;/property&gt;
     &lt;property&gt;
        &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
        &lt;value&gt;org.apache.derby.jdbc.EmbeddedDriver&lt;/value&gt;
        &lt;description&gt;Driver class name for aJDBC metastore&lt;/description&gt;
  &lt;/property&gt;
  &lt;property&gt;
       &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
       &lt;value&gt;APP&lt;/value&gt;
       &lt;description&gt;username to use againstmetastore database&lt;/description&gt;
  &lt;/property&gt;
  &lt;property&gt;
       &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
       &lt;value&gt;mine&lt;/value&gt;
       &lt;description&gt;password to use againstmetastore database&lt;/description&gt;
  &lt;/property&gt;</code></pre><p><img src="https://img-blog.csdn.net/20180328152813207" alt=""></p><p>七、      启动hive</p><p><img src="https://img-blog.csdn.net/20180328152819186" alt=""></p><p>八、  报错</p><p>            1.配置文件路径问题</p><p><img src="https://img-blog.csdn.net/20180328152829606" alt=""></p><p>                原因：hive-site.xml路径问题</p><p>                解决：更改三个value</p><p><img src="https://img-blog.csdn.net/20180328152837338" alt=""> </p><p>            2.jar包冲突问题</p><p><img src="https://img-blog.csdn.net/20180328152857318" alt=""></p><p>                原因：hive-1.2.1中jlin2的jar包版本比hadoop-2.6.4中的jline版本高。</p><p>                hadoop:jline-0.9.94.jar </p><p><img src="https://img-blog.csdn.net/20180328152931768" alt=""><br></p><p>                hive: jline-2.12.jar</p><p><img src="https://img-blog.csdn.net/20180328153000331" alt=""><br></p><p>                解决：将hadoop中的换成高级版本</p><p><img src="https://img-blog.csdn.net/20180328153020848" alt=""></p><p><img src="https://img-blog.csdn.net/20180328153044286" alt=""></p><p>九、  重新启动</p><p><img src="https://img-blog.csdn.net/20180328153058323" alt=""></p><p>十、      如果在安装hive之前已经安装了Spark</p><p>                会出现错误信息：</p><p><img src="https://img-blog.csdn.net/20180328153124381" alt=""><br></p><p>                不影响hive的启动。</p><p>                原因：</p><p>spark2以后，原有lib目录下的大JAR包被分散成多个小JAR包，原来的spark-assembly-*.jar已经不存在，所以hive没有办法找到这个JAR包。</p><p>                解决：</p><p>      进入hive安装目录下的bin目录，编辑bin目录下的hive文件。</p><p><img src="https://img-blog.csdn.net/20180328153148582" alt=""></p><p>                修改：</p><p><img src="https://img-blog.csdn.net/20180328153158554" alt=""></p><p>修改为：</p><pre><code class="language-html">sparkAssemblyPath=`ls ${SPARK_HOME}/jars/*.jar`</code></pre><p><img src="https://img-blog.csdn.net/20180328153213920" alt=""></p><p>十一、          再次启动</p><p><img src="https://img-blog.csdn.net/20180328153228620" alt=""></p><p>            没有jar的报错信息。</p><p>十二、    执行show tables;命令</p><p>            注意：必须以分号结尾（告诉hive立即执行该命令）</p><p>             和SQL一样，不区分大小写。</p><p><img src="https://img-blog.csdn.net/20180328153237439" alt=""></p><p>十三、    建立测试表test</p><pre><code class="language-html">create table test (key string);</code></pre><p><img src="https://img-blog.csdn.net/20180328153249483" alt=""></p><br>            </div>
                </div>