---
layout:     post
title:      flume遇见的一些问题
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/qq_32967001/article/details/66973094				</div>
								            <div id="content_views" class="markdown_views prism-atom-one-dark">
							<!-- flowchart 箭头图标 勿删 -->
							<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
							<p>我想要做的是需要将本地文件夹目录下的文件传输到hdfs上， <br>
1.首先，安装flume工具 <br>
2.配置flume的配置文件 <br>
flume]# ls <br>
bin  conf  docs  etc  lib  tools <br>
在conf的目录下创建一个配置文件fk <br>
flume]# cd conf/ <br>
[root@hdp-gp-dk01 conf]# ls <br>
agent  flume.conf                      flume-env.ps1          log4j.properties  test2  test4  test6 <br>
fk     flume-conf.properties.template  flume-env.sh.template <br>
3.配置文件内容如下：</p>

<pre class="prettyprint"><code class=" hljs avrasm">[root@hdp-gp-dk01 conf]<span class="hljs-preprocessor"># cat fk</span>
<span class="hljs-preprocessor"># example.conf: A single-node Flume configuration</span>

<span class="hljs-preprocessor"># Name the components on this agent</span>
a1<span class="hljs-preprocessor">.sources</span> = <span class="hljs-built_in">r1</span>
a1<span class="hljs-preprocessor">.sinks</span> = k1
a1<span class="hljs-preprocessor">.channels</span> = c1

<span class="hljs-preprocessor"># Describe/configure the source</span>
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.type</span> =spooldir 
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.spoolDir</span>=/opt/data/
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.ignorePattern</span> = ^(.)*\\<span class="hljs-preprocessor">.tmp</span>$

<span class="hljs-preprocessor"># Describe the sink</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.type</span>=hdfs 
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.path</span>=hdfs://<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">8020</span>/flume/data/%<span class="hljs-built_in">Y</span>-%m-%d-%H
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.rollSize</span>=<span class="hljs-number">10240000</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.rollInterval</span>=<span class="hljs-number">0</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.rollCount</span>=<span class="hljs-number">0</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.idleTimeout</span>=<span class="hljs-number">5</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.fileType</span>=DataStream


<span class="hljs-preprocessor"># Use a channel which buffers events in memory</span>
a1<span class="hljs-preprocessor">.channels</span><span class="hljs-preprocessor">.c</span>1<span class="hljs-preprocessor">.type</span> = memory
a1<span class="hljs-preprocessor">.channels</span><span class="hljs-preprocessor">.c</span>1<span class="hljs-preprocessor">.capacity</span> = <span class="hljs-number">1000</span>
a1<span class="hljs-preprocessor">.channels</span><span class="hljs-preprocessor">.c</span>1<span class="hljs-preprocessor">.transactionCapacity</span> = <span class="hljs-number">100</span>

<span class="hljs-preprocessor"># Bind the source and sink to the channel</span>
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.channels</span> = c1
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.channel</span> = c1 </code></pre>

<p>遇到的问题 <br>
1.ERROR flume.SinkRunner: Unable to deliver event. Exception follows. org.apache.flume.EventDeliveryException: java.lang.NullPointerException: Expected timestamp in the Flume event headers, but it was null <br>
这是HDFS sink  提示的异常，这是因为在hdfs路径中有时间参数，然后取event中的header的timestamp 参数，取不到提示的异常；所以解决方法是： <br>
    检查配置文件conf/fk 中是否用到了时间参数，去掉他们。 <br>
    2.就是agent老是会挂掉，报这个异常： <br>
 ERROR org.apache.flume.source.SpoolDirectorySource: FATAL: Spool Directory source source1: { spoolDir: /opt/data/ }: Uncaught exception in SpoolDirectorySource thread. Restart or reconfigure Flume to continue processing. <br>
　　java.nio.charset.MalformedInputException: Input length = 1 <br>
　　at java.nio.charset.CoderResult.throwException(CoderResult.java:277) <br>
　　at org.apache.flume.serialization.ResettableFileInputStream.readChar(ResettableFileInputStream.java:195) <br>
　　at org.apache.flume.serialization.LineDeserializer.readLine(LineDeserializer.java:134) <br>
　　at org.apache.flume.serialization.LineDeserializer.readEvent(LineDeserializer.java:72) <br>
　　at org.apache.flume.serialization.LineDeserializer.readEvents(LineDeserializer.java:91) <br>
　　at org.apache.flume.client.avro.ReliableSpoolingFileEventReader.readEvents(ReliableSpoolingFileEventReader.java:241) <br>
　　at org.apache.flume.source.SpoolDirectorySource<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-70-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-7246" style="width: 35.483em; display: inline-block;"><span style="display: inline-block; position: relative; width: 28.349em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(3.09em, 1000em, 5.845em, -0.48em); top: -4em; left: 0em;"><span class="mrow" id="MathJax-Span-7247"><span style="display: inline-block; position: relative; width: 28.349em; height: 0px;"><span style="position: absolute; clip: rect(3.09em, 1000em, 4.41em, -0.428em); top: -4em; left: 0em;"><span class="mi" id="MathJax-Span-7248" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-7249" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-7250" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7251" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7252" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7253" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mi" id="MathJax-Span-7254" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-7255" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7256" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7257" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7258" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7259" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7260" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7261" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-7262" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mi" id="MathJax-Span-7263" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7264" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-7265" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-7266" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7267" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-7268" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7269" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-7270" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7271" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">r</span><span class="mi" id="MathJax-Span-7272" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7273" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-7274" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-7275" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-7276" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-7277" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7278" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7279" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7280" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mi" id="MathJax-Span-7281" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-7282" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7283" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7284" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7285" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7286" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7287" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7288" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-7289" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-7290" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7291" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7292" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7293" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7294" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-7295" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7296" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">j</span><span class="mi" id="MathJax-Span-7297" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7298" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-7299" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-7300" style="font-family: MathJax_Main; padding-left: 0.278em;">:</span><span class="mn" id="MathJax-Span-7301" style="font-family: MathJax_Main; padding-left: 0.278em;">224</span><span class="mo" id="MathJax-Span-7302" style="font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 4em;"></span></span><span style="position: absolute; clip: rect(3.04em, 1000em, 4.364em, -0.48em); top: -2.519em; left: 0em;"><span class="texatom" id="MathJax-Span-7303"><span class="mrow" id="MathJax-Span-7304"><span class="mo" id="MathJax-Span-7305"><span style='font-family: STIXGeneral,"Arial Unicode MS",serif; font-size: 80%; font-style: normal; font-weight: normal;'>　</span></span></span></span><span class="texatom" id="MathJax-Span-7306"><span class="mrow" id="MathJax-Span-7307"><span class="mo" id="MathJax-Span-7308"><span style='font-family: STIXGeneral,"Arial Unicode MS",serif; font-size: 80%; font-style: normal; font-weight: normal;'>　</span></span></span></span><span class="mi" id="MathJax-Span-7309" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7310" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7311" style="font-family: MathJax_Math; font-style: italic;">j</span><span class="mi" id="MathJax-Span-7312" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7313" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-7314" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-7315" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7316" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">u</span><span class="mi" id="MathJax-Span-7317" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7318" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-7319" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mo" id="MathJax-Span-7320" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7321" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">c</span><span class="mi" id="MathJax-Span-7322" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7323" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-7324" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7325" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7326" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7327" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7328" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7329" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-7330" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-7331" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7332" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-7333" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-7334" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7335" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7336" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7337" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7338" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7339" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7340" style="font-family: MathJax_Math; font-style: italic;">s</span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 3.177em; vertical-align: -2.172em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-70">SpoolDirectoryRunnable.run(SpoolDirectorySource.java:224)  
　　at java.util.concurrent.Executors</script>RunnableAdapter.call(Executors.java:471) <br>
　　at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:304) <br>
　　at java.util.concurrent.ScheduledThreadPoolExecutor<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-71-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-7341" style="width: 16.417em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.12em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.962em, 1000em, 3.009em, -0.428em); top: -2.827em; left: 0em;"><span class="mrow" id="MathJax-Span-7342"><span class="mi" id="MathJax-Span-7343" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-7344" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7345" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mi" id="MathJax-Span-7346" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7347" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7348" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7349" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7350" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7351" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7352" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mi" id="MathJax-Span-7353" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7354" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7355" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7356" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7357" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7358" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mi" id="MathJax-Span-7359" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7360" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-7361" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mo" id="MathJax-Span-7362" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7363" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">a</span><span class="mi" id="MathJax-Span-7364" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7365" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7366" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7367" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-7368" style="font-family: MathJax_Math; font-style: italic;">s</span></span><span style="display: inline-block; width: 0px; height: 2.827em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.042em; vertical-align: -0.094em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-71">ScheduledFutureTask.access</script>301(ScheduledThreadPoolExecutor.java:178) <br>
　　at java.util.concurrent.ScheduledThreadPoolExecutor<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-72-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-7369" style="width: 35.817em; display: inline-block;"><span style="display: inline-block; position: relative; width: 28.627em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(5.17em, 1000em, 10.587em, -0.428em); top: -6.08em; left: 0em;"><span class="mrow" id="MathJax-Span-7370"><span style="display: inline-block; position: relative; width: 28.627em; height: 0px;"><span style="position: absolute; clip: rect(3.09em, 1000em, 4.41em, -0.428em); top: -4em; left: 0em;"><span class="mi" id="MathJax-Span-7371" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-7372" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7373" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mi" id="MathJax-Span-7374" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7375" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7376" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7377" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7378" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7379" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7380" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mi" id="MathJax-Span-7381" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7382" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7383" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7384" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7385" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7386" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mi" id="MathJax-Span-7387" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7388" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-7389" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mo" id="MathJax-Span-7390" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7391" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">r</span><span class="mi" id="MathJax-Span-7392" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7393" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-7394" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-7395" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-7396" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7397" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mi" id="MathJax-Span-7398" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7399" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7400" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7401" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7402" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7403" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7404" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mi" id="MathJax-Span-7405" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mi" id="MathJax-Span-7406" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7407" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7408" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7409" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7410" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-7411" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7412" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7413" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7414" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-7415" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-7416" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7417" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7418" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7419" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7420" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7421" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-7422" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7423" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">j</span><span class="mi" id="MathJax-Span-7424" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7425" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-7426" style="font-family: MathJax_Math; font-style: italic;">a</span><span style="display: inline-block; width: 0px; height: 4em;"></span></span><span style="position: absolute; clip: rect(3.04em, 1000em, 4.41em, -0.402em); top: -2.519em; left: 0em;"><span class="mo" id="MathJax-Span-7427" style="font-family: MathJax_Main;">:</span><span class="mn" id="MathJax-Span-7428" style="font-family: MathJax_Main; padding-left: 0.278em;">293</span><span class="mo" id="MathJax-Span-7429" style="font-family: MathJax_Main;">)</span><span class="texatom" id="MathJax-Span-7430"><span class="mrow" id="MathJax-Span-7431"><span class="mo" id="MathJax-Span-7432"><span style='font-family: STIXGeneral,"Arial Unicode MS",serif; font-size: 80%; font-style: normal; font-weight: normal;'>　</span></span></span></span><span class="texatom" id="MathJax-Span-7433"><span class="mrow" id="MathJax-Span-7434"><span class="mo" id="MathJax-Span-7435"><span style='font-family: STIXGeneral,"Arial Unicode MS",serif; font-size: 80%; font-style: normal; font-weight: normal;'>　</span></span></span></span><span class="mi" id="MathJax-Span-7436" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7437" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7438" style="font-family: MathJax_Math; font-style: italic;">j</span><span class="mi" id="MathJax-Span-7439" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7440" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-7441" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-7442" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7443" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">u</span><span class="mi" id="MathJax-Span-7444" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7445" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-7446" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mo" id="MathJax-Span-7447" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7448" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">c</span><span class="mi" id="MathJax-Span-7449" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7450" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-7451" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7452" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7453" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7454" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7455" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7456" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-7457" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-7458" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7459" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mi" id="MathJax-Span-7460" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mi" id="MathJax-Span-7461" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7462" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7463" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7464" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7465" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-7466" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7467" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7468" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7469" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-7470" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-7471" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7472" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7473" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7474" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7475" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7476" style="font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 4em;"></span></span><span style="position: absolute; clip: rect(3.04em, 1000em, 4.41em, -0.402em); top: -1.039em; left: 0em;"><span class="mo" id="MathJax-Span-7477" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7478" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">r</span><span class="mi" id="MathJax-Span-7479" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7480" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-7481" style="font-family: MathJax_Math; font-style: italic;">W<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.104em;"></span></span><span class="mi" id="MathJax-Span-7482" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7483" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7484" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mi" id="MathJax-Span-7485" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7486" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-7487" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-7488" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mi" id="MathJax-Span-7489" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mi" id="MathJax-Span-7490" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7491" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7492" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7493" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7494" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-7495" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7496" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7497" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7498" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-7499" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-7500" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7501" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7502" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7503" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7504" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7505" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mo" id="MathJax-Span-7506" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7507" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">j</span><span class="mi" id="MathJax-Span-7508" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7509" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-7510" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-7511" style="font-family: MathJax_Main; padding-left: 0.278em;">:</span><span class="mn" id="MathJax-Span-7512" style="font-family: MathJax_Main; padding-left: 0.278em;">1145</span><span class="mo" id="MathJax-Span-7513" style="font-family: MathJax_Main;">)</span><span class="texatom" id="MathJax-Span-7514"><span class="mrow" id="MathJax-Span-7515"><span class="mo" id="MathJax-Span-7516"><span style='font-family: STIXGeneral,"Arial Unicode MS",serif; font-size: 80%; font-style: normal; font-weight: normal;'>　</span></span></span></span><span class="texatom" id="MathJax-Span-7517"><span class="mrow" id="MathJax-Span-7518"><span class="mo" id="MathJax-Span-7519"><span style='font-family: STIXGeneral,"Arial Unicode MS",serif; font-size: 80%; font-style: normal; font-weight: normal;'>　</span></span></span></span><span class="mi" id="MathJax-Span-7520" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7521" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7522" style="font-family: MathJax_Math; font-style: italic;">j</span><span class="mi" id="MathJax-Span-7523" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7524" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-7525" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-7526" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7527" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">u</span><span class="mi" id="MathJax-Span-7528" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7529" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-7530" style="font-family: MathJax_Math; font-style: italic;">l</span><span style="display: inline-block; width: 0px; height: 4em;"></span></span><span style="position: absolute; clip: rect(3.146em, 1000em, 4.171em, -0.402em); top: 0.336em; left: 0em;"><span class="mo" id="MathJax-Span-7531" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7532" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">c</span><span class="mi" id="MathJax-Span-7533" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7534" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-7535" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7536" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7537" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7538" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7539" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7540" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-7541" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-7542" style="font-family: MathJax_Main;">.</span><span class="mi" id="MathJax-Span-7543" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mi" id="MathJax-Span-7544" style="font-family: MathJax_Math; font-style: italic;">h</span><span class="mi" id="MathJax-Span-7545" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-7546" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7547" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-7548" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-7549" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-7550" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7551" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7552" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-7553" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-7554" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-7555" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-7556" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-7557" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-7558" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-7559" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-7560" style="font-family: MathJax_Math; font-style: italic;">r</span><span style="display: inline-block; width: 0px; height: 4em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 6.08em;"></span></span></span><span style="border-left: 0em solid; display: inline-block; overflow: hidden; width: 0px; height: 6.504em; vertical-align: -5.5em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-72">ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)  
　　at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)  
　　at java.util.concurrent.ThreadPoolExecutor</script>Worker.run(ThreadPoolExecutor.java:615) <br>
　　at java.lang.Thread.run(Thread.java:745)</p>

<p>解决办法：原因的inputCharset属性的默认值UTF-8,但是所读取的日志文件的字符集却是GBK,所以更改一下这个属性值就可以了</p>

<pre class="prettyprint"><code class=" hljs avrasm">[root@hdp-gp-dk01 conf]<span class="hljs-preprocessor"># cat fk</span>
<span class="hljs-preprocessor"># example.conf: A single-node Flume configuration</span>

<span class="hljs-preprocessor"># Name the components on this agent</span>
a1<span class="hljs-preprocessor">.sources</span> = <span class="hljs-built_in">r1</span>
a1<span class="hljs-preprocessor">.sinks</span> = k1
a1<span class="hljs-preprocessor">.channels</span> = c1

<span class="hljs-preprocessor"># Describe/configure the source</span>
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.type</span> =spooldir 
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.spoolDir</span>=/opt/data/
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.inputCharset</span> = GBK
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.ignorePattern</span> = ^(.)*\\<span class="hljs-preprocessor">.tmp</span>$

<span class="hljs-preprocessor"># Describe the sink</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.type</span>=hdfs 
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.path</span>=hdfs://<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">8020</span>/flume/data/test
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.rollSize</span>=<span class="hljs-number">10240000</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.rollInterval</span>=<span class="hljs-number">0</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.rollCount</span>=<span class="hljs-number">0</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.idleTimeout</span>=<span class="hljs-number">5</span>
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.hdfs</span><span class="hljs-preprocessor">.fileType</span>=DataStream


<span class="hljs-preprocessor"># Use a channel which buffers events in memory</span>
a1<span class="hljs-preprocessor">.channels</span><span class="hljs-preprocessor">.c</span>1<span class="hljs-preprocessor">.type</span> = memory
a1<span class="hljs-preprocessor">.channels</span><span class="hljs-preprocessor">.c</span>1<span class="hljs-preprocessor">.capacity</span> = <span class="hljs-number">1000</span>
a1<span class="hljs-preprocessor">.channels</span><span class="hljs-preprocessor">.c</span>1<span class="hljs-preprocessor">.transactionCapacity</span> = <span class="hljs-number">100</span>

<span class="hljs-preprocessor"># Bind the source and sink to the channel</span>
a1<span class="hljs-preprocessor">.sources</span><span class="hljs-preprocessor">.r</span>1<span class="hljs-preprocessor">.channels</span> = c1
a1<span class="hljs-preprocessor">.sinks</span><span class="hljs-preprocessor">.k</span>1<span class="hljs-preprocessor">.channel</span> = c1 </code></pre>

<p>添加：a1.sources.r1.inputCharset = GBK</p>            </div>
						<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-9e5741c4b9.css" rel="stylesheet">
                </div>