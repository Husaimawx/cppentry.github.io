---
layout:     post
title:      使用python的hdfs包操作分布式文件系统（HDFS）
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：【http://thinkgamer.cn】					https://blog.csdn.net/Gamer_gyt/article/details/52446757				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p><span style="font-family:'Microsoft YaHei';font-size:14px;"></span></p><p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;"><span style="font-size:14px;"><span style="font-family:'FangSong_GB2312';">转载请注明出处：@<a href="http://blog.csdn.net/gamer_gyt" rel="nofollow" style="text-decoration:none;color:rgb(12,137,207);">http://blog.csdn.net/gamer_gyt</a>，Thinkagmer 撰写</span></span></p><p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;"><span style="font-family:'FangSong_GB2312';font-size:14px;">博主微博：</span><a href="http://weibo.com/234654758" rel="nofollow" style="font-family:'FangSong_GB2312';font-size:14px;text-decoration:none;color:rgb(12,137,207);">http://weibo.com/234654758</a><span style="font-family:'FangSong_GB2312';font-size:14px;"> （欢迎互撩）</span></p><p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;"><span style="font-size:14px;"><span style="font-family:'FangSong_GB2312';">Github：<a href="https://github.com/thinkgamer" rel="nofollow" style="text-decoration:none;color:rgb(12,137,207);">https://github.com/thinkgamer</a></span></span></p><p style="color:rgb(85,85,85);font-family:'microsoft yahei';font-size:15px;line-height:35px;"><span style="font-size:14px;">=====================================================================================</span></p><h1><span style="font-family:'Microsoft YaHei';"><span style="font-size:18px;">写在前边的话：</span></span></h1><p><span style="font-family:'Microsoft YaHei';font-size:14px;">        之前做的hadoop集群，组合了hive，hbase，sqoop，spark等开源工具，现在要对他们做一个Web的可视化操作，由于本小白只懂如何使用python做一个交互的web应用，所以这里就选择了Python的Django</span></p><p><span style="font-family:'Microsoft YaHei';font-size:14px;">        Django教程参考：<a href="http://blog.csdn.net/Gamer_gyt/article/category/5996523" rel="nofollow">Django从manage.py shell 到项目部署</a></span></p><p><span style="font-family:'Microsoft YaHei';font-size:14px;">        hadoop集群操作请参考：<a href="http://blog.csdn.net/gamer_gyt/article/details/51991893" rel="nofollow">三台PC服务器部署高可用hadoop集群</a></span></p><p><span style="font-family:'Microsoft YaHei';font-size:14px;"><br></span></p><p><span style="font-family:'Microsoft YaHei';font-size:14px;">言归正传：</span></p><p><span style="font-family:'Microsoft YaHei';font-size:14px;">       使用python操作hdfs本身并不难，只不过是把对应的shell 功能“翻译”成高级语言，网上大部分使用的是</span></p><p><span style="font-family:'Microsoft YaHei';font-size:14px;">       pyhdfs：<a href="http://pyhdfs.readthedocs.io/en/latest/" rel="nofollow">官方文档</a></span></p><p><span style="font-family:'Microsoft YaHei';font-size:14px;">       hdfs：<a href="https://hdfscli.readthedocs.io/en/latest/index.html" rel="nofollow">官方文档</a></span></p><p><span style="font-family:'Microsoft YaHei';font-size:14px;">       libhdfs（比较狗血）</span></p><p><span style="font-family:'Microsoft YaHei';font-size:14px;">       我这里选用的是hdfs，下边的实例都是基于hdfs包进行的</span></p><h1><span style="font-family:'Microsoft YaHei';"><span style="font-size:18px;">1：安装</span></span></h1><p><span style="font-family:'Microsoft YaHei';font-size:14px;">      由于我的是windows环境（linux其实也一样），只要有pip或者setup_install安装起来都是很方便的</span></p><pre><code class="language-plain">     pip install hdfs</code></pre><h1><span style="font-size:18px;">2：Client——创建集群连接</span></h1><p></p><p></p><pre><code class="language-python">&gt;&gt;&gt; from hdfs import *
&gt;&gt;&gt; client = Client("http://127.0.0.1:50070")</code></pre><p>       其他参数说明：</p><p>       <span class="property" style="display:inline-block;color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">class</span><code class="descclassname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">hdfs.client.</code><code class="descname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">Client</code><span class="sig-paren" style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">(</span><span style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>url</strong></span><span style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(231,242,250);"><strong>, </strong></span><span style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>root=None</strong></span><span style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(231,242,250);"><strong>, </strong></span><span style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>proxy=None</strong></span><span style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(231,242,250);"><strong>, </strong></span><span style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>timeout=None</strong></span><span style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(231,242,250);"><strong>, </strong></span><span style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>session=None</strong></span><span class="sig-paren" style="color:rgb(41,128,185);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">)</span></p><p>                    url：ip：端口</p><p>                    root：制定的hdfs根目录</p><p>                    proxy：制定登陆的用户身份</p><p>                    timeout：设置的超时时间</p><p>                    seesion：requests.Session instance, used to emit all requests.（不是太懂，应该四用户发出请求）</p><p>       这里我们着重看一下proxy这个，首先我们指定root用户连接</p><pre><code class="language-html">&gt;&gt;&gt; client = Client("http://127.0.0.1:50070",root="/",timeout=100,session=False)
&gt;&gt;&gt; client.list("/")
[u'hbase']
</code></pre>       看起来一切正常的样子，接下来我们指定一个别的用户，比如说gamer再看<pre><code class="language-html">&gt;&gt;&gt; client = Client("http://127.0.0.1:50070",root="/",proxy="gamer",timeout=100,session=False)
&gt;&gt;&gt; client.list("/")
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/local/lib/python2.7/dist-packages/hdfs/client.py", line 893, in list
    statuses = self._list_status(hdfs_path).json()['FileStatuses']['FileStatus']
  File "/usr/local/lib/python2.7/dist-packages/hdfs/client.py", line 92, in api_handler
    **self.kwargs
  File "/usr/local/lib/python2.7/dist-packages/hdfs/client.py", line 181, in _request
    return _on_error(response)
  File "/usr/local/lib/python2.7/dist-packages/hdfs/client.py", line 44, in _on_error
    raise HdfsError(message)
hdfs.util.HdfsError: Failed to obtain user group information: org.apache.hadoop.security.authorize.AuthorizationException: User: dr.who is not allowed to impersonate gamer
</code></pre>       这时候就抛出异常了<p></p><h1><span style="font-size:18px;">3：dir——查看支持的方法</span></h1><pre><code class="language-python">&gt;&gt;&gt; dir(client)
['__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', 
'__hash__', '__init__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__registry__',
 '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_append', '_create', '_delete',
 '_get_content_summary', '_get_file_checksum', '_get_file_status', '_get_home_directory', '_list_status', '_mkdirs', '_open',
 '_proxy', '_rename', '_request', '_session', '_set_owner', '_set_permission', '_set_replication', '_set_times', '_timeout', 
'checksum', 'content', 'delete', 'download', 'from_options', 'list', 'makedirs', 'parts', 'read', 'rename', 'resolve', 'root',
 'set_owner', 'set_permission', 'set_replication', 'set_times', 'status', 'upload',
 'url', 'walk', 'write']</code></pre><h1><span style="font-size:18px;">4：status——获取路径的具体信息</span></h1><p></p><pre><code class="language-python">&gt;&gt;&gt; client.status("/")
{'accessTime': 0, 'pathSuffix': '', 'group': 'supergroup', 'type': 'DIRECTORY', 'owner': 'root', 'childrenNum': 4, 'blockSize': 0,
 'fileId': 16385, 'length': 0, 'replication': 0, 'storagePolicy': 0, 'modificationTime': 1473023149031, 'permission': '777'}</code></pre><p>      其他参数：<code class="descname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">status</code><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">(</span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>hdfs_path</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>strict=True</strong></span><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">)</span></p><p>               hdfs_path：就是hdfs路径</p><p>               strict：设置为True时，如果hdfs_path路径不存在就会抛出异常，如果设置为False，如果路径为不存在，则返回None</p><pre><code class="language-python">&gt;&gt;&gt; client = Client("http://127.0.0.1:50070",root="/",timeout=100,session=False)
&gt;&gt;&gt; client.status("/gamer",strict=True)
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "/usr/local/lib/python2.7/dist-packages/hdfs/client.py", line 277, in status
    res = self._get_file_status(hdfs_path, strict=strict)
  File "/usr/local/lib/python2.7/dist-packages/hdfs/client.py", line 92, in api_handler
    **self.kwargs
  File "/usr/local/lib/python2.7/dist-packages/hdfs/client.py", line 181, in _request
    return _on_error(response)
  File "/usr/local/lib/python2.7/dist-packages/hdfs/client.py", line 44, in _on_error
    raise HdfsError(message)
hdfs.util.HdfsError: File does not exist: /gamer
&gt;&gt;&gt; client.status("/gamer",strict=False)
&gt;&gt;&gt;</code></pre>      从例子中可以看出，当设置为false时，路径不存在，什么也不输出<p></p><h1><span style="font-size:18px;">5：list——获取指定路径的子目录信息</span></h1><pre><code class="language-python">&gt;&gt;&gt; client.list("/")
['file', 'gyt', 'hbase', 'tmp']</code></pre><p>     其他参数：<code class="descname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">list</code><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">(</span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>hdfs_path</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>status=False</strong></span><span class="sig-paren" style="font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;"><span style="color:#555555;"><span style="font-size:14.4px;"><strong>)</strong></span></span><br></span></p><p>              status：为True时，也返回子目录的状态信息，默认为Flase</p><pre><code class="language-python">&gt;&gt;&gt; client.list("/")
[u'hbase']
&gt;&gt;&gt; client.list("/",status=False)
[u'hbase']
&gt;&gt;&gt; client.list("/",status=True)
[(u'hbase', {u'group': u'supergroup', u'permission': u'755', u'blockSize': 0, u'accessTime': 0, u'pathSuffix': u'hbase', u'modificationTime': 1472986624167, u'replication': 0, u'length': 0, u'childrenNum': 7, u'owner': u'root', u'storagePolicy': 0, u'type': u'DIRECTORY', u'fileId': 16386})]
&gt;&gt;&gt; </code></pre><p></p><h1><span style="font-size:18px;">6：makedirs——创建目录</span></h1><p></p><pre><code class="language-python">&gt;&gt;&gt; client.makedirs("/test")
&gt;&gt;&gt; client.list("/")
['file', 'gyt', 'hbase', 'test', 'tmp']
&gt;&gt;&gt; client.status("/test")
{'accessTime': 0, 'pathSuffix': '', 'group': 'supergroup', 'type': 'DIRECTORY', 'owner': 'dr.who', 'childrenNum': 0, 'blockSize': 0,
 'fileId': 16493, 'length': 0, 'replication': 0, 'storagePolicy': 0, 'modificationTime': 1473096896947, 'permission': '755'}
</code></pre><p>       其他参数：<code class="descname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">makedirs</code><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">(</span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>hdfs_path</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>permission=None</strong></span><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">)</span></p><p>                permission：设置权限</p><pre><code class="language-python">&gt;&gt;&gt; client.makedirs("/test",permission=777)
&gt;&gt;&gt; client.status("/test")
{u'group': u'supergroup', u'permission': u'777', u'blockSize': 0, u'accessTime': 0, u'pathSuffix': u'', u'modificationTime': 1473175557340, u'replication': 0, u'length': 0, u'childrenNum': 0, u'owner': u'dr.who', u'storagePolicy': 0, u'type': u'DIRECTORY', u'fileId': 16437}
</code></pre>       可以看出该文件夹的权限是777<p></p><h1><span style="font-size:18px;">7：rename—重命名</span></h1><pre><code class="language-python">&gt;&gt;&gt; client.rename("/test","/new_name")
&gt;&gt;&gt; client.list("/")
['file', 'gyt', 'hbase', 'new_name', 'tmp']</code></pre><p>       格式说明：<code class="descname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">rename</code><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">(</span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>hdfs_path</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, local</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>_path）</strong></span></p><h1><span style="font-size:18px;">8：delete—删除</span></h1><pre><code class="language-python">&gt;&gt;&gt; client.list("/")
['file', 'gyt', 'hbase', 'new_name', 'tmp']
&gt;&gt;&gt; client.delete("/new_name")
True
&gt;&gt;&gt; client.list("/")
['file', 'gyt', 'hbase', 'tmp']</code></pre><p>      其他参数：<code class="descname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">delete</code><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">(</span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>hdfs_path</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>recursive=False</strong></span><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">)</span></p><p>               recursive：删除文件和其子目录，设置为False如果不存在，则会抛出异常，默认为False</p><pre><code class="language-python">&gt;&gt;&gt; client.delete("/test",recursive=True)
True
&gt;&gt;&gt; client.delete("/test",recursive=True)
False
&gt;&gt;&gt; client.delete("/test")
False</code></pre><p></p><h1><span style="font-size:18px;">9：upload——上传数据</span></h1><p>=======================分割线==========================</p><p>为什么这里需要分割线？因为在做web平台可视化操作hdfs的时候遇到了问题！错误如下：</p><pre><code class="language-python">requests.exceptions.ConnectionError: HTTPConnectionPool(host='slaver1', port=50075): Max retries exceeded with url:
 /webhdfs/v1/thinkgamer/name.txt?op=OPEN&amp;namenoderpcaddress=master&amp;offset=0 (Caused by NewConnectionError
('&lt;requests.packages.urllib3.connection.HTTPConnection object at 0x00000000043A3FD0&gt;: Failed to establish a new connection:
 [Errno 11004] getaddrinfo failed',))</code></pre><p></p><p>对错误的理解：看其大意是Http连接太多，没有及时关闭，导致错误 （PS：网上对hdfs操作的资料比较少，大部分都只停留在基础语法层面，但对于错误的记录及解决办法少之又少）</p><p>解决办法：暂无</p><p>由于我是在windows上操作集群的，而我的集群是在服务器上部署的，所以我考虑是否在服务器上尝试下载和上传数据，果断ok</p><p></p><pre><code class="language-python">&gt;&gt;&gt; client.list("/")
[u'hbase', u'test']
&gt;&gt;&gt; client.upload("/test","/opt/bigdata/hadoop/NOTICE.txt")
'/test/NOTICE.txt'
&gt;&gt;&gt; client.list("/")
[u'hbase', u'test']
&gt;&gt;&gt; client.list("/test")
[u'NOTICE.txt']
</code></pre>       其他参数：<code class="descname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">upload</code><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">(</span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>hdfs_path</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>local_path</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>overwrite=False</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>n_threads=1</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>temp_dir=None</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><p></p><p><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>                                 chunk_size=65536</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>,</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>progress=None</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>cleanup=True</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>**kwargs</strong></span><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">)</span></p><p>               overwrite：是否是覆盖性上传文件</p><p>               n_threads：启动的线程数目</p><p>               temp_dir：当overwrite=true时，远程文件一旦存在，则会在上传完之后进行交换</p><p>               chunk_size：文件上传的大小区间</p><p>               progress：回调函数来跟踪进度，为每一chunk_size字节。它将传递两个参数，文件上传的路径和传输的字节数。一旦完成，-1将作为第二个参数</p><p>               cleanup：如果在上传任何文件时发生错误，则删除该文件</p><h1><span style="font-size:18px;">10：download——下载</span></h1><p></p><pre><code class="language-python">&gt;&gt;&gt; client.download("/test/NOTICE.txt","/home")
'/home/NOTICE.txt'
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.system("ls /home")
lost+found  NOTICE.txt	thinkgamer
0
&gt;&gt;&gt; 
</code></pre>      其他参数：<code class="descname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">download</code><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">(</span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>hdfs_path</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>local_path</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>overwrite=False</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>n_threads=1</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>temp_dir=None</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>**kwargs</strong></span><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">)</span><br>              参考上传 upload<p></p><h1><span style="font-size:18px;">11：read——读取文件</span></h1><p>    同样在windows客户端上执行依旧报错，在hadoop的节点服务器上执行</p><pre><code class="language-python"></code></pre><pre class="python">&gt;&gt;&gt; with client.read("/test/NOTICE.txt") as reader:
...     print reader.read()
... 
This product includes software developed by The Apache Software
Foundation (http://www.apache.org/).
<span style="font-family:Arial, Helvetica, sans-serif;">
&gt;&gt;&gt;</span>
</pre>     其他参数：<code class="descname" style="font-family:Consolas, 'Andale Mono WT', 'Andale Mono', 'Lucida Console', 'Lucida Sans Typewriter', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Liberation Mono', 'Nimbus Mono L', Monaco, 'Courier New', Courier, monospace;font-size:14.4px;border:none;font-weight:bold;background:transparent;">read</code><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">(</span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>*args</strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;background-color:rgb(240,240,240);"><strong>, </strong></span><span style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;"><strong>**kwds</strong></span><span class="sig-paren" style="color:rgb(85,85,85);font-family:Lato, 'proxima-nova', 'Helvetica Neue', Arial, sans-serif;font-size:14.4px;font-weight:bold;">)</span><br><p>              hdfs_path：hdfs路径</p><p>              offset：设置开始的字节位置</p><p>              length：读取的长度（字节为单位）</p><p>              buffer_size：用于传输数据的字节的缓冲区的大小。默认值设置在HDFS配置。</p><p>              encoding：制定编码</p><p>              chunk_size：如果设置为正数，上下文管理器将返回一个发生器产生的每一chunk_size字节而不是一个类似文件的对象</p><p>              delimiter：如果设置，上下文管理器将返回一个发生器产生每次遇到分隔符。此参数要求指定的编码。</p><p>              progress：回调函数来跟踪进度，为每一chunk_size字节（不可用，如果块大小不是指定）。它将传递两个参数，文件上传的路径和传输的字节数。称为一次与- 1作为第二个参数。</p><p><br></p><p>附：在对文件操作时，可能会提示错误</p><pre><code class="language-python">hdfs.util.HdfsError: Permission denied: user=dr.who, access=WRITE, inode="/test":root:supergroup:drwxr-xr-x</code></pre>        解决办法是：在配置文件hdfs-site.xml中加入<pre><code class="language-python">&lt;property&gt;
  &lt;name&gt;dfs.permissions&lt;/name&gt;
  &lt;value&gt;false&lt;/value&gt;
&lt;/property&gt;</code></pre>        重启集群即可<p></p><p>基本常用的功能也就这些了，如果需要一些特殊的功能，可以自己执行help(client.method)进行查看</p><br>            </div>
                </div>