---
layout:     post
title:      kafka基本命令使用
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/wild46cat/article/details/72860760				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <h1>kafka基本命令使用</h1><div><span style="font-family:'Microsoft YaHei';font-size:18px;">本文主要参考：http://kafka.apache.org/quickstart</span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;">最近开始接触kafka，下面介绍介绍一些最基本的kafka 的操作。</span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;">首先是启动kafka。kafka依赖zookeeper，所以需要先启动zookeeper。</span></div><div><br></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"></span><pre><code class="language-plain">bin/zookeeper-server-start.sh config/zookeeper.properties</code></pre><br></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;">然后启动kafka：</span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"></span><pre><code class="language-plain">bin/kafka-server-start.sh config/server.properties</code></pre><div><br></div>./kafka-server-start.sh -daemon ../config/server.properties<br>下面介绍在kafka中如何创建topic，查看topic以及消费topic。</div><div><span style="font-family:'Microsoft YaHei';font-size:18px;">1、查看topic</span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"></span><pre><code class="language-plain">kafka-topics --list --zookeeper cdh4:2181,cdh5:2181,cdh6:2181</code></pre><br><img src="https://img-blog.csdn.net/20170604191925616?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2lsZDQ2Y2F0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;">2、创建一个topic</span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"></span><pre><code class="language-plain">kafka-topics --create --zookeeper cdh4:2181,cdh5:2181,cdh6:2181 --replication-factor 1 --partitions 1 --topic test</code></pre><br><br></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"><img src="https://img-blog.csdn.net/20170604191957210?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2lsZDQ2Y2F0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br></span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;">3、向topic中添加内容：</span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"></span><pre><code class="language-plain">kafka-console-producer --broker-list cdh4:9002,cdh5:9092,cdh6:9092 --topic test</code></pre><img src="https://img-blog.csdn.net/20170604192452727?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2lsZDQ2Y2F0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br><br></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;">4、消费指定的topic：</span></div><div><span style="font-family:'Microsoft YaHei';font-size:18px;"></span><pre><code class="language-plain">kafka-console-consumer --zookeeper cdh4:2181,cdh5:2181,cdh6:2181 --topic test --from-beginning</code></pre><pre><code class="language-plain">kafka-console-consumer --bootstrap-server cdh4:9092,cdh5:9092:cdh6:9092 --topic test --from-beginning</code></pre><img src="https://img-blog.csdn.net/20170604192628729?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvd2lsZDQ2Y2F0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br><br></div><div><span style="font-family:'Microsoft YaHei';"><span style="font-size:18px;">5、查看堆积情况</span></span></div><pre><code class="language-plain">./kafka-run-class.sh kafka.tools.ConsumerOffsetChecker -group myconsumergroup -topic mytopic -zookeeper localhost:2181</code></pre><br><p></p><div><span style="font-family:'Microsoft YaHei';font-size:18px;"><br></span></div><div></div>            </div>
                </div>