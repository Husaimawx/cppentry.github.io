---
layout:     post
title:      hive用mysql保存元数据（metadata）
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/houzhizhen/article/details/44080197				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<strong>1.在mysql专门为hive添加用户</strong><br><div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码  <a title="收藏这段代码"><img class="star" src="http://running.iteye.com/images/icon_star.png" alt="收藏代码"></a></div>
</div>
<ol class="dp-j" start="1"><li><span><span>mysql&gt; CREATE USER </span><span class="string">'hive'</span><span>@</span><span class="string">'%'</span><span> IDENTIFIED BY </span><span class="string">'hive'</span><span>;  </span></span></li><li><span>mysql&gt; GRANT ALL PRIVILEGES ON *.* TO <span class="string">'hive'</span><span>@</span><span class="string">'%'</span><span> WITH GRANT OPTION;  </span></span></li></ol></div>
<br><br><strong>2.修改配置文件conf/hive-site.xml</strong><br><div class="dp-highlighter">
<div class="bar">
<div class="tools">Xml代码  <a title="收藏这段代码"><img class="star" src="http://running.iteye.com/images/icon_star.png" alt="收藏代码"></a></div>
</div>
<ol class="dp-xml" start="1"><li><span><span class="tag">&lt;</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>hive.metastore.local</span><span class="tag">&lt;/</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>true</span><span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>controls whether to connect to remove metastore server or open a new metastore server in Hive Client JVM</span><span class="tag">&lt;/</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>  </span></span></li><li><span><span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>  </span></span></li><li><span><span class="tag">&lt;</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>javax.jdo.option.ConnectionURL</span><span class="tag">&lt;/</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>jdbc:mysql://hive-mysql:3306/hive?</span><span class="attribute">createDatabaseIfNotExist</span><span>=</span><span class="attribute-value">true</span><span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>JDBC connect string for a JDBC metastore</span><span class="tag">&lt;/</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>  </span></span></li><li><span><span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>  </span></span></li><li><span><span class="tag">&lt;</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>javax.jdo.option.ConnectionDriverName</span><span class="tag">&lt;/</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>com.mysql.jdbc.Driver</span><span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>Driver class name for a JDBC metastore</span><span class="tag">&lt;/</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>  </span></span></li><li><span><span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>  </span></span></li><li><span><span class="tag">&lt;</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>javax.jdo.option.ConnectionUserName</span><span class="tag">&lt;/</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>hive</span><span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>username to use against metastore database</span><span class="tag">&lt;/</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>  </span></span></li><li><span><span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>  </span></span></li><li><span><span class="tag">&lt;</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>javax.jdo.option.ConnectionPassword</span><span class="tag">&lt;/</span><span class="tag-name">name</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>hivepasswd</span><span class="tag">&lt;/</span><span class="tag-name">value</span><span class="tag">&gt;</span><span>    </span></span></li><li><span>        <span class="tag">&lt;</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>password to use against metastore database</span><span class="tag">&lt;/</span><span class="tag-name">description</span><span class="tag">&gt;</span><span>  </span></span></li><li><span><span class="tag">&lt;/</span><span class="tag-name">property</span><span class="tag">&gt;</span><span>  </span></span></li></ol></div>
<br><br>
3.添加jdbc的jar包<br><div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码  <a title="收藏这段代码"><img class="star" src="http://running.iteye.com/images/icon_star.png" alt="收藏代码"></a></div>
</div>
<ol class="dp-j" start="1"><li><span><span>wget http:</span><span class="comment">//dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.11.tar.gz/from/http://mysql.he.net/</span><span>  </span></span></li><li><span>tar -xvzf mysql-connector-java-<span class="number">5.1</span><span>.</span><span class="number">11</span><span>.tar.gz  </span></span></li><li><span>cp mysql-connector-java-<span class="number">5.1</span><span>.</span><span class="number">11</span><span>/*.jar /data/soft/hive/lib  </span></span></li></ol></div>
<br><br>
4.启动hive<br><div class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码  <a title="收藏这段代码"><img class="star" src="http://running.iteye.com/images/icon_star.png" alt="收藏代码"></a></div>
</div>
<ol class="dp-j" start="1"><li><span><span>bin/hive  </span></span></li><li><span>hive&gt; show tables;  </span></li></ol></div>
<br><br><br>
When using MySQL as a metastore I see the error "com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Specified key was too long; max key length is 767 bytes".<br><br>
    * This is a known limitation of MySQL 5.0 and UTF8 databases. One option is to use another character set, such as 'latin1', which is known to work.
<br><br><br>
Hive用MySQL做元数据保存的数据库时，mySQL设置<br><a href="http://running.iteye.com/blog/910277" rel="nofollow">http://running.iteye.com/blog/910277</a>
            </div>
                </div>