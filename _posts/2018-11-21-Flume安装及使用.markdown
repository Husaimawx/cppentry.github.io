---
layout:     post
title:      Flume安装及使用
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                <p align="center">Flume<span style="font-family:'宋体';">的安装及使用</span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">Flume是Cloudera提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力</span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">一．</span><span style="color:rgb(51,51,51);background:rgb(255,255,255);"><span style="font-family:'微软雅黑';">安装</span>flume</span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">1. </span><span style="color:rgb(51,51,51);background:rgb(255,255,255);"><span style="font-family:'微软雅黑';">下载安装文件</span>(http://flume.apache.org/download.html)</span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">2. </span><span style="color:rgb(51,51,51);background:rgb(255,255,255);"><span style="font-family:'微软雅黑';">解压安装</span></span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">cd ~/Downloads</span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">sudo tar -zxvf apache-flume-1.7.0-bin.tar.gz -C /usr/local</span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">3. </span><span style="color:rgb(51,51,51);background:rgb(255,255,255);"><span style="font-family:'微软雅黑';">修改权限</span></span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">cd /usr/local</span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">sudo chown -R hadoop:hadoop apache-flume-1.7.0-bin </span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">4.修改名字</span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">s</span><span style="color:rgb(51,51,51);background:rgb(255,255,255);">udo mv apache-flume-1.7.0-bin flume</span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">二．</span><span style="color:rgb(51,51,51);background:rgb(255,255,255);"><span style="font-family:'微软雅黑';">配置环境变量</span></span></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);">1.sudo vim ~/.bashrc</span></p><p><img src="https://img-blog.csdn.net/20180531142809900?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p align="justify"><span style="color:rgb(51,51,51);background:rgb(255,255,255);"><span style="font-family:'微软雅黑';">添加完成后记住</span></span></p><p align="justify"><span style="color:rgb(255,0,0);background:rgb(217,217,217);">s</span><span style="color:rgb(255,0,0);background:rgb(217,217,217);">ource ~/.bashrc</span></p><p align="justify"><span style="color:rgb(0,0,0);">2. </span><span style="color:rgb(0,0,0);"><span style="font-family:'微软雅黑';">修改配置文件</span>flume-env.sh</span></p><p align="justify"><span style="color:rgb(0,0,0);"><span style="font-family:'微软雅黑';">在</span>flume-env.sh文件开头加入如下语句:</span></p><p><img src="https://img-blog.csdn.net/20180531142820412?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p align="justify"><span style="color:rgb(0,0,0);">三．</span><span style="color:rgb(0,0,0);"><span style="font-family:'微软雅黑';">启动</span>flume</span></p><p align="justify"><span style="color:rgb(0,0,0);">cd  /usr/local/flume</span></p><p align="justify"><span style="color:rgb(0,0,0);">./bin/flume-ng version</span></p><p><img src="https://img-blog.csdn.net/20180531142837673?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p align="justify"><span style="color:rgb(0,0,0);">四. </span><span style="color:rgb(0,0,0);">运行实例</span></p><p align="justify"><span style="color:rgb(0,0,0);">1. </span><span style="color:rgb(0,0,0);"><span style="font-family:'微软雅黑';">使用</span>Flume接收来自AvroSource的消息</span></p><p align="justify"><span style="color:rgb(0,0,0);">1.创建Agent配置文件</span></p><p align="justify"><span style="color:rgb(0,0,0);">cd /usr/local/flume</span></p><p align="justify"><span style="color:rgb(0,0,0);">sudo vim ./conf/avro.conf</span></p><p align="justify"><span style="color:rgb(0,0,0);">2.在avro.conf中写入如下内容</span></p><p><img src="https://img-blog.csdn.net/20180531142844110?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p align="justify"><span style="color:rgb(0,0,0);">3.启动Flume Agent al</span></p><p align="justify"><span style="color:rgb(0,0,0);">执行如下命令启动日志控制台：</span></p><p align="justify"><span style="color:rgb(0,0,0);">/usr/local/flume/bin/flume-ng agent -c . -f /usr/local/flume/conf/avro.conf -n a1 -Dflume.root.logger=INFO,console</span></p><p><img src="https://img-blog.csdn.net/20180531142851286?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p align="justify"><span style="color:rgb(0,0,0);">4.创建指定文件</span></p><p align="justify"><span style="color:rgb(0,0,0);">      <span style="font-family:'微软雅黑';">打开另外一个</span>LInux终端，使用如下命令在/usr/local/flume目录下新建一个文件log.00,并在文件中加入一行内容</span><span style="color:rgb(0,0,0);">”</span><span style="color:rgb(0,0,0);">hello world</span><span style="color:rgb(0,0,0);">”</span><span style="color:rgb(0,0,0);">:</span></p><p><img src="https://img-blog.csdn.net/20180531142857798?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p align="justify"><span style="color:rgb(0,0,0);"><span style="font-family:'微软雅黑';">在打开另外一个终端，执行如下命令</span>:</span></p><p><img src="https://img-blog.csdn.net/20180531142905929?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p align="justify"><span style="color:rgb(0,0,0);"><span style="font-family:'微软雅黑';">执行该命令后，</span>AvroSource就向Flume发送了一个文件，这时可以切换之前的日志控制台所在的终端窗口，就可以看到Flume已经接收到了信息</span></p><p><img src="https://img-blog.csdn.net/20180531142911547?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p>2. <span style="font-family:'宋体';">使用</span>Flume接收来自NetcatSource的消息</p><p>1. <span style="font-family:'宋体';">创建</span>agent配置文件</p><p>cd /usr/local/flume</p><p>sudo vim ./conf/example.conf</p><p><span style="font-family:'宋体';">在</span>example.conf下写入以下内容:</p><p><img src="https://img-blog.csdn.net/20180531142918664?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p>2. <span style="font-family:'宋体';">启动</span>Flume Agent al</p><p>执行如下命令启动日志控制台：</p><p> /usr/local/flume/bin/flume-ng agent --conf ./conf --conf-file ./example.conf --name a1 -Dflume.root.logger=INFO,console</p><p><img src="https://img-blog.csdn.net/20180531142926673?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p>3. <span style="font-family:'宋体';">在打开一个终端，输入如下命令</span>:</p><p>Telnet localhost 44444</p><p></p><p> <img src="https://img-blog.csdn.net/20180531142932182?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></p><p align="justify"><span style="color:rgb(0,0,0);"><span style="font-family:'微软雅黑';">我们在这个窗口输入</span>hello world另外一个日志控制台终端窗口也会同步显示输入内容</span></p><p align="justify"><span style="color:rgb(0,0,0);"> <img src="https://img-blog.csdn.net/20180531142938396?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzM4MjQ5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt=""></span></p><p></p><p><span style="color:rgb(255,0,0);"><span style="font-family:'宋体';">注意：</span>Flume只能接收英文和字符，不能输入中文</span></p><div></div>            </div>
                </div>