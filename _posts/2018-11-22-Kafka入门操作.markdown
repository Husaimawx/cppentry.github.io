---
layout:     post
title:      Kafka入门操作
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/paicMis/article/details/53736261				</div>
								            <div id="content_views" class="markdown_views prism-atom-one-dark">
							<!-- flowchart 箭头图标 勿删 -->
							<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg>
							<p><strong>问题：</strong> <br>
<strong>Kafka的安装过程</strong> <br>
<strong>kafka的启动</strong> <br>
<strong>kafka的样例</strong></p>

<p><a href="http://apache.fayea.com/kafka/0.10.0.1/kafka_2.10-0.10.0.1.tgz" rel="nofollow">http://apache.fayea.com/kafka/0.10.0.1/kafka_2.10-0.10.0.1.tgz</a>  下载地址</p>

<p><strong>1、解压Kafka</strong> <br>
惊讶的是Kafka内置了Zookeeper的安装包以及启停Zookeeper的脚本，版本比较低，是3.3.4版本。理论上不应该使用Kafka的版本，因为Zookeeper是个通用分布式配置和协调系统. <br>
实际上，也可以使用Kafka内置的Zookeeper，不过要注意，Zookeeper一般使用3台做集群，如果Kakfa的Broker多于3台，那么就取其中3台运行Zookeeper</p>



<pre class="prettyprint"><code class=" hljs ruby">[xulu<span class="hljs-variable">@SZB</span>-<span class="hljs-constant">L0032015</span> ~]<span class="hljs-variable">$ </span>tar -xvf kafka_2.<span class="hljs-number">10</span>-<span class="hljs-number">0</span>.<span class="hljs-number">10.0</span>.<span class="hljs-number">1</span>.tgz -<span class="hljs-constant">C</span> /opt/cloud/kafka/</code></pre>

<p><strong>2、配置Zookeeper</strong> <br>
    本文使用单独安装的Zookeeper，而不是使用Kafka自带的Zookeeper，Kafka为了能够知道它要连接的Zookeeper地址，配置文件中提供了一系列和Zookeeper相关的配置参数 <br>
     除了安装运行独立的Zookeeper，Kafka也可以使用安装包里的Zookeeper，如果Kafka要使用自己的Zookeeper，那么需要在 Kafka的bin目录下启动Zookeeper。因此，如果使用独立的Zookeeper的时候，就无  需启动Kafka下面的Zookeeper了。在 Kafka启动过程中看到有关Zookeeper的日志，这是Kafka作为Zookeeper的客户端正在建立与Zookeeper服务器的通讯 <br>
具体的安装信息请看 <a href="http://blog.csdn.net/paicmis/article/details/53264178" rel="nofollow">zookeeper</a></p>

<p><strong>3、配置Kafka</strong> <br>
 1. 修改配置文件config/server.properties <br>
 修改zookeeper为外部zookeeper</p>



<pre class="prettyprint"><code class=" hljs vhdl"># Zookeeper connection <span class="hljs-typename">string</span> (see zookeeper docs <span class="hljs-keyword">for</span> details).
# This <span class="hljs-keyword">is</span> a comma separated host:<span class="hljs-keyword">port</span> pairs, each corresponding <span class="hljs-keyword">to</span> a zk
# server. e.g. <span class="hljs-string">"127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002"</span>.
# You can also append an optional chroot <span class="hljs-typename">string</span> <span class="hljs-keyword">to</span> the urls <span class="hljs-keyword">to</span> specify the
# root directory <span class="hljs-keyword">for</span> <span class="hljs-keyword">all</span> kafka znodes.
zookeeper.connect=<span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.199</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.241</span>:<span class="hljs-number">3181</span></code></pre>

<p>3、1 config/producer.properties <br>
    无相关配置</p>

<p>3、2 修改 consumer.properties <br>
配置外部zookeeper的地址</p>



<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># Zookeeper connection string</span>
<span class="hljs-preprocessor"># comma separated host:port pairs, each corresponding to a zk</span>
<span class="hljs-preprocessor"># server. e.g. "127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002"</span>
zookeeper.connect=<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.241</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.199</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>:<span class="hljs-number">3181</span></code></pre>

<p><strong>4、启动Kafka</strong> <br>
1.启动Kafka(需要指定server.properties）</p>



<pre class="prettyprint"><code class=" hljs ruby">[xulu<span class="hljs-variable">@SZB</span>-<span class="hljs-constant">L0032015</span> bin]<span class="hljs-variable">$ </span>./kafka-server-start.sh  ../config/server.properties</code></pre>

<p>启动日志</p>

<pre class="prettyprint"><code class=" hljs sql">[2016-12-19 09:47:46,803] INFO KafkaConfig values: 
        request.timeout.ms = 30000
        log.roll.hours = 168
        inter.broker.protocol.version = 0.10.0-IV1
        log.preallocate = false
        security.inter.broker.protocol = PLAINTEXT
        controller.socket.timeout.ms = 30000
        broker.id.generation.enable = true
        ssl.keymanager.algorithm = SunX509
        ssl.key.password = null
        log.cleaner.enable = true
        ssl.provider = null
        num.recovery.threads.per.data.dir = 1
        background.threads = 10
        unclean.leader.election.enable = true
        sasl.kerberos.kinit.cmd = /usr/bin/kinit
        replica.lag.time.max.ms = 10000
        ssl.endpoint.identification.algorithm = null
        sasl.mechanism.inter.broker.protocol = GSSAPI
        auto.<span class="hljs-operator"><span class="hljs-keyword">create</span>.topics.enable = <span class="hljs-keyword">true</span>
        log.message.<span class="hljs-keyword">timestamp</span>.difference.<span class="hljs-aggregate">max</span>.ms = <span class="hljs-number">9223372036854775807</span>
        zookeeper.sync.<span class="hljs-keyword">time</span>.ms = <span class="hljs-number">2000</span>
        ssl.client.auth = none
        ssl.keystore.password = <span class="hljs-keyword">null</span>
        offsets.topic.compression.codec = <span class="hljs-number">0</span>
        log.cleaner.io.buffer.<span class="hljs-keyword">load</span>.factor = <span class="hljs-number">0.9</span>
        log.retention.hours = <span class="hljs-number">168</span>
        log.dirs = /tmp/kafka-logs
        ssl.protocol = TLS
        log.index.<span class="hljs-keyword">size</span>.<span class="hljs-aggregate">max</span>.bytes = <span class="hljs-number">10485760</span>
        sasl.kerberos.<span class="hljs-aggregate">min</span>.<span class="hljs-keyword">time</span>.<span class="hljs-keyword">before</span>.relogin = <span class="hljs-number">60000</span>
        broker.rack = <span class="hljs-keyword">null</span>
        log.retention.minutes = <span class="hljs-keyword">null</span>
        connections.<span class="hljs-aggregate">max</span>.idle.ms = <span class="hljs-number">600000</span>
        ssl.trustmanager.algorithm = PKIX
        offsets.retention.minutes = <span class="hljs-number">1440</span>
        <span class="hljs-aggregate">max</span>.connections.per.ip = <span class="hljs-number">2147483647</span>
        replica.<span class="hljs-keyword">fetch</span>.wait.<span class="hljs-aggregate">max</span>.ms = <span class="hljs-number">500</span>
        log.message.<span class="hljs-keyword">timestamp</span>.type = CreateTime
        metrics.num.samples = <span class="hljs-number">2</span>
        port = <span class="hljs-number">9092</span>
        offsets.retention.<span class="hljs-keyword">check</span>.<span class="hljs-keyword">interval</span>.ms = <span class="hljs-number">600000</span>
        log.cleaner.dedupe.buffer.<span class="hljs-keyword">size</span> = <span class="hljs-number">134217728</span>
        log.segment.bytes = <span class="hljs-number">1073741824</span>
        <span class="hljs-keyword">group</span>.<span class="hljs-aggregate">min</span>.<span class="hljs-keyword">session</span>.timeout.ms = <span class="hljs-number">6000</span>
        producer.purgatory.purge.<span class="hljs-keyword">interval</span>.requests = <span class="hljs-number">1000</span>
        <span class="hljs-aggregate">min</span>.insync.replicas = <span class="hljs-number">1</span>
        ssl.truststore.password = <span class="hljs-keyword">null</span>
        socket.receive.buffer.bytes = <span class="hljs-number">102400</span>
        log.flush.scheduler.<span class="hljs-keyword">interval</span>.ms = <span class="hljs-number">9223372036854775807</span>
        num.io.threads = <span class="hljs-number">8</span>
        leader.imbalance.per.broker.percentage = <span class="hljs-number">10</span>
        zookeeper.<span class="hljs-keyword">connect</span> = <span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.199</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.241</span>:<span class="hljs-number">3181</span>
        queued.<span class="hljs-aggregate">max</span>.requests = <span class="hljs-number">500</span>
        offsets.topic.replication.factor = <span class="hljs-number">3</span>
        replica.socket.timeout.ms = <span class="hljs-number">30000</span>
        offsets.topic.segment.bytes = <span class="hljs-number">104857600</span>
        replica.high.watermark.checkpoint.<span class="hljs-keyword">interval</span>.ms = <span class="hljs-number">5000</span>
        broker.id = <span class="hljs-number">0</span>
        ssl.keystore.location = <span class="hljs-keyword">null</span>
        listeners = <span class="hljs-keyword">null</span>
        log.flush.<span class="hljs-keyword">interval</span>.messages = <span class="hljs-number">9223372036854775807</span>
        principal.builder.class = class org.apache.kafka.common.security.auth.DefaultPrincipalBuilder
        log.retention.ms = <span class="hljs-keyword">null</span>
        offsets.<span class="hljs-keyword">commit</span>.required.acks = -<span class="hljs-number">1</span>
        sasl.kerberos.principal.<span class="hljs-keyword">to</span>.<span class="hljs-keyword">local</span>.rules = [<span class="hljs-keyword">DEFAULT</span>]
        <span class="hljs-keyword">group</span>.<span class="hljs-aggregate">max</span>.<span class="hljs-keyword">session</span>.timeout.ms = <span class="hljs-number">300000</span>
        num.replica.fetchers = <span class="hljs-number">1</span>
        advertised.listeners = <span class="hljs-keyword">null</span>
        replica.socket.receive.buffer.bytes = <span class="hljs-number">65536</span>
        <span class="hljs-keyword">delete</span>.topic.enable = <span class="hljs-keyword">false</span>
        log.index.<span class="hljs-keyword">interval</span>.bytes = <span class="hljs-number">4096</span>
        metric.reporters = []
        compression.type = producer
        log.cleanup.policy = <span class="hljs-keyword">delete</span>
        log.message.format.version = <span class="hljs-number">0.10</span><span class="hljs-number">.0</span>-IV1
        controlled.shutdown.<span class="hljs-aggregate">max</span>.retries = <span class="hljs-number">3</span>
        log.cleaner.threads = <span class="hljs-number">1</span>
        quota.window.<span class="hljs-keyword">size</span>.seconds = <span class="hljs-number">1</span>
        zookeeper.<span class="hljs-keyword">connection</span>.timeout.ms = <span class="hljs-number">6000</span>
        offsets.<span class="hljs-keyword">load</span>.buffer.<span class="hljs-keyword">size</span> = <span class="hljs-number">5242880</span>
        zookeeper.<span class="hljs-keyword">session</span>.timeout.ms = <span class="hljs-number">6000</span>
        ssl.cipher.suites = <span class="hljs-keyword">null</span>
        authorizer.class.name = 
        sasl.kerberos.ticket.renew.jitter = <span class="hljs-number">0.05</span>
        sasl.enabled.mechanisms = [GSSAPI]
        sasl.kerberos.service.name = <span class="hljs-keyword">null</span>
        controlled.shutdown.enable = <span class="hljs-keyword">true</span>
        offsets.topic.num.partitions = <span class="hljs-number">50</span>
        quota.window.num = <span class="hljs-number">11</span>
        message.<span class="hljs-aggregate">max</span>.bytes = <span class="hljs-number">1000012</span>
        log.cleaner.backoff.ms = <span class="hljs-number">15000</span>
        log.roll.jitter.hours = <span class="hljs-number">0</span>
        log.retention.<span class="hljs-keyword">check</span>.<span class="hljs-keyword">interval</span>.ms = <span class="hljs-number">300000</span>
        replica.<span class="hljs-keyword">fetch</span>.<span class="hljs-aggregate">max</span>.bytes = <span class="hljs-number">1048576</span>
        log.cleaner.<span class="hljs-keyword">delete</span>.retention.ms = <span class="hljs-number">86400000</span>
        <span class="hljs-keyword">fetch</span>.purgatory.purge.<span class="hljs-keyword">interval</span>.requests = <span class="hljs-number">1000</span>
        log.cleaner.<span class="hljs-aggregate">min</span>.cleanable.ratio = <span class="hljs-number">0.5</span>
        offsets.<span class="hljs-keyword">commit</span>.timeout.ms = <span class="hljs-number">5000</span>
        zookeeper.<span class="hljs-keyword">set</span>.acl = <span class="hljs-keyword">false</span>
        log.retention.bytes = -<span class="hljs-number">1</span>
        offset.metadata.<span class="hljs-aggregate">max</span>.bytes = <span class="hljs-number">4096</span>
        leader.imbalance.<span class="hljs-keyword">check</span>.<span class="hljs-keyword">interval</span>.seconds = <span class="hljs-number">300</span>
        quota.consumer.<span class="hljs-keyword">default</span> = <span class="hljs-number">9223372036854775807</span>
        log.roll.jitter.ms = <span class="hljs-keyword">null</span>
        reserved.broker.<span class="hljs-aggregate">max</span>.id = <span class="hljs-number">1000</span>
        replica.<span class="hljs-keyword">fetch</span>.backoff.ms = <span class="hljs-number">1000</span>
        advertised.host.name = <span class="hljs-keyword">null</span>
        quota.producer.<span class="hljs-keyword">default</span> = <span class="hljs-number">9223372036854775807</span>
        log.cleaner.io.buffer.<span class="hljs-keyword">size</span> = <span class="hljs-number">524288</span>
        controlled.shutdown.retry.backoff.ms = <span class="hljs-number">5000</span>
        log.dir = /tmp/kafka-logs
        log.flush.offset.checkpoint.<span class="hljs-keyword">interval</span>.ms = <span class="hljs-number">60000</span>
        log.segment.<span class="hljs-keyword">delete</span>.delay.ms = <span class="hljs-number">60000</span>
        num.partitions = <span class="hljs-number">1</span>
        num.network.threads = <span class="hljs-number">3</span>
        socket.request.<span class="hljs-aggregate">max</span>.bytes = <span class="hljs-number">104857600</span>
        sasl.kerberos.ticket.renew.window.factor = <span class="hljs-number">0.8</span>
        log.roll.ms = <span class="hljs-keyword">null</span>
        ssl.enabled.protocols = [TLSv1<span class="hljs-number">.2</span>, TLSv1<span class="hljs-number">.1</span>, TLSv1]
        socket.send.buffer.bytes = <span class="hljs-number">102400</span>
        log.flush.<span class="hljs-keyword">interval</span>.ms = <span class="hljs-keyword">null</span>
        ssl.truststore.location = <span class="hljs-keyword">null</span>
        log.cleaner.io.<span class="hljs-aggregate">max</span>.bytes.per.<span class="hljs-keyword">second</span> = <span class="hljs-number">1.7976931348623157E308</span>
        <span class="hljs-keyword">default</span>.replication.factor = <span class="hljs-number">1</span>
        metrics.sample.window.ms = <span class="hljs-number">30000</span>
        auto.leader.rebalance.enable = <span class="hljs-keyword">true</span>
        host.name = 
        ssl.truststore.type = JKS
        advertised.port = <span class="hljs-keyword">null</span>
        <span class="hljs-aggregate">max</span>.connections.per.ip.overrides = 
        replica.<span class="hljs-keyword">fetch</span>.<span class="hljs-aggregate">min</span>.bytes = <span class="hljs-number">1</span>
        ssl.keystore.type = JKS
 (kafka.server.KafkaConfig)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">868</span>] INFO starting (kafka.server.KafkaServer)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">877</span>] INFO Connecting <span class="hljs-keyword">to</span> zookeeper <span class="hljs-keyword">on</span> <span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.199</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.241</span>:<span class="hljs-number">3181</span> (kafka.server.KafkaServer)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">893</span>] INFO Starting ZkClient event thread. (org.I0Itec.zkclient.ZkEventThread)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">900</span>] INFO Client environment:zookeeper.version=<span class="hljs-number">3.4</span><span class="hljs-number">.6</span>-<span class="hljs-number">1569965</span>, built <span class="hljs-keyword">on</span> <span class="hljs-number">02</span>/<span class="hljs-number">20</span>/<span class="hljs-number">2014</span> <span class="hljs-number">09</span>:<span class="hljs-number">09</span> GMT (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:host.name=SZB-L0032015 (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:java.version=<span class="hljs-number">1.7</span><span class="hljs-number">.0</span>_79 (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:java.vendor=Oracle Corporation (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:java.home=/opt/jdk1<span class="hljs-number">.7</span><span class="hljs-number">.0</span>_79/jre (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:java.class.path=:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/aopalliance-repackaged-<span class="hljs-number">2.4</span><span class="hljs-number">.0</span>-b34.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/argparse4j-<span class="hljs-number">0.5</span><span class="hljs-number">.0</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/<span class="hljs-keyword">connect</span>-api-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/<span class="hljs-keyword">connect</span>-file-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/<span class="hljs-keyword">connect</span>-json-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/<span class="hljs-keyword">connect</span>-runtime-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/guava-<span class="hljs-number">18.0</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/hk2-api-<span class="hljs-number">2.4</span><span class="hljs-number">.0</span>-b34.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/hk2-locator-<span class="hljs-number">2.4</span><span class="hljs-number">.0</span>-b34.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/hk2-utils-<span class="hljs-number">2.4</span><span class="hljs-number">.0</span>-b34.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jackson-annotations-<span class="hljs-number">2.6</span><span class="hljs-number">.0</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jackson-core-<span class="hljs-number">2.6</span><span class="hljs-number">.3</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jackson-databind-<span class="hljs-number">2.6</span><span class="hljs-number">.3</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jackson-jaxrs-base-<span class="hljs-number">2.6</span><span class="hljs-number">.3</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jackson-jaxrs-json-provider-<span class="hljs-number">2.6</span><span class="hljs-number">.3</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jackson-<span class="hljs-keyword">module</span>-jaxb-annotations-<span class="hljs-number">2.6</span><span class="hljs-number">.3</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/javassist-<span class="hljs-number">3.18</span><span class="hljs-number">.2</span>-GA.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/javax.annotation-api-<span class="hljs-number">1.2</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/javax.inject-<span class="hljs-number">1.</span>jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/javax.inject-<span class="hljs-number">2.4</span><span class="hljs-number">.0</span>-b34.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/javax.servlet-api-<span class="hljs-number">3.1</span><span class="hljs-number">.0</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/javax.ws.rs-api-<span class="hljs-number">2.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jersey-client-<span class="hljs-number">2.22</span><span class="hljs-number">.2</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jersey-common-<span class="hljs-number">2.22</span><span class="hljs-number">.2</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jersey-container-servlet-<span class="hljs-number">2.22</span><span class="hljs-number">.2</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jersey-container-servlet-core-<span class="hljs-number">2.22</span><span class="hljs-number">.2</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jersey-guava-<span class="hljs-number">2.22</span><span class="hljs-number">.2</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jersey-media-jaxb-<span class="hljs-number">2.22</span><span class="hljs-number">.2</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jersey-server-<span class="hljs-number">2.22</span><span class="hljs-number">.2</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jetty-continuation-<span class="hljs-number">9.2</span><span class="hljs-number">.15</span>.v20160210.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jetty-http-<span class="hljs-number">9.2</span><span class="hljs-number">.15</span>.v20160210.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jetty-io-<span class="hljs-number">9.2</span><span class="hljs-number">.15</span>.v20160210.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jetty-security-<span class="hljs-number">9.2</span><span class="hljs-number">.15</span>.v20160210.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jetty-server-<span class="hljs-number">9.2</span><span class="hljs-number">.15</span>.v20160210.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jetty-servlet-<span class="hljs-number">9.2</span><span class="hljs-number">.15</span>.v20160210.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jetty-servlets-<span class="hljs-number">9.2</span><span class="hljs-number">.15</span>.v20160210.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jetty-util-<span class="hljs-number">9.2</span><span class="hljs-number">.15</span>.v20160210.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/jopt-simple-<span class="hljs-number">4.9</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>-sources.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>-test-sources.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/kafka-clients-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/kafka-log4j-appender-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/kafka-streams-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/kafka-streams-examples-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/kafka-tools-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/log4j-<span class="hljs-number">1.2</span><span class="hljs-number">.17</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/lz4-<span class="hljs-number">1.3</span><span class="hljs-number">.0</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/metrics-core-<span class="hljs-number">2.2</span><span class="hljs-number">.0</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/osgi-resource-locator-<span class="hljs-number">1.0</span><span class="hljs-number">.1</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/reflections-<span class="hljs-number">0.9</span><span class="hljs-number">.10</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/rocksdbjni-<span class="hljs-number">4.8</span><span class="hljs-number">.0</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/scala-library-<span class="hljs-number">2.10</span><span class="hljs-number">.6</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/slf4j-api-<span class="hljs-number">1.7</span><span class="hljs-number">.21</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/slf4j-log4j12-<span class="hljs-number">1.7</span><span class="hljs-number">.21</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/snappy-java-<span class="hljs-number">1.1</span><span class="hljs-number">.2</span><span class="hljs-number">.6</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/validation-api-<span class="hljs-number">1.1</span><span class="hljs-number">.0</span>.Final.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/zkclient-<span class="hljs-number">0.8</span>.jar:/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin/../libs/zookeeper-<span class="hljs-number">3.4</span><span class="hljs-number">.6</span>.jar (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:java.library.path=/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:java.io.tmpdir=/tmp (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:java.compiler=&lt;NA&gt; (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:os.name=Linux (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:os.arch=amd64 (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:os.version=<span class="hljs-number">2.6</span><span class="hljs-number">.32</span>-<span class="hljs-number">573.</span>el6.x86_64 (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:<span class="hljs-keyword">user</span>.name=xulu (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:<span class="hljs-keyword">user</span>.home=/home/xulu (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">901</span>] INFO Client environment:<span class="hljs-keyword">user</span>.dir=/opt/cloud/kafka/kafka_2<span class="hljs-number">.10</span>-<span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/bin (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">902</span>] INFO Initiating client <span class="hljs-keyword">connection</span>, connectString=<span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.199</span>:<span class="hljs-number">3181</span>,<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.241</span>:<span class="hljs-number">3181</span> sessionTimeout=<span class="hljs-number">6000</span> watcher=org.I0Itec.zkclient.ZkClient@<span class="hljs-number">40</span>f8c9bf (org.apache.zookeeper.ZooKeeper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">917</span>] INFO Waiting <span class="hljs-keyword">for</span> keeper state SyncConnected (org.I0Itec.zkclient.ZkClient)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">920</span>] INFO Opening socket <span class="hljs-keyword">connection</span> <span class="hljs-keyword">to</span> server <span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.199</span>/<span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.199</span>:<span class="hljs-number">3181.</span> Will <span class="hljs-keyword">not</span> attempt <span class="hljs-keyword">to</span> authenticate <span class="hljs-keyword">using</span> SASL (<span class="hljs-keyword">unknown</span> error) (org.apache.zookeeper.ClientCnxn)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">46</span>,<span class="hljs-number">925</span>] WARN <span class="hljs-keyword">Session</span> <span class="hljs-number">0x0</span> <span class="hljs-keyword">for</span> server <span class="hljs-keyword">null</span>, unexpected error, closing socket <span class="hljs-keyword">connection</span> <span class="hljs-keyword">and</span> attempting reconnect (org.apache.zookeeper.ClientCnxn)
java.net.ConnectException: <span class="hljs-keyword">Connection</span> refused
        <span class="hljs-keyword">at</span> sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
        <span class="hljs-keyword">at</span> sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:<span class="hljs-number">739</span>)
        <span class="hljs-keyword">at</span> org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:<span class="hljs-number">361</span>)
        <span class="hljs-keyword">at</span> org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:<span class="hljs-number">1081</span>)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">031</span>] INFO Opening socket <span class="hljs-keyword">connection</span> <span class="hljs-keyword">to</span> server <span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>/<span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>:<span class="hljs-number">3181.</span> Will <span class="hljs-keyword">not</span> attempt <span class="hljs-keyword">to</span> authenticate <span class="hljs-keyword">using</span> SASL (<span class="hljs-keyword">unknown</span> error) (org.apache.zookeeper.ClientCnxn)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">032</span>] INFO Socket <span class="hljs-keyword">connection</span> established <span class="hljs-keyword">to</span> <span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>/<span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>:<span class="hljs-number">3181</span>, initiating <span class="hljs-keyword">session</span> (org.apache.zookeeper.ClientCnxn)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">196</span>] INFO <span class="hljs-keyword">Session</span> establishment complete <span class="hljs-keyword">on</span> server <span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>/<span class="hljs-number">10.20</span><span class="hljs-number">.24</span><span class="hljs-number">.231</span>:<span class="hljs-number">3181</span>, sessionid = <span class="hljs-number">0x1591492d7e70000</span>, negotiated timeout = <span class="hljs-number">6000</span> (org.apache.zookeeper.ClientCnxn)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">198</span>] INFO zookeeper state changed (SyncConnected) (org.I0Itec.zkclient.ZkClient)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">454</span>] INFO Log directory <span class="hljs-string">'/tmp/kafka-logs'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">found</span>, creating it. (kafka.log.LogManager)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">462</span>] INFO Loading logs. (kafka.log.LogManager)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">472</span>] INFO Logs loading complete. (kafka.log.LogManager)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">545</span>] INFO Starting log cleanup <span class="hljs-keyword">with</span> a period <span class="hljs-keyword">of</span> <span class="hljs-number">300000</span> ms. (kafka.log.LogManager)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">548</span>] INFO Starting log flusher <span class="hljs-keyword">with</span> a <span class="hljs-keyword">default</span> period <span class="hljs-keyword">of</span> <span class="hljs-number">9223372036854775807</span> ms. (kafka.log.LogManager)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">554</span>] WARN <span class="hljs-keyword">No</span> meta.properties file under dir /tmp/kafka-logs/meta.properties (kafka.server.BrokerMetadataCheckpoint)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">609</span>] INFO Awaiting socket connections <span class="hljs-keyword">on</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>:<span class="hljs-number">9092.</span> (kafka.network.Acceptor)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">614</span>] INFO [Socket Server <span class="hljs-keyword">on</span> Broker <span class="hljs-number">0</span>], Started <span class="hljs-number">1</span> acceptor threads (kafka.network.SocketServer)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">639</span>] INFO [ExpirationReaper-<span class="hljs-number">0</span>], Starting  (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">640</span>] INFO [ExpirationReaper-<span class="hljs-number">0</span>], Starting  (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">765</span>] INFO Creating /controller (<span class="hljs-keyword">is</span> it secure? <span class="hljs-keyword">false</span>) (kafka.utils.ZKCheckedEphemeral)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">784</span>] INFO Result <span class="hljs-keyword">of</span> znode creation <span class="hljs-keyword">is</span>: OK (kafka.utils.ZKCheckedEphemeral)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">785</span>] INFO <span class="hljs-number">0</span> successfully elected <span class="hljs-keyword">as</span> leader (kafka.server.ZookeeperLeaderElector)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">935</span>] INFO [ExpirationReaper-<span class="hljs-number">0</span>], Starting  (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">936</span>] INFO [ExpirationReaper-<span class="hljs-number">0</span>], Starting  (kafka.server.DelayedOperationPurgatory$ExpiredOperationReaper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">954</span>] INFO [GroupCoordinator <span class="hljs-number">0</span>]: Starting up. (kafka.coordinator.GroupCoordinator)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">955</span>] INFO [GroupCoordinator <span class="hljs-number">0</span>]: Startup complete. (kafka.coordinator.GroupCoordinator)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">966</span>] INFO [<span class="hljs-keyword">Group</span> Metadata Manager <span class="hljs-keyword">on</span> Broker <span class="hljs-number">0</span>]: Removed <span class="hljs-number">0</span> expired offsets <span class="hljs-keyword">in</span> <span class="hljs-number">17</span> milliseconds. (kafka.coordinator.GroupMetadataManager)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">982</span>] INFO [ThrottledRequestReaper-Produce], Starting  (kafka.server.ClientQuotaManager$ThrottledRequestReaper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">47</span>,<span class="hljs-number">983</span>] INFO [ThrottledRequestReaper-<span class="hljs-keyword">Fetch</span>], Starting  (kafka.server.ClientQuotaManager$ThrottledRequestReaper)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">48</span>,<span class="hljs-number">000</span>] INFO Will <span class="hljs-keyword">not</span> <span class="hljs-keyword">load</span> MX4J, mx4j-tools.jar <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> the classpath (kafka.utils.Mx4jLoader$)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">48</span>,<span class="hljs-number">044</span>] INFO Creating /brokers/ids/<span class="hljs-number">0</span> (<span class="hljs-keyword">is</span> it secure? <span class="hljs-keyword">false</span>) (kafka.utils.ZKCheckedEphemeral)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">48</span>,<span class="hljs-number">057</span>] INFO New leader <span class="hljs-keyword">is</span> <span class="hljs-number">0</span> (kafka.server.ZookeeperLeaderElector$LeaderChangeListener)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">48</span>,<span class="hljs-number">064</span>] INFO Result <span class="hljs-keyword">of</span> znode creation <span class="hljs-keyword">is</span>: OK (kafka.utils.ZKCheckedEphemeral)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">48</span>,<span class="hljs-number">067</span>] INFO Registered broker <span class="hljs-number">0</span> <span class="hljs-keyword">at</span> path /brokers/ids/<span class="hljs-number">0</span> <span class="hljs-keyword">with</span> addresses: PLAINTEXT -&gt; EndPoint(SZB-L0032015,<span class="hljs-number">9092</span>,PLAINTEXT) (kafka.utils.ZkUtils)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">48</span>,<span class="hljs-number">069</span>] WARN <span class="hljs-keyword">No</span> meta.properties file under dir /tmp/kafka-logs/meta.properties (kafka.server.BrokerMetadataCheckpoint)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">48</span>,<span class="hljs-number">119</span>] INFO Kafka version : <span class="hljs-number">0.10</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> (org.apache.kafka.common.utils.AppInfoParser)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">48</span>,<span class="hljs-number">119</span>] INFO Kafka commitId : a7a17cdec9eaa6c5 (org.apache.kafka.common.utils.AppInfoParser)
[<span class="hljs-number">2016</span>-<span class="hljs-number">12</span>-<span class="hljs-number">19</span> <span class="hljs-number">09</span>:<span class="hljs-number">47</span>:<span class="hljs-number">48</span>,<span class="hljs-number">120</span>] INFO [Kafka Server <span class="hljs-number">0</span>], started (kafka.server.KafkaServer)、</span></code></pre>

<p><strong>Kafka简单测试</strong> <br>
<strong>1.创建一个topic</strong> <br>
参数信息：Zookeeper的信息，Topic的名字，Topic的Partition数，复制因子(复制因子必须小于等于Broker数目）</p>

<pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-title">[</span><span class="hljs-comment">xulu@SZB</span><span class="hljs-literal">-</span><span class="hljs-comment">L0032015</span> <span class="hljs-comment">bin</span><span class="hljs-title">]</span><span class="hljs-comment">$</span> <span class="hljs-string">.</span><span class="hljs-comment">/kafka</span><span class="hljs-literal">-</span><span class="hljs-comment">topics</span><span class="hljs-string">.</span><span class="hljs-comment">sh</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">create</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">zookeeper</span> <span class="hljs-comment">10</span><span class="hljs-string">.</span><span class="hljs-comment">20</span><span class="hljs-string">.</span><span class="hljs-comment">24</span><span class="hljs-string">.</span><span class="hljs-comment">231:3181</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">replication</span><span class="hljs-literal">-</span><span class="hljs-comment">factor</span> <span class="hljs-comment">1</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">partitions</span> <span class="hljs-comment">1</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">topic</span> <span class="hljs-comment">test</span>
<span class="hljs-comment">Created</span> <span class="hljs-comment">topic</span> <span class="hljs-comment">"test"</span><span class="hljs-string">.</span>
<span class="hljs-title">[</span><span class="hljs-comment">xulu@SZB</span><span class="hljs-literal">-</span><span class="hljs-comment">L0032015</span> <span class="hljs-comment">bin</span><span class="hljs-title">]</span><span class="hljs-comment">$</span> <span class="hljs-string">.</span><span class="hljs-comment">/kafka</span><span class="hljs-literal">-</span><span class="hljs-comment">topics</span><span class="hljs-string">.</span><span class="hljs-comment">sh</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">list</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">zookeeper</span> <span class="hljs-comment">10</span><span class="hljs-string">.</span><span class="hljs-comment">20</span><span class="hljs-string">.</span><span class="hljs-comment">24</span><span class="hljs-string">.</span><span class="hljs-comment">231:3181</span>
<span class="hljs-comment">test</span>
<span class="hljs-title">[</span><span class="hljs-comment">xulu@SZB</span><span class="hljs-literal">-</span><span class="hljs-comment">L0032015</span> <span class="hljs-comment">bin</span><span class="hljs-title">]</span><span class="hljs-comment">$</span></code></pre>

<p><strong>2.Producer创建消息</strong> <br>
启动时，除了打印SLF4J之外，没有别的。下面可以直接输入生产的数据 (生产消息时不需要指定Partition，Kafka自动做Partition路由，每个Partition都是有Lead Partition和Follower Partitions组成，Lead Partition负责读写，而Follower Partitions只做复制，在Lead Partition挂了之后，自动做 Failover )</p>

<pre class="prettyprint"><code class=" hljs coffeescript">[xulu<span class="hljs-property">@SZB</span>-L0032015 bin]$ ./kafka-<span class="hljs-built_in">console</span>-producer.sh  --broker-list <span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.199</span>:<span class="hljs-number">9092</span> --topic test
<span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> message</code></pre>

<p><strong>3.Consumer消费消息</strong> <br>
   启动时，除了打印SLF4J之外，没有别的 –from-beginning实际上是指定offset的读取策略。 <br>
对于smallest和largest还是理解不到位，smallest和largest策略表示Zookeeper上的offset还没有初始化为正确值时，如何初始化offset的问题？试想，Producer生产了一批消息到Kafka中，但是Kafka尚未由任何Consumer读取，而Kafka的Offset是由Consumer进行初始化和赋值的，因此此时的Zookeeper上的offset并没有预期的0(0表示尚未读取过)，而是一个不正确的随机数，那么Consumer来读取消息时，是从头开始读还是从最大的位置等待Producer创建消息后再读取，此时就产生了两个选择，smallest表示从头读，largest表示从最大位置读 <br>
auto.offset.reset（默认是largest）: <br>
What to do when there is no initial offset in ZooKeeper or if an offset is out of range: <br>
 smallest : automatically reset the offset to the smallest offset <br>
 largest : automatically reset the offset to the largest offset <br>
 anything else: throw exception to the consumer</p>

<pre class="prettyprint"><code class=" hljs coffeescript">[xulu<span class="hljs-property">@SZB</span>-L0032015 bin]$ ./kafka-<span class="hljs-built_in">console</span>-consumer.sh --zookeeper <span class="hljs-number">10.20</span><span class="hljs-number">.25</span><span class="hljs-number">.241</span>:<span class="hljs-number">3181</span> --topic test --from-beginning
<span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> message</code></pre>

<p>4.此时在Producer终端输入内容，在Consumer终端可以立即收到</p>            </div>
						<link href="https://csdnimg.cn/release/phoenix/mdeditor/markdown_views-9e5741c4b9.css" rel="stylesheet">
                </div>