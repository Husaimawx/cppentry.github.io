---
layout:     post
title:      大数据学习第一弹你懂的之Hive升级到2.1安装配置全过程
---
<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/PMP4561705/article/details/53300449				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-f76675cdea.css">
						<div class="htmledit_views" id="content_views">
                
<p></p>
<h2 id="h2_1" style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">
一、安装Hive</h2>
<h3 id="h3_2" style="font-size:16px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">
1、下载Hive安装包</h3>
<p></p>
<p style="line-height:19.5px;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">
可以从 Apache 其中一个<a href="https://hive.apache.org/downloads.html" rel="nofollow">镜像站点</a>中下载最新稳定版的 Hive, apache-hive-2.1.0-bin.tar.gz。</p>
<h3 id="h3_3" style="font-size:16px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">
解压安装Hive</h3>
<p style="line-height:19.5px;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">
使用以下命令安装 Hive:</p>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash">sudo mv apache-hive-2.1.0-bin.tar.gz /opt
<span class="hljs-built_in" style="line-height:1.5;">cd /opt
sudo tar -xzvf apache-hive-2.1.0-bin.tar.gz    <span class="hljs-comment" style="line-height:1.5;">##解压
sudo ln <span class="hljs-_" style="line-height:1.5;">-s apache-hive-2.1.0-bin hive    <span class="hljs-comment" style="line-height:1.5;">##创建软链接</span></span></span></span></code></pre>
<p><br></p>
<h3 id="h3_4" style="font-size:16px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">
2、设置 Hive环境变量</h3>
<p style="line-height:19.5px;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">
编辑 ~/.bashrc文件, 在其中添加以下内容:</p>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-comment" style="line-height:1.5;"># Hive Env
<span class="hljs-built_in" style="line-height:1.5;">export HIVE_HOME=/opt/hive
<span class="hljs-built_in" style="line-height:1.5;">export PATH=<span class="hljs-variable" style="line-height:1.5;">$PATH:<span class="hljs-variable" style="line-height:1.5;">$HIVE_HOME/bin
</span></span></span></span></span></code></pre>
<p style="line-height:19.5px;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">
使环境变量生效:</p>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;">source ~/.bashrc</span></code></pre>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;">测试成功与否：</span></code></pre>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;">echo $HIVE_HOME
/opt/hive
</span></code></pre>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;">
</span></code></pre>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;">删除软连接的正确方式：<span style="font-family:Helvetica, Tahoma, Arial, sans-serif;font-size:14px;line-height:25.2px;"><span style="color:rgb(255,0,0);"><span style="font-size:18px;"><span style="line-height:27px;"><strong>在文件的最后不要加上/</strong></span></span></span></span></span></code></pre>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;">sudo rm -rf /opt/hive
</span></code></pre>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;">
</span></code></pre>
<pre class="hljs bash" style="line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;"><span style="font-family:SimSun;font-size:18px;"><strong>3、修改文件权限</strong></span></span></code></pre>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;">dyq@ubuntu:/opt$ sudo chown -R dyq hive
dyq@ubuntu:/opt$ sudo chmod  777 hive
</span></code></pre>
<pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;"></span></code></pre><h2 id="h2_5" style="font-size:21px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">二、配置Hive</h2><h3 id="h3_6" style="font-size:16px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">1、配置文件重命名</h3><p style="line-height:19.5px;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">在运行 Hive 之前需要使用以下命令修改配置文件:</p><pre><code class="language-cpp"><code class="hljs cpp">cd /opt/hive/conf
cp hive-env.sh.<span class="hljs-keyword" style="line-height:1.5;">template hive-env.sh
cp hive-<span class="hljs-keyword" style="line-height:1.5;">default.xml.<span class="hljs-keyword" style="line-height:1.5;">template hive-site.xml
cp hive-log4j2.properties.<span class="hljs-keyword" style="line-height:1.5;">template hive-log4j2.properties
cp hive-exec-log4j2.properties.<span class="hljs-keyword" style="line-height:1.5;">template hive-exec-log4j2.properties
</span></span></span></span></span></code></code></pre><h3 id="h3_7" style="font-size:16px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">2、修改hive-env.sh</h3><p style="line-height:19.5px;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">因为 Hive 使用了 Hadoop, 需要在 hive-env.sh 文件中指定 Hadoop 安装路径：</p><pre class="hljs bash" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs bash"><span class="hljs-built_in" style="line-height:1.5;">export JAVA_HOME=/opt/java    <span class="hljs-comment" style="line-height:1.5;">##Java路径
<span class="hljs-built_in" style="line-height:1.5;">export HADOOP_HOME=/opt/hadoop   <span class="hljs-comment" style="line-height:1.5;">##Hadoop安装路径
<span class="hljs-built_in" style="line-height:1.5;">export HIVE_HOME=/opt/hive    <span class="hljs-comment" style="line-height:1.5;">##Hive安装路径
<span class="hljs-built_in" style="line-height:1.5;">export HIVE_CONF_DIR=/opt/hive/conf    <span class="hljs-comment" style="line-height:1.5;">##Hive配置文件路径
</span></span></span></span></span></span></span></span></code></pre><h3 id="h3_8" style="font-size:16px;line-height:1.5;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">3、修改hive-site.xml</h3><p style="line-height:19.5px;font-size:13px;font-family:Verdana, Arial, Helvetica, sans-serif;background-color:rgb(254,254,242);">替换hive-site.xml文件中的 ${system:java.io.tmpdir} 和 ${system:user.name}</p><pre class="hljs dust" style="font-size:13px;line-height:19.5px;background-color:rgb(254,254,242);"><code class="hljs dust"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&lt;<span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;">property<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&gt;<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">
    <span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&lt;<span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;">name<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&gt;<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">hive.exec.scratchdir<span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&lt;/<span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;">name<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&gt;<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">
    <span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&lt;<span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;">value<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&gt;<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">/tmp/hive-$<span class="hljs-template-variable" style="line-height:1.5;">{user.name}<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&lt;/<span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;">value<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&gt;<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">
    <span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&lt;<span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;">description<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&gt;<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">HDFS root scratch dir for Hive jobs which gets created with write all (733) permission. For each connecting user, an HDFS scratch dir: $<span class="hljs-template-variable" style="line-height:1.5;">{hive.exec.scratchdir}<span class="xml" style="line-height:1.5;">/&amp;lt;username&amp;gt; is created, with $<span class="hljs-template-variable" style="line-height:1.5;">{hive.scratch.dir.permission}<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">.<span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&lt;/<span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;">description<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&gt;<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">
  <span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&lt;/<span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;">property<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&gt;<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">
  <span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&lt;<span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="hljs-name" style="line-height:1.5;">property<span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;">&gt;<span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="xml" style="line-height:1.5;">
    <span class="hljs-tag" style="line-height:1.5;"><span class="xml" style="line-height:1.5;"><span class="hljs-tag" style="line-height:1.5;" class="xml" style="line-height:1.5;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre></div></div>